(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{"ct+p":function(t,e,i){"use strict";i.r(e),i.d(e,"HomeModule",function(){return Q});var n=i("ofXK"),a=i("tyNb"),s=i("fXoL"),o=i("kmnG"),r=i("qFsG"),c=i("iadO"),h=i("jtHE"),l=i("XNiG"),u=i("/uUt"),b=i("eIep"),p=i("1G5W"),d=i("2Rin");function g(t,e){if(1&t&&(s.Sb(0,"li",7),s.Sb(1,"a",8),s.zc(2),s.Rb(),s.Rb()),2&t){const t=e.$implicit;s.Bb(1),s.jc("href",t.link,s.sc),s.Bb(1),s.Bc(" ",t.title," ")}}function f(t,e){if(1&t&&(s.Sb(0,"ul",5),s.xc(1,g,3,2,"li",6),s.Rb()),2&t){const t=s.dc().$implicit;s.Bb(1),s.jc("ngForOf",t)}}function k(t,e){if(1&t&&(s.Sb(0,"div",3),s.xc(1,f,2,1,"ul",4),s.Rb()),2&t){const t=e.$implicit;s.Bb(1),s.jc("ngIf",t.length>0)}}function m(t,e){1&t&&s.zc(0," \u767a\u58f2\u306a\u3057 ")}let v=(()=>{class t{constructor(t,e){this.utilService=t,this.cd=e,this.dateSubject$=new h.a,this.unsubscriber$=new l.a,this.dateSubject$.pipe(Object(u.a)(),Object(b.a)(t=>{const e=this.dateToString(t);return this.utilService.getMagazines(e)}),Object(p.a)(this.unsubscriber$)).subscribe(t=>{this.magazineGroups=t,this.cd.markForCheck()})}set date(t){if(!t)return;const e=new Date(t);this.dateSubject$.next(e)}ngOnInit(){}ngOnDestroy(){this.unsubscriber$.next()}dateToString(t){return`${t.getFullYear()}-${t.getMonth()+1}-${t.getDate()}`}notPublished(t){return!!t&&t.every(t=>0===t.length)}}return t.\u0275fac=function(e){return new(e||t)(s.Mb(d.a),s.Mb(s.h))},t.\u0275cmp=s.Gb({type:t,selectors:[["app-magazine"]],inputs:{date:"date"},decls:7,vars:7,consts:[[1,"magazine-title"],["class","magazine-group",4,"ngFor","ngForOf"],["noMagazines",""],[1,"magazine-group"],["class","magazine-group-list",4,"ngIf"],[1,"magazine-group-list"],["class","magazine-group-detail",4,"ngFor","ngForOf"],[1,"magazine-group-detail"],["target","_blank",3,"href"]],template:function(t,e){1&t&&(s.Sb(0,"p",0),s.zc(1),s.ec(2,"date"),s.ec(3,"async"),s.Rb(),s.xc(4,k,2,1,"div",1),s.xc(5,m,1,0,"ng-template",null,2,s.yc)),2&t&&(s.Bb(1),s.Ac(s.gc(2,2,s.fc(3,5,e.dateSubject$),"M/d(E)")),s.Bb(3),s.jc("ngForOf",e.magazineGroups))},directives:[n.k,n.l],pipes:[n.e,n.b],styles:["[_nghost-%COMP%]{padding:20px}.magazine-title[_ngcontent-%COMP%]{font-size:20px}.magazine-group-list[_ngcontent-%COMP%]{list-style-type:none;padding-left:5px;margin:2px}"],changeDetection:0}),t})();var z=i("yCtX"),w=i("DH7j"),y=i("7o/Q"),x=i("Lhse"),S=i("zx2A");class O{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new C(t,this.resultSelector))}}class C extends y.a{constructor(t,e,i=Object.create(null)){super(t),this.resultSelector=e,this.iterators=[],this.active=0,this.resultSelector="function"==typeof e?e:void 0}_next(t){const e=this.iterators;Object(w.a)(t)?e.push(new $(t)):e.push("function"==typeof t[x.a]?new j(t[x.a]()):new I(this.destination,this,t))}_complete(){const t=this.iterators,e=t.length;if(this.unsubscribe(),0!==e){this.active=e;for(let i=0;i<e;i++){let e=t[i];e.stillUnsubscribed?this.destination.add(e.subscribe()):this.active--}}else this.destination.complete()}notifyInactive(){this.active--,0===this.active&&this.destination.complete()}checkIterators(){const t=this.iterators,e=t.length,i=this.destination;for(let s=0;s<e;s++){let e=t[s];if("function"==typeof e.hasValue&&!e.hasValue())return}let n=!1;const a=[];for(let s=0;s<e;s++){let e=t[s],o=e.next();if(e.hasCompleted()&&(n=!0),o.done)return void i.complete();a.push(o.value)}this.resultSelector?this._tryresultSelector(a):i.next(a),n&&i.complete()}_tryresultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(i){return void this.destination.error(i)}this.destination.next(e)}}class j{constructor(t){this.iterator=t,this.nextResult=t.next()}hasValue(){return!0}next(){const t=this.nextResult;return this.nextResult=this.iterator.next(),t}hasCompleted(){const t=this.nextResult;return Boolean(t&&t.done)}}class ${constructor(t){this.array=t,this.index=0,this.length=0,this.length=t.length}[x.a](){return this}next(t){const e=this.index++;return e<this.length?{value:this.array[e],done:!1}:{value:null,done:!0}}hasValue(){return this.array.length>this.index}hasCompleted(){return this.array.length===this.index}}class I extends S.b{constructor(t,e,i){super(t),this.parent=e,this.observable=i,this.stillUnsubscribed=!0,this.buffer=[],this.isComplete=!1}[x.a](){return this}next(){const t=this.buffer;return 0===t.length&&this.isComplete?{value:null,done:!0}:{value:t.shift(),done:!1}}hasValue(){return this.buffer.length>0}hasCompleted(){return 0===this.buffer.length&&this.isComplete}notifyComplete(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()}notifyNext(t){this.buffer.push(t),this.parent.checkIterators()}subscribe(){return Object(S.c)(this.observable,new S.a(this))}}var _=i("LRne"),M=i("JIr8"),B=i("tk/3");let P=(()=>{class t{constructor(t){this.http=t}getTweets(t){const e=t.map(t=>`kind[]=${t}`).join("&");return this.http.get(`api/v1/twitter?${e}`).pipe(Object(M.a)(t=>(console.error(t),Object(_.a)(void 0))))}getSite(t){const e=t.map(t=>`kind[]=${t}`).join("&");return this.http.get(`api/v1/site?${e}`).pipe(Object(M.a)(t=>(console.error(t),Object(_.a)(void 0))))}}return t.\u0275fac=function(e){return new(e||t)(s.Wb(B.b))},t.\u0275prov=s.Ib({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var R=i("uJfP");function D(t,e){if(1&t&&(s.Qb(0),s.Sb(1,"a",10),s.zc(2),s.Rb(),s.Pb()),2&t){const t=s.dc(2).$implicit;s.Bb(1),s.jc("href",t.link,s.sc),s.Bb(1),s.Ac(t.title)}}function F(t,e){if(1&t&&s.Nb(0,"div",11),2&t){const t=s.dc(2).$implicit;s.jc("innerHtml",t.title,s.rc)}}function T(t,e){if(1&t&&(s.Sb(0,"div",12),s.zc(1),s.Rb()),2&t){const t=s.dc(2).$implicit;s.Bb(1),s.Bc(" ",t.summary," ")}}function N(t,e){if(1&t&&(s.Sb(0,"div",3),s.Sb(1,"div",4),s.zc(2),s.Rb(),s.Sb(3,"div",5),s.Sb(4,"div",6),s.xc(5,D,3,2,"ng-container",7),s.xc(6,F,1,1,"ng-template",null,8,s.yc),s.Rb(),s.xc(8,T,2,1,"div",9),s.Rb(),s.Rb()),2&t){const t=s.oc(7),e=s.dc().$implicit;s.Bb(2),s.Ac(e.hDate),s.Bb(3),s.jc("ngIf",!e.isTweet)("ngIfElse",t),s.Bb(3),s.jc("ngIf",!!e.summary)}}function K(t,e){if(1&t&&(s.Qb(0),s.xc(1,N,9,4,"div",2),s.Pb()),2&t){const t=e.$implicit;s.Bb(1),s.jc("ngIf",!!t)}}let G=(()=>{class t{constructor(t,e){this.newsService=t,this.cd=e,this.idleSwitchState={nogizakaCheck:!0,sakurazakaCheck:!0,hinatazakaCheck:!0},this.siteInitialized$=new l.a,this.twitterInitialized$=new l.a,this.unsubscriber$=new l.a,function(...t){const e=t[t.length-1];return"function"==typeof e&&t.pop(),Object(z.a)(t,void 0).lift(new O(e))}(this.siteInitialized$,this.twitterInitialized$).pipe(Object(p.a)(this.unsubscriber$)).subscribe(()=>{this.switchIdle()}),this.getData()}switchIdle(){const t=[];this.idleSwitchState.nogizakaCheck&&t.push(...this.nogizakaKoshiki,...this.nogizakaBlog,...this.nogizakaTwitter),this.idleSwitchState.sakurazakaCheck&&t.push(...this.sakurazakaKoshiki,...this.sakurazakaBlog,...this.sakurazakaTwitter),this.idleSwitchState.hinatazakaCheck&&t.push(...this.hinatazakaKoshiki,...this.hinatazakaBlog,...this.hinatazakaTwitter),t.sort((t,e)=>t.date<e.date?1:-1),this.posts=t,this.cd.markForCheck()}ngOnInit(){}ngOnDestroy(){this.unsubscriber$.next()}getData(){this.newsService.getSite(["nogizaka-koshiki","nogizaka-blog","sakurazaka-koshiki","sakurazaka-blog","hinatazaka-koshiki","hinatazaka-blog"]).pipe(Object(p.a)(this.unsubscriber$)).subscribe({next:t=>{t.forEach(t=>{var e,i,n,a,s;switch(t.kind){case"nogizaka-koshiki":this.nogizakaKoshiki=(null===(e=t.value)||void 0===e?void 0:e.posts)||[];break;case"nogizaka-blog":this.nogizakaBlog=t.value.posts||[];break;case"sakurazaka-koshiki":this.sakurazakaKoshiki=(null===(i=t.value)||void 0===i?void 0:i.posts)||[];break;case"sakurazaka-blog":this.sakurazakaBlog=(null===(n=t.value)||void 0===n?void 0:n.posts)||[];break;case"hinatazaka-koshiki":this.hinatazakaKoshiki=(null===(a=t.value)||void 0===a?void 0:a.posts)||[];break;case"hinatazaka-blog":this.hinatazakaBlog=(null===(s=t.value)||void 0===s?void 0:s.posts)||[]}}),this.siteInitialized$.next()}}),this.newsService.getTweets(["nogizaka","sakurazaka","hinatazaka"]).pipe(Object(p.a)(this.unsubscriber$)).subscribe({next:t=>{t.forEach(t=>{var e,i,n;switch(t.kind){case"nogizaka":this.nogizakaTwitter=((null===(e=t.value)||void 0===e?void 0:e.posts)||[]).map(t=>(t.isTweet=!0,t));break;case"sakurazaka":this.sakurazakaTwitter=((null===(i=t.value)||void 0===i?void 0:i.posts)||[]).map(t=>(t.isTweet=!0,t));break;case"hinatazaka":this.hinatazakaTwitter=((null===(n=t.value)||void 0===n?void 0:n.posts)||[]).map(t=>(t.isTweet=!0,t))}}),this.twitterInitialized$.next()}})}}return t.\u0275fac=function(e){return new(e||t)(s.Mb(P),s.Mb(s.h))},t.\u0275cmp=s.Gb({type:t,selectors:[["app-news"]],decls:2,vars:2,consts:[[3,"value","changed"],[4,"ngFor","ngForOf"],["class","post-container",4,"ngIf"],[1,"post-container"],[1,"post-date"],[1,"post-body"],[1,"post-body-title"],[4,"ngIf","ngIfElse"],["tweetTmp",""],["class","post-body-summary",4,"ngIf"],["target","_blank",3,"href"],[3,"innerHtml"],[1,"post-body-summary"]],template:function(t,e){1&t&&(s.Sb(0,"app-idle-switcher",0),s.Zb("changed",function(){return e.switchIdle()}),s.Rb(),s.xc(1,K,2,1,"ng-container",1)),2&t&&(s.jc("value",e.idleSwitchState),s.Bb(1),s.jc("ngForOf",e.posts))},directives:[R.a,n.k,n.l],styles:[".post-container[_ngcontent-%COMP%]{margin-top:15px;display:inline-flex;border-bottom:.1rem solid;width:100%}.post-date[_ngcontent-%COMP%]{width:80px;margin-right:10px}.post-body[_ngcontent-%COMP%]{width:100%}.post-body-title[_ngcontent-%COMP%]{font-weight:700;font-size:14px}.post-body-summary[_ngcontent-%COMP%]{font-size:11px}"],changeDetection:0}),t})();function E(t,e){if(1&t&&(s.Qb(0),s.Nb(1,"app-magazine",8),s.Pb()),2&t){const t=e.$implicit;s.Bb(1),s.jc("date",t)}}const H=[{path:"",component:(()=>{class t{constructor(){this.today=new Date,this.dates=[...Array(7)].map((t,e)=>{const i=new Date(this.today.getTime());return i.setDate(i.getDate()-e),i})}selectDate(t){this.selectedDate=t.value}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=s.Gb({type:t,selectors:[["app-home"]],decls:14,vars:4,consts:[[1,"home_Wrapper"],[1,"home-magazines"],[4,"ngFor","ngForOf"],[1,"home-magazines_form"],["appearance","fill"],["matInput","",3,"matDatepicker","dateChange"],["matSuffix","",3,"for"],["picker",""],[3,"date"],[1,"app-news"]],template:function(t,e){if(1&t&&(s.Sb(0,"div",0),s.Sb(1,"div",1),s.xc(2,E,2,1,"ng-container",2),s.Rb(),s.Sb(3,"div",3),s.Sb(4,"mat-form-field",4),s.Sb(5,"mat-label"),s.zc(6,"Choose a date"),s.Rb(),s.Sb(7,"input",5),s.Zb("dateChange",function(t){return e.selectDate(t)}),s.Rb(),s.Nb(8,"mat-datepicker-toggle",6),s.Nb(9,"mat-datepicker",null,7),s.Rb(),s.Nb(11,"app-magazine",8),s.Rb(),s.Sb(12,"div",9),s.Nb(13,"app-news"),s.Rb(),s.Rb()),2&t){const t=s.oc(10);s.Bb(2),s.jc("ngForOf",e.dates),s.Bb(5),s.jc("matDatepicker",t),s.Bb(1),s.jc("for",t),s.Bb(3),s.jc("date",e.selectedDate)}},directives:[n.k,o.c,o.f,r.b,c.b,c.d,o.h,c.a,v,G],styles:["body[_ngcontent-%COMP%], html[_ngcontent-%COMP%]{height:100%}body[_ngcontent-%COMP%]{margin:0;font-family:Roboto,Helvetica Neue,sans-serif}body.dark-theme[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff}body.dark-theme[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#607d8b}.home_Wrapper[_ngcontent-%COMP%]{width:100%;max-width:1080px;margin:0 auto;padding:0 30px}.home-magazines[_ngcontent-%COMP%]{margin-bottom:30px}.home-magazines[_ngcontent-%COMP%], .home-magazines_form[_ngcontent-%COMP%]{display:inline-flex}.home-news[_ngcontent-%COMP%]{margin-bottom:50px}"],changeDetection:0}),t})()}];let J=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.Kb({type:t}),t.\u0275inj=s.Jb({imports:[[a.d.forChild(H)],a.d]}),t})();var A=i("PCNd"),V=i("FKr1");let Q=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.Kb({type:t}),t.\u0275inj=s.Jb({imports:[[n.c,A.a,J,o.e,r.c,c.c,V.h]]}),t})()}}]);