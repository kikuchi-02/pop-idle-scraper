(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{"2Xbf":function(t,e,n){"use strict";n.d(e,"a",function(){return P});var i=n("XNiG"),o=n("1G5W"),r=n("jtHE"),s=n("dCgF"),a=n("fXoL"),c=n("OaWH");let l=(()=>{class t{constructor(t){this.appService=t}get initialized(){return void 0!==this.ytext}createText(t,e){this.ytext=this.appService.ydoc.getText(t),this.undoManager=new s.b(this.ytext);const n=new r.a(1);this.ytext.observe((t,e)=>{const i=this.ytext.toString();n.next(i)});const i=this.ytext.toString();return i?n.next(i):this.ytext.insert(0,e),n.asObservable()}setText(t){this.ytext.delete(0,this.ytext.length),this.ytext.insert(0,t)}undo(){this.checkInitialized(),this.undoManager.undo()}redo(){this.checkInitialized(),this.undoManager.redo()}checkInitialized(){if(!this.initialized)throw new Error("ytext is not initialized")}}return t.\u0275fac=function(e){return new(e||t)(a.Wb(c.a))},t.\u0275prov=a.Ib({token:t,factory:t.\u0275fac}),t})();var h=n("NXyV"),u=n("LRne"),d=n("SxV6"),g=n("lJxs"),f=n("5+tZ"),b=n("ZZLe"),p=n("tk/3");let m=(()=>{class t{constructor(t){this.http=t}getUserDictionary(){return this.http.get("api/v1/dictionary").pipe(Object(g.a)(t=>(this.userDictionary=JSON.parse(JSON.stringify(t.dictionary)),t.dictionary)))}bulkUpdateUserDictionary(t){return this.http.put("api/v1/dictionary",{dictionary:t}).pipe(Object(g.a)(t=>(this.userDictionary=JSON.parse(JSON.stringify(t.dictionary)),t.dictionary)))}}return t.\u0275fac=function(e){return new(e||t)(a.Wb(p.b))},t.\u0275prov=a.Ib({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),v=(()=>{class t{constructor(t,e){this.tokenizeService=t,this.dictionaryService=e}textToSoundText(t){return Object(h.a)(()=>this.dictionaryService.userDictionary?Object(u.a)(this.dictionaryService.userDictionary):this.dictionaryService.getUserDictionary()).pipe(Object(d.a)(),Object(g.a)(t=>{const e=new Map;return t.forEach(t=>{e.set(t.word,t.pronunciation)}),e}),Object(f.a)(e=>this.tokenizeService.tokenize(t).pipe(Object(g.a)(t=>{const n={},i={},o=[];let r=0,s=0;for(const a of t){let t;const c=a.surface_form.length;if("KNOWN"===a.word_type&&void 0!==a.pronunciation)o.push(a.pronunciation),t=a.pronunciation.length;else if(e.has(a.surface_form.toLowerCase())){const n=e.get(a.surface_form.toLowerCase());o.push(n),t=n.length}else o.push(a.surface_form),n[a.surface_form]={start:r,end:r+c},t=a.surface_form.length,i[a.surface_form]={start:s,end:s+t};r+=a.surface_form.length,s+=t}return{text:o.join(""),inputUnkownIndexes:n,outputUnkownIndexes:i}}))))}}return t.\u0275fac=function(e){return new(e||t)(a.Wb(b.a),a.Wb(m))},t.\u0275prov=a.Ib({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var _=n("bTqV"),C=n("rDax"),y=n("CzEO"),S=n("ofXK"),E=n("3Pt+"),x=n("NFeN");const O=["form"],w=["searchInput"];function I(t,e){if(1&t&&(a.Sb(0,"th"),a.zc(1),a.Rb()),2&t){const t=e.$implicit;a.Bb(1),a.Bc(" ",t," ")}}function k(t,e){if(1&t){const t=a.Tb();a.Sb(0,"tr"),a.Sb(1,"td"),a.Sb(2,"div",11),a.Zb("input",function(t){return e.$implicit.word=t.target.textContent}),a.Rb(),a.Rb(),a.Sb(3,"td"),a.Sb(4,"div",12),a.Zb("input",function(t){return e.$implicit.pronunciation=t.target.textContent}),a.Rb(),a.Rb(),a.Sb(5,"td"),a.Sb(6,"div",13),a.Zb("click",function(){a.qc(t);const n=e.index;return a.dc(2).dictionary.pop(n)}),a.Sb(7,"mat-icon"),a.zc(8,"close"),a.Rb(),a.Rb(),a.Rb(),a.Rb()}if(2&t){const t=e.$implicit;a.Bb(2),a.jc("textContent",t.word),a.Bb(2),a.jc("textContent",t.pronunciation)}}function M(t,e){if(1&t&&(a.Qb(0),a.Sb(1,"tbody"),a.xc(2,k,9,2,"tr",6),a.Rb(),a.Pb()),2&t){const t=a.dc();a.Bb(2),a.jc("ngForOf",t.dictionary)}}function R(t,e){}const F=function(){return["word","pronunciation"]};let j=(()=>{class t{constructor(t,e,n){this.cd=t,this.dictionaryService=e,this.elementRef=n,this.text="",this.closeEvent=new a.n,this.unsubscriber$=new i.a,this.dictionaryService.getUserDictionary().pipe(Object(o.a)(this.unsubscriber$)).subscribe(t=>{this.dictionary=t,this.cd.markForCheck()})}ngOnInit(){}ngOnDestroy(){this.unsubscriber$.next()}ngAfterViewInit(){}isKatakana(t){return/^[\u{3000}-\u{301C}\u{30A1}-\u{30F6}\u{30FB}-\u{30FE}]+$/mu.test(t)}add(){this.dictionary.push({id:void 0,word:"",pronunciation:""}),this.cd.detectChanges();const t=this.elementRef.nativeElement.querySelectorAll(".dictionary__word");t[t.length-1].focus()}close(){this.dictionaryService.bulkUpdateUserDictionary(this.dictionary),this.closeEvent.emit(),this.save()}save(){const t=this.dictionaryService.userDictionary,e=new Map;t.forEach(t=>{e.set(t.id,t)});const n=this.dictionary,i=new Set;n.map(t=>(t.id&&i.add(t.id),t.word=t.word.trim().toLowerCase(),t.pronunciation=t.pronunciation.trim().toLowerCase(),t));const r=n.filter(t=>t.word&&t.pronunciation).map(t=>{if(!t.id)return t.change="create",t;const n=e.get(t.id);return t.word!==n.word||t.pronunciation!==n.pronunciation?(t.change="update",t):t}).filter(t=>t.change);t.forEach(t=>{i.has(t.id)||(t.change="delete",r.push(t))}),r.length>0&&this.dictionaryService.bulkUpdateUserDictionary(r).pipe(Object(o.a)(this.unsubscriber$)).subscribe()}}return t.\u0275fac=function(e){return new(e||t)(a.Mb(a.h),a.Mb(m),a.Mb(a.l))},t.\u0275cmp=a.Gb({type:t,selectors:[["app-dictionary"]],viewQuery:function(t,e){if(1&t&&(a.Dc(O,1),a.Dc(w,1)),2&t){let t;a.nc(t=a.ac())&&(e.fromElement=t.first),a.nc(t=a.ac())&&(e.searchInputElement=t.first)}},outputs:{closeEvent:"closeEvent"},decls:18,vars:6,consts:[[1,"wrapper"],[1,"form"],["type","text","placeholder","keyword",1,"form__input",3,"disabled","ngModel","ngModelChange"],["searchInput",""],["type","button",3,"click"],[1,"inner"],[4,"ngFor","ngForOf"],[4,"ngIf","ngIfElse"],["yetInitialized",""],[1,"close",3,"click"],[1,"close__button"],["contenteditable","true",1,"dictionary__word",3,"textContent","input"],["contenteditable","true",1,"dictionary__pronunciation",3,"textContent","input"],[1,"dictionary__icon","dictionary__icon-delete",3,"click"]],template:function(t,e){if(1&t&&(a.Sb(0,"div",0),a.Sb(1,"div",1),a.Sb(2,"input",2,3),a.Zb("ngModelChange",function(t){return e.text=t}),a.Rb(),a.Sb(4,"button",4),a.Zb("click",function(){return e.add()}),a.zc(5,"add"),a.Rb(),a.Rb(),a.Sb(6,"div",5),a.Sb(7,"table"),a.Sb(8,"thead"),a.Sb(9,"tr"),a.xc(10,I,2,1,"th",6),a.Nb(11,"th"),a.Rb(),a.Rb(),a.xc(12,M,3,1,"ng-container",7),a.xc(13,R,0,0,"ng-template",null,8,a.yc),a.Rb(),a.Rb(),a.Sb(15,"div",9),a.Zb("click",function(){return e.close()}),a.Sb(16,"mat-icon",10),a.zc(17,"close"),a.Rb(),a.Rb(),a.Rb()),2&t){const t=a.oc(14);a.Bb(2),a.jc("disabled",!0)("ngModel",e.text),a.Bb(8),a.jc("ngForOf",a.kc(5,F)),a.Bb(2),a.jc("ngIf",!!e.dictionary)("ngIfElse",t)}},directives:[E.c,E.n,E.q,S.k,S.l,x.a],styles:[".wrapper[_ngcontent-%COMP%]{box-shadow:0 0 10px;border:1px solid #000;background-color:#fff;position:relative}.wrapper[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]{margin:10px}.wrapper[_ngcontent-%COMP%]   .form__input[_ngcontent-%COMP%]{margin-right:10px}.wrapper[_ngcontent-%COMP%]   .inner[_ngcontent-%COMP%]{width:400px;height:600px;overflow-y:scroll}.wrapper[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{position:absolute;left:400px;top:0;transform:translate(-50%,-50%);background-color:#fff;border-radius:50%;box-shadow:0 0 10px;cursor:pointer}  table{width:100%;border-collapse:collapse;border-spacing:0;margin-bottom:30px}  table thead{position:sticky;top:0}  table td,   table th{padding:10px 0;text-align:center;width:120px}  table tr:nth-child(odd){background-color:#eee}  table .dictionary__icon{cursor:pointer}"],changeDetection:0}),t})();function T(t,e){1&t&&(a.Sb(0,"div",13),a.zc(1,"loading"),a.Rb())}function q(t,e){if(1&t){const t=a.Tb();a.Sb(0,"app-dictionary",14),a.Zb("closeEvent",function(){return a.qc(t),a.dc().dictionaryOpen=!1}),a.Rb()}}const z=["left","right","both"];let P=(()=>{class t{constructor(t,e){this.cd=t,this.subtitleService=e,this.loading=!0,this.layout="both",this.dictionaryOpen=!1,this.unsubscriber$=new i.a,this.loading=!1,this.cd.markForCheck()}onEditorCreated(t,e){"input"===e?(this.inputEditor=t,this.inputEditor.setText(this.getInput())):"output"===e&&(this.outputEditor=t)}getInput(){return localStorage.getItem(t.subtitleLocalStorageKey)||""}ngOnInit(){}ngOnDestroy(){this.unsubscriber$.next()}generateSubtitle(){const e=this.inputEditor.getText();localStorage.setItem(t.subtitleLocalStorageKey,e);const n=this.formatSubtitle(e);this.outputEditor.setText(n)}convertSound(){this.loading=!0;const e=this.inputEditor.getText();localStorage.setItem(t.subtitleLocalStorageKey,e),this.subtitleService.textToSoundText(e).pipe(Object(o.a)(this.unsubscriber$)).subscribe(t=>{Object.values(t.inputUnkownIndexes).forEach(({start:t,end:e})=>{this.inputEditor.formatText(t,e-t,"background-color","orange")}),this.outputEditor.setText(t.text),Object.values(t.outputUnkownIndexes).forEach(({start:t,end:e})=>{this.outputEditor.formatText(t,e-t,"background-color","orange")}),this.loading=!1,this.cd.markForCheck()})}applyLayout(t){z.includes(t)&&(this.layout=t,this.cd.markForCheck())}formatSubtitle(t){t=(t=(t=(t=t.replace(/[\(|\uff08].*[\)|\uff09]/g,"")).replace(/\n{3,}/g,"\n\n")).replace(/\u3001/g,"\u3001\n")).replace(/\u3002/g,"\u3002\n");const e="-".repeat(20);return(t=t.replace(/\n(\d+_\d+)\n/g,(t,n)=>`\n${e}${n}${e}\n`)).replace(/\n(\d+)\n/g,(t,n)=>`\n${e}${n}${e}\n`)}}return t.subtitleLocalStorageKey="subtitleLocalStorageKey",t.\u0275fac=function(e){return new(e||t)(a.Mb(a.h),a.Mb(v))},t.\u0275cmp=a.Gb({type:t,selectors:[["app-subtitle"]],features:[a.Ab([l])],decls:27,vars:14,consts:[[1,"wrapper"],[1,"tool__container"],["mat-stroked-button","","color","primary","type","button",3,"click"],["type","button","cdkOverlayOrigin","","mat-raised-button","","color","primary",3,"click"],["trigger","cdkOverlayOrigin"],[1,"layout-button__container"],["mat-stroked-button","","color","primary",3,"disabled","click"],[1,"input-area__container"],[1,"input-area__label"],[1,"input-area__textarea"],[1,"textarea",3,"onEditorCreated"],["class","loading-modal",4,"ngIf"],["cdkConnectedOverlay","",3,"cdkConnectedOverlayOrigin","cdkConnectedOverlayOpen"],[1,"loading-modal"],[3,"closeEvent"]],template:function(t,e){if(1&t&&(a.Sb(0,"div",0),a.Sb(1,"div",1),a.Sb(2,"button",2),a.Zb("click",function(){return e.generateSubtitle()}),a.zc(3," generate subtitle "),a.Rb(),a.Sb(4,"button",2),a.Zb("click",function(){return e.convertSound()}),a.zc(5," convertSoundText "),a.Rb(),a.Sb(6,"button",3,4),a.Zb("click",function(){return e.dictionaryOpen=!e.dictionaryOpen}),a.zc(8," dictionary "),a.Rb(),a.Rb(),a.Sb(9,"div",5),a.Sb(10,"button",6),a.Zb("click",function(){return e.applyLayout("left")}),a.zc(11," input "),a.Rb(),a.Sb(12,"button",6),a.Zb("click",function(){return e.applyLayout("right")}),a.zc(13," output "),a.Rb(),a.Sb(14,"button",6),a.Zb("click",function(){return e.applyLayout("both")}),a.zc(15," both "),a.Rb(),a.Rb(),a.Sb(16,"div",7),a.Sb(17,"div",8),a.Sb(18,"label"),a.zc(19,"input"),a.Rb(),a.Sb(20,"label"),a.zc(21,"output"),a.Rb(),a.Rb(),a.Sb(22,"div",9),a.Sb(23,"quill-editor",10),a.Zb("onEditorCreated",function(t){return e.onEditorCreated(t,"input")}),a.Rb(),a.Sb(24,"quill-editor",10),a.Zb("onEditorCreated",function(t){return e.onEditorCreated(t,"output")}),a.Rb(),a.Rb(),a.Rb(),a.Rb(),a.xc(25,T,2,0,"div",11),a.xc(26,q,1,0,"ng-template",12)),2&t){const t=a.oc(7);a.Bb(10),a.jc("disabled","left"===e.layout),a.Bb(2),a.jc("disabled","right"===e.layout),a.Bb(2),a.jc("disabled","both"===e.layout),a.Bb(4),a.Eb("input-area__label--hide","right"===e.layout),a.Bb(2),a.Eb("input-area__label--hide","left"===e.layout),a.Bb(3),a.Eb("textarea--hide","left"===e.layout),a.Bb(1),a.Eb("textarea--hide","right"===e.layout),a.Bb(1),a.jc("ngIf",e.loading),a.Bb(1),a.jc("cdkConnectedOverlayOrigin",t)("cdkConnectedOverlayOpen",e.dictionaryOpen)}},directives:[_.b,C.b,y.a,S.l,C.a,j],styles:["body[_ngcontent-%COMP%], html[_ngcontent-%COMP%]{height:100%}body[_ngcontent-%COMP%]{margin:0;font-family:Roboto,Helvetica Neue,sans-serif}.wrapper[_ngcontent-%COMP%]{width:100%;max-width:1080px;margin:0 auto;padding:0 30px;width:auto;max-width:none}.wrapper[_ngcontent-%COMP%]   .layout-button__container[_ngcontent-%COMP%], .wrapper[_ngcontent-%COMP%]   .tool__container[_ngcontent-%COMP%]{margin:20px}.wrapper[_ngcontent-%COMP%]   .layout-button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:300px;height:50px}.wrapper[_ngcontent-%COMP%]   .input-area__container[_ngcontent-%COMP%]{margin:20px}.wrapper[_ngcontent-%COMP%]   .input-area__label[_ngcontent-%COMP%]{display:flex;width:100%}.wrapper[_ngcontent-%COMP%]   .input-area__label--hide[_ngcontent-%COMP%]{display:none}.wrapper[_ngcontent-%COMP%]   .input-area__label[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{flex-grow:1;font-size:30px;margin:10px}.wrapper[_ngcontent-%COMP%]   .input-area__textarea[_ngcontent-%COMP%]{display:flex;width:100%}.wrapper[_ngcontent-%COMP%]   .input-area__textarea[_ngcontent-%COMP%]   .textarea[_ngcontent-%COMP%]{min-height:1000px;width:50%}.wrapper[_ngcontent-%COMP%]   .input-area__textarea[_ngcontent-%COMP%]   .textarea--hide[_ngcontent-%COMP%]{display:none}.loading-modal[_ngcontent-%COMP%]{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);font-size:150px;color:red;opacity:.7;z-index:1000}"],changeDetection:0}),t})()},CzEO:function(t,e,n){"use strict";n.d(e,"a",function(){return b}),n.d(e,"b",function(){return p});var i=n("ofXK"),o=n("fXoL"),r=n("mrSG"),s=n("jhN1"),a=n("3Pt+");const c=[[["","quill-editor-toolbar",""]]],l=["[quill-editor-toolbar]"],h={toolbar:[["bold","italic","underline","strike"],["blockquote","code-block"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{font:[]}],[{align:[]}],["clean"],["link","image","video"]]},u=(t,e)=>t||e||"html",d=new o.r("config");let g=(()=>{class t{constructor(t){this.config=t,this.count=0,this.config||(this.config={modules:h})}getQuill(){return this.count++,this.Quill||1!==this.count||(this.$importPromise=new Promise(t=>Object(r.a)(this,void 0,void 0,function*(){var e,i;const o=yield n.e(7).then(n.t.bind(null,"kzlf",7));this.Quill=o.default?o.default:o,null===(e=this.config.customOptions)||void 0===e||e.forEach(t=>{const e=this.Quill.import(t.import);e.whitelist=t.whitelist,this.Quill.register(e,!0,this.config.suppressGlobalRegisterWarning)}),null===(i=this.config.customModules)||void 0===i||i.forEach(({implementation:t,path:e})=>{this.Quill.register(e,t,this.config.suppressGlobalRegisterWarning)}),t(this.Quill)}))),this.$importPromise}}return t.\u0275fac=function(e){return new(e||t)(o.Wb(d))},t.\u0275prov=Object(o.Ib)({factory:function(){return new t(Object(o.Wb)(d))},token:t,providedIn:"root"}),t})(),f=(()=>{class t{constructor(t,e,n,i,r,s,a){this.elementRef=t,this.domSanitizer=e,this.doc=n,this.platformId=i,this.renderer=r,this.zone=s,this.service=a,this.required=!1,this.customToolbarPosition="top",this.sanitize=!1,this.styles=null,this.strict=!0,this.customOptions=[],this.customModules=[],this.preserveWhitespace=!1,this.trimOnValidation=!1,this.compareValues=!1,this.filterNull=!1,this.onEditorCreated=new o.n,this.onEditorChanged=new o.n,this.onContentChanged=new o.n,this.onSelectionChanged=new o.n,this.onFocus=new o.n,this.onBlur=new o.n,this.disabled=!1,this.debounceTimers=[],this.valueGetter=(t,e)=>{let n=e.querySelector(".ql-editor").innerHTML;"<p><br></p>"!==n&&"<div><br></div>"!==n||(n=null);let i=n;const o=u(this.format,this.service.config.format);if("text"===o)i=t.getText();else if("object"===o)i=t.getContents();else if("json"===o)try{i=JSON.stringify(t.getContents())}catch(r){i=t.getText()}return i},this.valueSetter=(t,e)=>{const n=u(this.format,this.service.config.format);if("html"===n)return this.sanitize&&(e=this.domSanitizer.sanitize(o.J.HTML,e)),t.clipboard.convert(e);if("json"===n)try{return JSON.parse(e)}catch(i){return[{insert:e}]}return e},this.selectionChangeHandler=(t,e,n)=>{const i=!t&&!!this.onModelTouched;(this.onBlur.observers.length||this.onFocus.observers.length||this.onSelectionChanged.observers.length||i)&&this.zone.run(()=>{null===t?this.onBlur.emit({editor:this.quillEditor,source:n}):null===e&&this.onFocus.emit({editor:this.quillEditor,source:n}),this.onSelectionChanged.emit({editor:this.quillEditor,oldRange:e,range:t,source:n}),i&&this.onModelTouched()})},this.textChangeHandler=(t,e,n)=>{const i=this.quillEditor.getText(),o=this.quillEditor.getContents();let r=this.editorElem.querySelector(".ql-editor").innerHTML;"<p><br></p>"!==r&&"<div><br></div>"!==r||(r=null);const s=this.trackChanges||this.service.config.trackChanges,a=("user"===n||s&&"all"===s)&&!!this.onModelChange;(this.onContentChanged.observers.length||a)&&this.zone.run(()=>{a&&this.onModelChange(this.valueGetter(this.quillEditor,this.editorElem)),this.onContentChanged.emit({content:o,delta:t,editor:this.quillEditor,html:r,oldDelta:e,source:n,text:i})})},this.editorChangeHandler=(t,e,n,i)=>{if(this.onEditorChanged.observers.length)if("text-change"===t){const o=this.quillEditor.getText(),r=this.quillEditor.getContents();let s=this.editorElem.querySelector(".ql-editor").innerHTML;"<p><br></p>"!==s&&"<div><br></div>"!==s||(s=null),this.zone.run(()=>{this.onEditorChanged.emit({content:r,delta:e,editor:this.quillEditor,event:t,html:s,oldDelta:n,source:i,text:o})})}else this.onEditorChanged.emit({editor:this.quillEditor,event:t,oldRange:n,range:e,source:i})}}static normalizeClassNames(t){return t.trim().split(" ").reduce((t,e)=>{const n=e.trim();return n&&t.push(n),t},[])}ngAfterViewInit(){return Object(r.a)(this,void 0,void 0,function*(){if(Object(i.v)(this.platformId))return;const t=yield this.service.getQuill();this.elementRef.nativeElement.insertAdjacentHTML("top"===this.customToolbarPosition?"beforeend":"afterbegin",this.preserveWhitespace?"<pre quill-editor-element></pre>":"<div quill-editor-element></div>"),this.editorElem=this.elementRef.nativeElement.querySelector("[quill-editor-element]");const e=this.elementRef.nativeElement.querySelector("[quill-editor-toolbar]"),n=Object.assign({},this.modules||this.service.config.modules);e?n.toolbar=e:void 0===n.toolbar&&(n.toolbar=h.toolbar);let o=void 0!==this.placeholder?this.placeholder:this.service.config.placeholder;void 0===o&&(o="Insert text here ..."),this.styles&&Object.keys(this.styles).forEach(t=>{this.renderer.setStyle(this.editorElem,t,this.styles[t])}),this.classes&&this.addClasses(this.classes),this.customOptions.forEach(e=>{const n=t.import(e.import);n.whitelist=e.whitelist,t.register(n,!0)}),this.customModules.forEach(({implementation:e,path:n})=>{t.register(n,e)});let r=this.bounds&&"self"===this.bounds?this.editorElem:this.bounds;r||(r=this.service.config.bounds?this.service.config.bounds:this.doc.body);let s=this.debug;!s&&!1!==s&&this.service.config.debug&&(s=this.service.config.debug);let a=this.readOnly;a||!1===this.readOnly||(a=void 0!==this.service.config.readOnly&&this.service.config.readOnly);let c=this.scrollingContainer;c||null===this.scrollingContainer||(c=null===this.service.config.scrollingContainer||this.service.config.scrollingContainer?this.service.config.scrollingContainer:null);let l=this.formats;if(l||void 0!==l||(l=this.service.config.formats?[...this.service.config.formats]:null===this.service.config.formats?null:void 0),this.zone.runOutsideAngular(()=>{var e,i,h;if(this.quillEditor=new t(this.editorElem,{bounds:r,debug:s,formats:l,modules:n,placeholder:o,readOnly:a,scrollingContainer:c,strict:this.strict,theme:this.theme||(this.service.config.theme?this.service.config.theme:"snow")}),this.linkPlaceholder){const t=null===(i=null===(e=this.quillEditor)||void 0===e?void 0:e.theme)||void 0===i?void 0:i.tooltip,n=null===(h=null==t?void 0:t.root)||void 0===h?void 0:h.querySelector("input[data-link]");(null==n?void 0:n.dataset)&&(n.dataset.link=this.linkPlaceholder)}}),this.content){if("text"===u(this.format,this.service.config.format))this.quillEditor.setText(this.content,"silent");else{const t=this.valueSetter(this.quillEditor,this.content);this.quillEditor.setContents(t,"silent")}this.quillEditor.getModule("history").clear()}this.setDisabledState(),this.editorChangeHandlerRef=this.debounce(this.editorChangeHandler),this.quillEditor.on("editor-change",this.editorChangeHandlerRef),this.quillEditor.on("selection-change",this.selectionChangeHandler),this.textChangeHandlerRef=this.debounce(this.textChangeHandler),this.quillEditor.on("text-change",this.textChangeHandlerRef),setTimeout(()=>{this.onValidatorChanged&&this.onValidatorChanged(),this.onEditorCreated.emit(this.quillEditor)})})}ngOnDestroy(){this.quillEditor&&(this.quillEditor.off("selection-change",this.selectionChangeHandler),this.quillEditor.off("text-change",this.textChangeHandlerRef),this.quillEditor.off("editor-change",this.editorChangeHandlerRef),this.debounceTimers.forEach(t=>this.clearDebounceTimer(t)))}ngOnChanges(t){if(this.quillEditor){if(t.readOnly&&this.quillEditor.enable(!t.readOnly.currentValue),t.placeholder&&(this.quillEditor.root.dataset.placeholder=t.placeholder.currentValue),t.styles){const e=t.styles.currentValue,n=t.styles.previousValue;n&&Object.keys(n).forEach(t=>{this.renderer.removeStyle(this.editorElem,t)}),e&&Object.keys(e).forEach(t=>{this.renderer.setStyle(this.editorElem,t,this.styles[t])})}if(t.classes){const e=t.classes.currentValue,n=t.classes.previousValue;n&&this.removeClasses(n),e&&this.addClasses(e)}}}addClasses(e){t.normalizeClassNames(e).forEach(t=>{this.renderer.addClass(this.editorElem,t)})}removeClasses(e){t.normalizeClassNames(e).forEach(t=>{this.renderer.removeClass(this.editorElem,t)})}writeValue(t){if(this.filterNull&&null===t)return;if(this.content=t,!this.quillEditor)return;const e=u(this.format,this.service.config.format),n=this.valueSetter(this.quillEditor,t);if(this.compareValues){const t=this.quillEditor.getContents();if(JSON.stringify(t)===JSON.stringify(n))return}t?"text"===e?this.quillEditor.setText(t):this.quillEditor.setContents(n):this.quillEditor.setText("")}setDisabledState(t=this.disabled){this.disabled=t,this.quillEditor&&(t?(this.quillEditor.disable(),this.renderer.setAttribute(this.elementRef.nativeElement,"disabled","disabled")):(this.readOnly||this.quillEditor.enable(),this.renderer.removeAttribute(this.elementRef.nativeElement,"disabled")))}registerOnChange(t){this.onModelChange=t}registerOnTouched(t){this.onModelTouched=t}registerOnValidatorChange(t){this.onValidatorChanged=t}validate(){if(!this.quillEditor)return null;const t={};let e=!0;const n=this.quillEditor.getText(),i=this.trimOnValidation?n.trim().length:1===n.length&&0===n.trim().length?0:n.length-1;return this.minLength&&i&&i<this.minLength&&(t.minLengthError={given:i,minLength:this.minLength},e=!1),this.maxLength&&i>this.maxLength&&(t.maxLengthError={given:i,maxLength:this.maxLength},e=!1),this.required&&!i&&(t.requiredError={empty:!0},e=!1),e?null:t}debounce(t){let e;return(...n)=>{"number"==typeof this.debounceTime?(this.clearDebounceTimer(e),e=this.doc.defaultView.setTimeout(()=>{this.clearDebounceTimer(e),t(...n)},this.debounceTime),this.debounceTimers.push(e)):t(...n)}}clearDebounceTimer(t){this.doc.defaultView.clearTimeout(t),this.debounceTimers=this.debounceTimers.filter(e=>e!==t)}}return t.\u0275fac=function(e){return new(e||t)(o.Mb(o.l),o.Mb(s.b),o.Mb(i.d),o.Mb(o.C),o.Mb(o.F),o.Mb(o.A),o.Mb(g))},t.\u0275dir=o.Hb({type:t,inputs:{required:"required",customToolbarPosition:"customToolbarPosition",sanitize:"sanitize",styles:"styles",strict:"strict",customOptions:"customOptions",customModules:"customModules",preserveWhitespace:"preserveWhitespace",trimOnValidation:"trimOnValidation",compareValues:"compareValues",filterNull:"filterNull",valueGetter:"valueGetter",valueSetter:"valueSetter",format:"format",theme:"theme",modules:"modules",debug:"debug",readOnly:"readOnly",placeholder:"placeholder",maxLength:"maxLength",minLength:"minLength",formats:"formats",scrollingContainer:"scrollingContainer",bounds:"bounds",trackChanges:"trackChanges",classes:"classes",linkPlaceholder:"linkPlaceholder",debounceTime:"debounceTime"},outputs:{onEditorCreated:"onEditorCreated",onEditorChanged:"onEditorChanged",onContentChanged:"onContentChanged",onSelectionChanged:"onSelectionChanged",onFocus:"onFocus",onBlur:"onBlur"},features:[o.zb]}),t})(),b=(()=>{class t extends f{constructor(t,e,n,i,o,r,s){super(t,e,n,i,o,r,s)}}return t.\u0275fac=function(e){return new(e||t)(o.Mb(o.l),o.Mb(s.b),o.Mb(i.d),o.Mb(o.C),o.Mb(o.F),o.Mb(o.A),o.Mb(g))},t.\u0275cmp=o.Gb({type:t,selectors:[["quill-editor"]],features:[o.Ab([{multi:!0,provide:a.l,useExisting:Object(o.U)(()=>t)},{multi:!0,provide:a.k,useExisting:Object(o.U)(()=>t)}]),o.yb],ngContentSelectors:l,decls:1,vars:0,template:function(t,e){1&t&&(o.ic(c),o.hc(0))},encapsulation:2}),t})(),p=(()=>{class t{static forRoot(e){return{ngModule:t,providers:[{provide:d,useValue:e}]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.Kb({type:t}),t.\u0275inj=o.Jb({providers:[g],imports:[[i.c]]}),t})()},NFeN:function(t,e,n){"use strict";n.d(e,"a",function(){return T}),n.d(e,"b",function(){return q});var i=n("fXoL"),o=n("FKr1"),r=n("8LU1"),s=n("ofXK"),a=n("LRne"),c=n("z6cu"),l=n("cp0P"),h=n("quSY"),u=n("vkgz"),d=n("lJxs"),g=n("JIr8"),f=n("nYR2"),b=n("w1tV"),p=n("IzEk"),m=n("tk/3"),v=n("jhN1");const _=["*"];function C(t){return Error(`Unable to find icon with the name "${t}"`)}function y(t){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${t}".`)}function S(t){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${t}".`)}class E{constructor(t,e,n){this.url=t,this.svgText=e,this.options=n}}let x=(()=>{class t{constructor(t,e,n,i){this._httpClient=t,this._sanitizer=e,this._errorHandler=i,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass="material-icons",this._document=n}addSvgIcon(t,e,n){return this.addSvgIconInNamespace("",t,e,n)}addSvgIconLiteral(t,e,n){return this.addSvgIconLiteralInNamespace("",t,e,n)}addSvgIconInNamespace(t,e,n,i){return this._addSvgIconConfig(t,e,new E(n,null,i))}addSvgIconResolver(t){return this._resolvers.push(t),this}addSvgIconLiteralInNamespace(t,e,n,o){const r=this._sanitizer.sanitize(i.J.HTML,n);if(!r)throw S(n);return this._addSvgIconConfig(t,e,new E("",r,o))}addSvgIconSet(t,e){return this.addSvgIconSetInNamespace("",t,e)}addSvgIconSetLiteral(t,e){return this.addSvgIconSetLiteralInNamespace("",t,e)}addSvgIconSetInNamespace(t,e,n){return this._addSvgIconSetConfig(t,new E(e,null,n))}addSvgIconSetLiteralInNamespace(t,e,n){const o=this._sanitizer.sanitize(i.J.HTML,e);if(!o)throw S(e);return this._addSvgIconSetConfig(t,new E("",o,n))}registerFontClassAlias(t,e=t){return this._fontCssClassesByAlias.set(t,e),this}classNameForFontAlias(t){return this._fontCssClassesByAlias.get(t)||t}setDefaultFontSetClass(t){return this._defaultFontSetClass=t,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(t){const e=this._sanitizer.sanitize(i.J.RESOURCE_URL,t);if(!e)throw y(t);const n=this._cachedIconsByUrl.get(e);return n?Object(a.a)(O(n)):this._loadSvgIconFromConfig(new E(t,null)).pipe(Object(u.a)(t=>this._cachedIconsByUrl.set(e,t)),Object(d.a)(t=>O(t)))}getNamedSvgIcon(t,e=""){const n=w(e,t);let i=this._svgIconConfigs.get(n);if(i)return this._getSvgFromConfig(i);if(i=this._getIconConfigFromResolvers(e,t),i)return this._svgIconConfigs.set(n,i),this._getSvgFromConfig(i);const o=this._iconSetConfigs.get(e);return o?this._getSvgFromIconSetConfigs(t,o):Object(c.a)(C(n))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(t){return t.svgText?Object(a.a)(O(this._svgElementFromConfig(t))):this._loadSvgIconFromConfig(t).pipe(Object(d.a)(t=>O(t)))}_getSvgFromIconSetConfigs(t,e){const n=this._extractIconWithNameFromAnySet(t,e);if(n)return Object(a.a)(n);const o=e.filter(t=>!t.svgText).map(t=>this._loadSvgIconSetFromConfig(t).pipe(Object(g.a)(e=>{const n=this._sanitizer.sanitize(i.J.RESOURCE_URL,t.url);return this._errorHandler.handleError(new Error(`Loading icon set URL: ${n} failed: ${e.message}`)),Object(a.a)(null)})));return Object(l.a)(o).pipe(Object(d.a)(()=>{const n=this._extractIconWithNameFromAnySet(t,e);if(!n)throw C(t);return n}))}_extractIconWithNameFromAnySet(t,e){for(let n=e.length-1;n>=0;n--){const i=e[n];if(i.svgText&&i.svgText.indexOf(t)>-1){const e=this._svgElementFromConfig(i),n=this._extractSvgIconFromSet(e,t,i.options);if(n)return n}}return null}_loadSvgIconFromConfig(t){return this._fetchIcon(t).pipe(Object(u.a)(e=>t.svgText=e),Object(d.a)(()=>this._svgElementFromConfig(t)))}_loadSvgIconSetFromConfig(t){return t.svgText?Object(a.a)(null):this._fetchIcon(t).pipe(Object(u.a)(e=>t.svgText=e))}_extractSvgIconFromSet(t,e,n){const i=t.querySelector(`[id="${e}"]`);if(!i)return null;const o=i.cloneNode(!0);if(o.removeAttribute("id"),"svg"===o.nodeName.toLowerCase())return this._setSvgAttributes(o,n);if("symbol"===o.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(o),n);const r=this._svgElementFromString("<svg></svg>");return r.appendChild(o),this._setSvgAttributes(r,n)}_svgElementFromString(t){const e=this._document.createElement("DIV");e.innerHTML=t;const n=e.querySelector("svg");if(!n)throw Error("<svg> tag not found");return n}_toSvgElement(t){const e=this._svgElementFromString("<svg></svg>"),n=t.attributes;for(let i=0;i<n.length;i++){const{name:t,value:o}=n[i];"id"!==t&&e.setAttribute(t,o)}for(let i=0;i<t.childNodes.length;i++)t.childNodes[i].nodeType===this._document.ELEMENT_NODE&&e.appendChild(t.childNodes[i].cloneNode(!0));return e}_setSvgAttributes(t,e){return t.setAttribute("fit",""),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("focusable","false"),e&&e.viewBox&&t.setAttribute("viewBox",e.viewBox),t}_fetchIcon(t){var e;const{url:n,options:o}=t,r=null!==(e=null==o?void 0:o.withCredentials)&&void 0!==e&&e;if(!this._httpClient)throw Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.");if(null==n)throw Error(`Cannot fetch icon from URL "${n}".`);const s=this._sanitizer.sanitize(i.J.RESOURCE_URL,n);if(!s)throw y(n);const a=this._inProgressUrlFetches.get(s);if(a)return a;const c=this._httpClient.get(s,{responseType:"text",withCredentials:r}).pipe(Object(f.a)(()=>this._inProgressUrlFetches.delete(s)),Object(b.a)());return this._inProgressUrlFetches.set(s,c),c}_addSvgIconConfig(t,e,n){return this._svgIconConfigs.set(w(t,e),n),this}_addSvgIconSetConfig(t,e){const n=this._iconSetConfigs.get(t);return n?n.push(e):this._iconSetConfigs.set(t,[e]),this}_svgElementFromConfig(t){if(!t.svgElement){const e=this._svgElementFromString(t.svgText);this._setSvgAttributes(e,t.options),t.svgElement=e}return t.svgElement}_getIconConfigFromResolvers(t,e){for(let i=0;i<this._resolvers.length;i++){const o=this._resolvers[i](e,t);if(o)return(n=o).url&&n.options?new E(o.url,null,o.options):new E(o,null)}var n}}return t.\u0275fac=function(e){return new(e||t)(i.Wb(m.b,8),i.Wb(v.b),i.Wb(s.d,8),i.Wb(i.m))},t.\u0275prov=Object(i.Ib)({factory:function(){return new t(Object(i.Wb)(m.b,8),Object(i.Wb)(v.b),Object(i.Wb)(s.d,8),Object(i.Wb)(i.m))},token:t,providedIn:"root"}),t})();function O(t){return t.cloneNode(!0)}function w(t,e){return t+":"+e}class I{constructor(t){this._elementRef=t}}const k=Object(o.q)(I),M=new i.r("mat-icon-location",{providedIn:"root",factory:function(){const t=Object(i.V)(s.d),e=t?t.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}}),R=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],F=R.map(t=>`[${t}]`).join(", "),j=/^url\(['"]?#(.*?)['"]?\)$/;let T=(()=>{class t extends k{constructor(t,e,n,i,o){super(t),this._iconRegistry=e,this._location=i,this._errorHandler=o,this._inline=!1,this._currentIconFetch=h.a.EMPTY,n||t.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(t){this._inline=Object(r.b)(t)}get svgIcon(){return this._svgIcon}set svgIcon(t){t!==this._svgIcon&&(t?this._updateSvgIcon(t):this._svgIcon&&this._clearSvgElement(),this._svgIcon=t)}get fontSet(){return this._fontSet}set fontSet(t){const e=this._cleanupFontValue(t);e!==this._fontSet&&(this._fontSet=e,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(t){const e=this._cleanupFontValue(t);e!==this._fontIcon&&(this._fontIcon=e,this._updateFontIconClasses())}_splitIconName(t){if(!t)return["",""];const e=t.split(":");switch(e.length){case 1:return["",e[0]];case 2:return e;default:throw Error(`Invalid icon name: "${t}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const t=this._elementsWithExternalReferences;if(t&&t.size){const t=this._location.getPathname();t!==this._previousPath&&(this._previousPath=t,this._prependPathToReferences(t))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(t){this._clearSvgElement();const e=t.querySelectorAll("style");for(let i=0;i<e.length;i++)e[i].textContent+=" ";const n=this._location.getPathname();this._previousPath=n,this._cacheChildrenWithExternalReferences(t),this._prependPathToReferences(n),this._elementRef.nativeElement.appendChild(t)}_clearSvgElement(){const t=this._elementRef.nativeElement;let e=t.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();e--;){const n=t.childNodes[e];1===n.nodeType&&"svg"!==n.nodeName.toLowerCase()||t.removeChild(n)}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const t=this._elementRef.nativeElement,e=this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet):this._iconRegistry.getDefaultFontSetClass();e!=this._previousFontSetClass&&(this._previousFontSetClass&&t.classList.remove(this._previousFontSetClass),e&&t.classList.add(e),this._previousFontSetClass=e),this.fontIcon!=this._previousFontIconClass&&(this._previousFontIconClass&&t.classList.remove(this._previousFontIconClass),this.fontIcon&&t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(t){return"string"==typeof t?t.trim().split(" ")[0]:t}_prependPathToReferences(t){const e=this._elementsWithExternalReferences;e&&e.forEach((e,n)=>{e.forEach(e=>{n.setAttribute(e.name,`url('${t}#${e.value}')`)})})}_cacheChildrenWithExternalReferences(t){const e=t.querySelectorAll(F),n=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let i=0;i<e.length;i++)R.forEach(t=>{const o=e[i],r=o.getAttribute(t),s=r?r.match(j):null;if(s){let e=n.get(o);e||(e=[],n.set(o,e)),e.push({name:t,value:s[1]})}})}_updateSvgIcon(t){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),t){const[e,n]=this._splitIconName(t);e&&(this._svgNamespace=e),n&&(this._svgName=n),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(n,e).pipe(Object(p.a)(1)).subscribe(t=>this._setSvgElement(t),t=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${e}:${n}! ${t.message}`))})}}}return t.\u0275fac=function(e){return new(e||t)(i.Mb(i.l),i.Mb(x),i.Xb("aria-hidden"),i.Mb(M),i.Mb(i.m))},t.\u0275cmp=i.Gb({type:t,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:7,hostBindings:function(t,e){2&t&&(i.Cb("data-mat-icon-type",e._usingFontIcon()?"font":"svg")("data-mat-icon-name",e._svgName||e.fontIcon)("data-mat-icon-namespace",e._svgNamespace||e.fontSet),i.Eb("mat-icon-inline",e.inline)("mat-icon-no-color","primary"!==e.color&&"accent"!==e.color&&"warn"!==e.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[i.yb],ngContentSelectors:_,decls:1,vars:0,template:function(t,e){1&t&&(i.ic(),i.hc(0))},styles:[".mat-icon{background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}\n"],encapsulation:2,changeDetection:0}),t})(),q=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=i.Kb({type:t}),t.\u0275inj=i.Jb({imports:[[o.g],o.g]}),t})()},ZZLe:function(t,e,n){"use strict";n.d(e,"a",function(){return u});var i=n("2Vo4"),o=n("NXyV"),r=n("LRne"),s=n("HDdC"),a=n("SxV6"),c=n("lJxs"),l=n("fXoL"),h=n("tk/3");let u=(()=>{class t{constructor(t){this.http=t,this.kuromojiTokenizer$=new i.a(void 0)}tokenize(t){return this.http.post("api/v1/tokenize",{text:t})}kuromojiTokenize(t){return Object(o.a)(()=>{const t=this.kuromojiTokenizer$.getValue();return t?Object(r.a)(t):new s.a(t=>{kuromoji.builder({dicPath:"../../assets/kuromoji/dict"}).build((e,n)=>{e?(console.error(e),t.error(e)):(this.kuromojiTokenizer$.next(n),t.next(n))})})}).pipe(Object(a.a)(),Object(c.a)(e=>e.tokenize(t)))}}return t.\u0275fac=function(e){return new(e||t)(l.Wb(h.b))},t.\u0275prov=l.Ib({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},mrSG:function(t,e,n){"use strict";function i(t,e,n,i){return new(n||(n=Promise))(function(o,r){function s(t){try{c(i.next(t))}catch(e){r(e)}}function a(t){try{c(i.throw(t))}catch(e){r(e)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(s,a)}c((i=i.apply(t,e||[])).next())})}n.d(e,"a",function(){return i})}}]);