(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{"7JkJ":function(t,e,n){"use strict";n.r(e),n.d(e,"ScriptsModule",function(){return Jn});var i=n("+rOU"),r=n("ofXK"),o=n("fXoL"),a=n("3Pt+"),s=n("bTqV"),c=n("R1ws"),l=n("FKr1");const h=["*",[["mat-card-footer"]]],d=["*","mat-card-footer"];let u=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=o.Hb({type:t,selectors:[["mat-card-title"],["","mat-card-title",""],["","matCardTitle",""]],hostAttrs:[1,"mat-card-title"]}),t})(),p=(()=>{class t{constructor(t){this._animationMode=t}}return t.\u0275fac=function(e){return new(e||t)(o.Mb(c.a,8))},t.\u0275cmp=o.Gb({type:t,selectors:[["mat-card"]],hostAttrs:[1,"mat-card","mat-focus-indicator"],hostVars:2,hostBindings:function(t,e){2&t&&o.Eb("_mat-animation-noopable","NoopAnimations"===e._animationMode)},exportAs:["matCard"],ngContentSelectors:d,decls:2,vars:0,template:function(t,e){1&t&&(o.ic(h),o.hc(0),o.hc(1,1))},styles:[".mat-card{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);display:block;position:relative;padding:16px;border-radius:4px}._mat-animation-noopable.mat-card{transition:none;animation:none}.mat-card .mat-divider-horizontal{position:absolute;left:0;width:100%}[dir=rtl] .mat-card .mat-divider-horizontal{left:auto;right:0}.mat-card .mat-divider-horizontal.mat-divider-inset{position:static;margin:0}[dir=rtl] .mat-card .mat-divider-horizontal.mat-divider-inset{margin-right:0}.cdk-high-contrast-active .mat-card{outline:solid 1px}.mat-card-actions,.mat-card-subtitle,.mat-card-content{display:block;margin-bottom:16px}.mat-card-title{display:block;margin-bottom:8px}.mat-card-actions{margin-left:-8px;margin-right:-8px;padding:8px 0}.mat-card-actions-align-end{display:flex;justify-content:flex-end}.mat-card-image{width:calc(100% + 32px);margin:0 -16px 16px -16px}.mat-card-footer{display:block;margin:0 -16px -16px -16px}.mat-card-actions .mat-button,.mat-card-actions .mat-raised-button,.mat-card-actions .mat-stroked-button{margin:0 8px}.mat-card-header{display:flex;flex-direction:row}.mat-card-header .mat-card-title{margin-bottom:12px}.mat-card-header-text{margin:0 16px}.mat-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;object-fit:cover}.mat-card-title-group{display:flex;justify-content:space-between}.mat-card-sm-image{width:80px;height:80px}.mat-card-md-image{width:112px;height:112px}.mat-card-lg-image{width:152px;height:152px}.mat-card-xl-image{width:240px;height:240px;margin:-8px}.mat-card-title-group>.mat-card-xl-image{margin:-8px 0 8px}@media(max-width: 599px){.mat-card-title-group{margin:0}.mat-card-xl-image{margin-left:0;margin-right:0}}.mat-card>:first-child,.mat-card-content>:first-child{margin-top:0}.mat-card>:last-child:not(.mat-card-footer),.mat-card-content>:last-child:not(.mat-card-footer){margin-bottom:0}.mat-card-image:first-child{margin-top:-16px;border-top-left-radius:inherit;border-top-right-radius:inherit}.mat-card>.mat-card-actions:last-child{margin-bottom:-8px;padding-bottom:0}.mat-card-actions:not(.mat-card-actions-align-end) .mat-button:first-child,.mat-card-actions:not(.mat-card-actions-align-end) .mat-raised-button:first-child,.mat-card-actions:not(.mat-card-actions-align-end) .mat-stroked-button:first-child{margin-left:0;margin-right:0}.mat-card-actions-align-end .mat-button:last-child,.mat-card-actions-align-end .mat-raised-button:last-child,.mat-card-actions-align-end .mat-stroked-button:last-child{margin-left:0;margin-right:0}.mat-card-title:not(:first-child),.mat-card-subtitle:not(:first-child){margin-top:-4px}.mat-card-header .mat-card-subtitle:not(:first-child){margin-top:-8px}.mat-card>.mat-card-xl-image:first-child{margin-top:-8px}.mat-card>.mat-card-xl-image:last-child{margin-bottom:-8px}\n"],encapsulation:2,changeDetection:0}),t})(),b=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.Kb({type:t}),t.\u0275inj=o.Jb({imports:[[l.g],l.g]}),t})();var g=n("0IaG"),f=n("NFeN"),m=n("qFsG"),_=n("8LU1"),v=n("u47x");n("0EQZ");let y=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.Kb({type:t}),t.\u0275inj=o.Jb({imports:[[l.m,l.g],l.g]}),t})();var x=n("XNiG"),C=n("VRyK"),w=n("quSY"),k=n("LRne"),S=n("1G5W"),O=n("Kj3r"),M=n("/uUt"),A=n("IzEk"),R=n("pLZG"),P=n("FtGj"),j=n("rDax"),E=n("iadO"),T=n("kmnG"),I=n("cH1L");const L=function(t){return{active:t}};function B(t,e){if(1&t){const t=o.Tb();o.Sb(0,"button",2),o.Zb("click",function(){o.rc(t);const n=e.$implicit;return o.dc().select(n)}),o.Rb()}if(2&t){const t=e.$implicit,n=o.dc();o.vc("background-color",t),o.jc("ngClass",o.lc(3,L,n.selectedColor===t))}}function F(t,e){if(1&t){const t=o.Tb();o.Sb(0,"button",2),o.Zb("click",function(){o.rc(t);const n=e.$implicit;return o.dc().select(n)}),o.Rb()}if(2&t){const t=e.$implicit,n=o.dc();o.vc("background-color",t),o.jc("ngClass",o.lc(3,L,n.selectedColor===t))}}const D=["button"],z=/^\s+/,N=/\s+$/,$=Math.round,H=(Math,Math,Math,/[^0-9]/g),q=255,V=["#ffffff","#ffff00","#ff00ff","#ff0000","#c0c0c0","#808080","#808000","#800080","#800000","#00ffff","#00ff00","#008080","#008000","#0000ff","#000080","#000000"];function Z(t,e,n){const i=t.getImageData(e,n,1,1).data;return{r:i[0],g:i[1],b:i[2]}}function G(t){return 1==t.length?"0"+t:""+t}function W(t){return U(t)/255}function U(t){return parseInt(t,16)}function K(t,e,n,i){var r=[G($(t).toString(16)),G($(e).toString(16)),G($(n).toString(16))];return i&&r[0].charAt(0)==r[0].charAt(1)&&r[1].charAt(0)==r[1].charAt(1)&&r[2].charAt(0)==r[2].charAt(1)?r[0].charAt(0)+r[1].charAt(0)+r[2].charAt(0):r.join("")}const X="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)",Q="[\\s|\\(]+("+X+")[,|\\s]+("+X+")[,|\\s]+("+X+")\\s*\\)?",Y="[\\s|\\(]+("+X+")[,|\\s]+("+X+")[,|\\s]+("+X+")[,|\\s]+("+X+")\\s*\\)?",J={CSS_UNIT:new RegExp(X),rgb:new RegExp("rgb"+Q),rgba:new RegExp("rgba"+Y),hsl:new RegExp("hsl"+Q),hsla:new RegExp("hsla"+Y),hsv:new RegExp("hsv"+Q),hsva:new RegExp("hsva"+Y),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function tt(t){let e;return t=t.replace(z,"").replace(N,"").toLowerCase(),(e=J.rgb.exec(t))?{r:e[1],g:e[2],b:e[3],a:1}:(e=J.rgba.exec(t))?{r:e[1],g:e[2],b:e[3],a:e[4]}:(e=J.hex8.exec(t))?{r:U(e[1]),g:U(e[2]),b:U(e[3]),a:W(e[4])}:(e=J.hex6.exec(t))?{r:U(e[1]),g:U(e[2]),b:U(e[3]),a:1}:(e=J.hex4.exec(t))?{r:U(e[1]+""+e[1]),g:U(e[2]+""+e[2]),b:U(e[3]+""+e[3]),a:W(e[4]+""+e[4])}:(e=J.hex3.exec(t))?{r:U(e[1]+""+e[1]),g:U(e[2]+""+e[2]),b:U(e[3]+""+e[3]),a:1}:null}class et{constructor(t,e,n,i){this.r=t>q?q:t,this.g=e>q?q:e,this.b=n>q?q:n,this.a=null!=i?i>1?1:i:1,this.roundA=Math.round(this.a),this.hex=K(this.r,this.g,this.b),this.rgba=this.toRgba()}toHex(t){return K(this.r,this.g,this.b,t)}toRgba(){return`rgba(${this.r},${this.g},${this.b},${this.a})`}toHexString(t){return"#"+this.toHex(t)}toRgbString(){return 1===this.a?"rgb("+Math.round(this.r)+", "+Math.round(this.g)+", "+Math.round(this.b)+")":"rgba("+Math.round(this.r)+", "+Math.round(this.g)+", "+Math.round(this.b)+", "+this.roundA+")"}toHex8(t){return function(t,e,n,i,r){var o,a=[G($(t).toString(16)),G($(e).toString(16)),G($(n).toString(16)),G((o=i,Math.round(255*parseFloat(o)).toString(16)))];return r&&a[0].charAt(0)==a[0].charAt(1)&&a[1].charAt(0)==a[1].charAt(1)&&a[2].charAt(0)==a[2].charAt(1)&&a[3].charAt(0)==a[3].charAt(1)?a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0)+a[3].charAt(0):a.join("")}(this.r,this.g,this.b,this.a,t)}toHex8String(t){return"#"+this.toHex8(t)}toString(t){let e;return t||!(this.a<1&&this.a>=0)||"hex"!==t&&"hex6"!==t&&"hex3"!==t&&"hex4"!==t&&"hex8"!==t?("rgb"===t&&(e=this.toRgbString()),"hex"!==t&&"hex6"!==t||(e=this.toHexString()),"hex3"===t&&(e=this.toHexString(!0)),"hex4"===t&&(e=this.toHex8String(!0)),"hex8"===t&&(e=this.toHex8String()),e||this.toHexString()):this.toRgbString()}}let nt=(()=>{class t{constructor(){this.colorChanged=new o.n}ngOnInit(){}handleColorChanged(t){this.colorChanged.emit(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Gb({type:t,selectors:[["ngx-mat-color-palette"]],hostAttrs:[1,"ngx-mat-color-palette"],inputs:{color:"color"},outputs:{colorChanged:"colorChanged"},decls:2,vars:2,consts:[[3,"color","colorChanged"]],template:function(t,e){1&t&&(o.Sb(0,"ngx-mat-color-canvas",0),o.Zb("colorChanged",function(t){return e.handleColorChanged(t)}),o.Rb(),o.Sb(1,"ngx-mat-color-collection",0),o.Zb("colorChanged",function(t){return e.handleColorChanged(t)}),o.Rb()),2&t&&(o.jc("color",e.color),o.Bb(1),o.jc("color",e.color))},directives:function(){return[rt,ot]},styles:[".ngx-mat-color-palette .actions{display:flex;margin-top:10px}.ngx-mat-color-palette .actions .left{display:flex;flex-direction:column;margin-right:15px}.ngx-mat-color-palette .actions .left .preview{flex:2 1 auto;margin-bottom:10px}.ngx-mat-color-palette .actions .right{display:flex;flex-direction:column;width:40px}"],encapsulation:2}),t})(),it=(()=>{class t{constructor(t,e){this.zone=t,this.colorChanged=new o.n,this.x=0,this.y=0,this.drag=!1,this._destroyed=new x.a,this.elementId=e}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}ngAfterViewInit(){this.canvas=document.getElementById(this.elementId),this.ctx=this.canvas.getContext("2d"),this.width=this.canvas.width,this.height=this.canvas.height,this.draw()}draw(){this.ctx.clearRect(0,0,this.width,this.height),this.ctx.rect(0,0,this.width,this.height),this.fillGradient(),0!=this.y&&this.redrawIndicator(this.x,this.y)}onMousedown(t){this.drag=!0,this.changeColor(t),this.zone.runOutsideAngular(()=>{this.canvas.addEventListener("mousemove",this.onMousemove.bind(this))})}onMousemove(t){this.drag&&this.zone.run(()=>{this.changeColor(t)})}onMouseup(t){this.drag=!1,this.canvas.removeEventListener("mousemove",this.onMousemove)}emitChange(t){this.colorChanged.emit(t)}}return t.\u0275fac=function(e){return new(e||t)(o.Mb(o.A),o.Mb(String))},t.\u0275dir=o.Hb({type:t,inputs:{color:"color"},outputs:{colorChanged:"colorChanged"}}),t})(),rt=(()=>{class t extends it{constructor(t){super(t,"color-block"),this.zone=t,this._resetBaseColor=!0,this.formGroup=new a.h({r:new a.e(null,[a.u.required]),g:new a.e(null,[a.u.required]),b:new a.e(null,[a.u.required]),a:new a.e(null,[a.u.required]),hex:new a.e(null,[a.u.required,a.u.pattern(J.hex6)])})}get rCtrl(){return this.formGroup.get("r")}get gCtrl(){return this.formGroup.get("g")}get bCtrl(){return this.formGroup.get("b")}get aCtrl(){return this.formGroup.get("a")}get hexCtrl(){return this.formGroup.get("hex")}ngOnInit(){Object(C.a)(this.rCtrl.valueChanges,this.gCtrl.valueChanges,this.bCtrl.valueChanges,this.aCtrl.valueChanges).pipe(Object(S.a)(this._destroyed),Object(O.a)(400)).subscribe(t=>{const e=new et(Number(this.rCtrl.value),Number(this.gCtrl.value),Number(this.bCtrl.value),Number(this.aCtrl.value));this.emitChange(e)}),this.hexCtrl.valueChanges.pipe(Object(S.a)(this._destroyed),Object(O.a)(400),Object(M.a)()).subscribe(t=>{const e=tt(t);if(null!=e){const t=new et(e.r,e.g,e.b,e.a);this.emitChange(t)}})}ngOnChanges(t){t.color&&t.color.currentValue&&(this.updateForm(t.color.currentValue),this._resetBaseColor&&(this._baseColor=t.color.currentValue),this._resetBaseColor=!0,t.color.firstChange||this.draw())}updateForm(t){const e={emitEvent:!1};this.rCtrl.setValue(t.r,e),this.gCtrl.setValue(t.g,e),this.bCtrl.setValue(t.b,e),this.aCtrl.setValue(t.a,e),this.hexCtrl.setValue(t.hex,e)}redrawIndicator(t,e){this.ctx.beginPath(),this.ctx.strokeStyle="white",this.ctx.arc(t,e,5,0,2*Math.PI,!1),this.ctx.stroke(),this.ctx.closePath()}fillGradient(){this.ctx.fillStyle=this._baseColor?this._baseColor.rgba:"rgba(255,255,255,1)",this.ctx.fillRect(0,0,this.width,this.height);const t=this.ctx.createLinearGradient(0,0,this.width,0);t.addColorStop(0,"rgba(255,255,255,1)"),t.addColorStop(1,"rgba(255,255,255,0)"),this.ctx.fillStyle=t,this.ctx.fillRect(0,0,this.width,this.height);const e=this.ctx.createLinearGradient(0,0,0,this.height);e.addColorStop(0,"rgba(0,0,0,0)"),e.addColorStop(1,"rgba(0,0,0,1)"),this.ctx.fillStyle=e,this.ctx.fillRect(0,0,this.width,this.height)}onSliderColorChanged(t){this._baseColor=t,this.color=t,this.fillGradient(),this.emitChange(t)}changeColor(t){this.x=t.offsetX,this.y=t.offsetY,this._resetBaseColor=!1,this.draw();const{r:e,g:n,b:i}=Z(this.ctx,t.offsetX,t.offsetY);this.emitChange(new et(e,n,i))}}return t.\u0275fac=function(e){return new(e||t)(o.Mb(o.A))},t.\u0275cmp=o.Gb({type:t,selectors:[["ngx-mat-color-canvas"]],hostAttrs:[1,"ngx-mat-color-canvas"],features:[o.yb,o.zb],decls:30,vars:3,consts:[[3,"formGroup"],[1,"color-canvas-row"],[1,"zone-canvas"],["id","color-block","width","200","height","200",1,"zone-block",3,"mousedown","mouseup"],[3,"colorChanged"],[1,"zone-inputs"],["matInput","","formControlName","r","ngxMatNumericColorInput","","autocomplete","off"],["matInput","","formControlName","g","ngxMatNumericColorInput","","autocomplete","off"],["matInput","","formControlName","b","ngxMatNumericColorInput","","autocomplete","off"],["mat-mini-fab","",1,"preview"],["matPrefix","",1,"symbol"],["matInput","","formControlName","hex","autocomplete","off"],["matInput","","formControlName","a","type","number","min","0","max","1","step","0.1","autocomplete","off"]],template:function(t,e){1&t&&(o.Sb(0,"form",0),o.Sb(1,"div",1),o.Sb(2,"div",2),o.Sb(3,"canvas",3),o.Zb("mousedown",function(t){return e.onMousedown(t)})("mouseup",function(t){return e.onMouseup(t)}),o.Rb(),o.Sb(4,"ngx-mat-color-slider",4),o.Zb("colorChanged",function(t){return e.onSliderColorChanged(t)}),o.Rb(),o.Rb(),o.Sb(5,"div",5),o.Sb(6,"mat-form-field"),o.Sb(7,"mat-label"),o.Ac(8,"R"),o.Rb(),o.Nb(9,"input",6),o.Rb(),o.Sb(10,"mat-form-field"),o.Sb(11,"mat-label"),o.Ac(12,"G"),o.Rb(),o.Nb(13,"input",7),o.Rb(),o.Sb(14,"mat-form-field"),o.Sb(15,"mat-label"),o.Ac(16,"B"),o.Rb(),o.Nb(17,"input",8),o.Rb(),o.Rb(),o.Rb(),o.Sb(18,"div",1),o.Nb(19,"button",9),o.Sb(20,"mat-form-field"),o.Sb(21,"mat-label"),o.Ac(22,"HEX6"),o.Rb(),o.Sb(23,"mat-label",10),o.Ac(24,"#\xa0"),o.Rb(),o.Nb(25,"input",11),o.Rb(),o.Sb(26,"mat-form-field"),o.Sb(27,"mat-label"),o.Ac(28,"A"),o.Rb(),o.Nb(29,"input",12),o.Rb(),o.Rb(),o.Rb()),2&t&&(o.jc("formGroup",e.formGroup),o.Bb(19),o.vc("background-color",(null==e.color?null:e.color.rgba)||"transparent"))},directives:function(){return[a.v,a.o,a.i,at,T.c,T.f,m.b,a.c,a.n,a.g,yt,s.a,T.g,a.r]},styles:[".ngx-mat-color-canvas .color-canvas-row{display:flex}.ngx-mat-color-canvas .color-canvas-row:first-of-type{height:200px;margin-bottom:12px}.ngx-mat-color-canvas .color-canvas-row:first-of-type .card{height:180px}.ngx-mat-color-canvas .color-canvas-row canvas:hover{cursor:crosshair}.ngx-mat-color-canvas .color-canvas-row .zone{display:flex}.ngx-mat-color-canvas .color-canvas-row .zone-canvas{height:200px}.ngx-mat-color-canvas .color-canvas-row .zone-canvas .zone-block{border:1px solid rgba(0,0,0,.12)}.ngx-mat-color-canvas .color-canvas-row .zone-strip{flex-basis:auto;margin-left:10px}.ngx-mat-color-canvas .color-canvas-row .zone-inputs{display:flex;flex-direction:column;height:200px;margin-left:16px;margin-top:12px;width:40px}.ngx-mat-color-canvas .color-canvas-row:nth-of-type(2){display:flex}.ngx-mat-color-canvas .color-canvas-row:nth-of-type(2) .preview{height:40px;min-height:40px;min-width:40px;width:40px}.ngx-mat-color-canvas .color-canvas-row:nth-of-type(2) .mat-form-field{margin-left:16px}.ngx-mat-color-canvas .color-canvas-row:nth-of-type(2) .mat-form-field:first-of-type{width:170px}.ngx-mat-color-canvas .color-canvas-row:nth-of-type(2) .mat-form-field:first-of-type .symbol{color:rgba(0,0,0,.54);font-weight:700}.ngx-mat-color-canvas .color-canvas-row:nth-of-type(2) .mat-form-field:last-of-type{width:40px}.ngx-mat-color-canvas .mat-form-field-label{font-weight:700}"],encapsulation:2}),t})(),ot=(()=>{class t{constructor(){this.colorChanged=new o.n,this.colors1=V.slice(0,8),this.colors2=V.slice(8,16)}set color(t){t&&(this.selectedColor=t.toHexString())}ngOnInit(){}select(t){this.selectedColor=t;const{r:e,g:n,b:i,a:r}=tt(t);this.colorChanged.emit(new et(e,n,i,r))}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Gb({type:t,selectors:[["ngx-mat-color-collection"]],hostAttrs:[1,"ngx-mat-color-collection"],inputs:{color:"color"},outputs:{colorChanged:"colorChanged"},decls:4,vars:2,consts:[[1,"color-collection-row"],["mat-mini-fab","","class","btn-color",3,"background-color","ngClass","click",4,"ngFor","ngForOf"],["mat-mini-fab","",1,"btn-color",3,"ngClass","click"]],template:function(t,e){1&t&&(o.Sb(0,"div",0),o.yc(1,B,1,5,"button",1),o.Rb(),o.Sb(2,"div",0),o.yc(3,F,1,5,"button",1),o.Rb()),2&t&&(o.Bb(1),o.jc("ngForOf",e.colors1),o.Bb(2),o.jc("ngForOf",e.colors2))},directives:[r.k,s.a,r.j],styles:[".ngx-mat-color-collection .btn-color{box-shadow:none;height:20px;margin-right:11px;opacity:.3;width:20px}.ngx-mat-color-collection .btn-color.active{box-shadow:0 3px 5px -1px rgba(0,0,0,.2),0 6px 10px 0 rgba(0,0,0,.14),0 1px 18px 0 rgba(0,0,0,.12);opacity:1}"],encapsulation:2}),t})(),at=(()=>{class t extends it{constructor(t){super(t,"color-strip"),this.zone=t}ngOnInit(){}ngAfterViewInit(){super.ngAfterViewInit()}fillGradient(){const t=this.ctx.createLinearGradient(0,0,0,this.height);t.addColorStop(0,"rgba(255, 0, 0, 1)"),t.addColorStop(.17,"rgba(255, 255, 0, 1)"),t.addColorStop(.34,"rgba(0, 255, 0, 1)"),t.addColorStop(.51,"rgba(0, 255, 255, 1)"),t.addColorStop(.68,"rgba(0, 0, 255, 1)"),t.addColorStop(.85,"rgba(255, 0, 255, 1)"),t.addColorStop(1,"rgba(255, 0, 0, 1)"),this.ctx.fillStyle=t,this.ctx.fill()}redrawIndicator(t,e){this.ctx.beginPath(),this.ctx.strokeStyle="white",this.ctx.lineWidth=2,this.ctx.arc(7.5,e,7.5,0,2*Math.PI,!1),this.ctx.stroke(),this.ctx.closePath()}changeColor(t){this.x=t.offsetX,this.y=t.offsetY,this.draw();const{r:e,g:n,b:i}=Z(this.ctx,t.offsetX,t.offsetY);this.emitChange(new et(e,n,i))}}return t.\u0275fac=function(e){return new(e||t)(o.Mb(o.A))},t.\u0275cmp=o.Gb({type:t,selectors:[["ngx-mat-color-slider"]],features:[o.yb],decls:1,vars:0,consts:[["id","color-strip","width","15","height","200",1,"zone-strip",3,"mousedown","mouseup"]],template:function(t,e){1&t&&(o.Sb(0,"canvas",0),o.Zb("mousedown",function(t){return e.onMousedown(t)})("mouseup",function(t){return e.onMouseup(t)}),o.Rb())},styles:[""]}),t})(),st=(()=>{class t{constructor(){}sameColor(t,e){return null==t&&null==e||null!=t&&null!=e&&t.rgba===e.rgba}format(t,e){return t.toString(e)}parse(t){const e=tt(t);return e?new et(e.r,e.g,e.b,e.a):null}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=o.Ib({token:t,factory:t.\u0275fac}),t})();const ct={display:{colorInput:"hex"}},lt=new o.r("mat-color-formats"),ht=new o.r("ngx-mat-colorpicker-scroll-strategy"),dt={provide:ht,deps:[j.c],useFactory:function(t){return()=>t.scrollStrategies.reposition()}},ut=Object(l.q)(class{constructor(t){this._elementRef=t}});let pt=(()=>{class t extends ut{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(o.Mb(o.l))},t.\u0275cmp=o.Gb({type:t,selectors:[["ngx-mat-color-picker-content"]],viewQuery:function(t,e){if(1&t&&o.Ec(nt,1),2&t){let t;o.nc(t=o.ac())&&(e._palette=t.first)}},hostAttrs:[1,"ngx-mat-colorpicker-content"],hostVars:3,hostBindings:function(t,e){2&t&&(o.xc("@transformPanel","enter"),o.Eb("ngx-mat-colorpicker-content-touch",e.picker.touchUi))},inputs:{color:"color"},exportAs:["ngxMatColorPickerContent"],features:[o.yb],decls:1,vars:1,consts:[[3,"color","colorChanged"]],template:function(t,e){1&t&&(o.Sb(0,"ngx-mat-color-palette",0),o.Zb("colorChanged",function(t){return e.picker.select(t)}),o.Rb()),2&t&&o.jc("color",e.picker._selected)},directives:[nt],styles:[".ngx-mat-colorpicker-content{background-color:#fff;border-radius:4px;box-shadow:0 2px 4px -1px rgba(0,0,0,.2),0 4px 5px 0 rgba(0,0,0,.14),0 1px 10px 0 rgba(0,0,0,.12);color:rgba(0,0,0,.87);display:block;padding:16px}.ngx-mat-colorpicker-content .ngx-mat-color-palette{height:354px;width:296px}.ngx-mat-colorpicker-content-touch{display:block;max-height:80vh;overflow:auto}.ngx-mat-colorpicker-content-touch .ngx-mat-color-palette{max-height:788px;max-width:750px;min-height:312px;min-width:250px}@media (orientation:landscape){.mat-colorpicker-content-touch .ngx-mat-color-palette{height:80vh;width:64vh}}@media (orientation:portrait){.mat-colorpicker-content-touch .ngx-mat-color-palette{height:100vw;width:80vw}}"],encapsulation:2,data:{animation:[E.e.transformPanel,E.e.fadeInCalendar]},changeDetection:0}),t})(),bt=(()=>{class t{constructor(t,e,n,i,r,a,s,c){this._dialog=t,this._overlay=e,this._zone=n,this._adapter=i,this._dir=r,this._document=s,this._viewContainerRef=c,this.openedStream=new o.n,this.closedStream=new o.n,this._touchUi=!1,this._opened=!1,this._defaultColor="primary",this._validSelected=null,this._disabledChange=new x.a,this._focusedElementBeforeOpen=null,this._inputSubscription=w.a.EMPTY,this._selectedChanged=new x.a,this._scrollStrategy=a}get disabled(){return void 0===this._disabled&&this._pickerInput?this._pickerInput.disabled:!!this._disabled}set disabled(t){const e=Object(_.b)(t);e!==this._disabled&&(this._disabled=e,this._disabledChange.next(e))}get touchUi(){return this._touchUi}set touchUi(t){this._touchUi=Object(_.b)(t)}get opened(){return this._opened}set opened(t){t?this.open():this.close()}get defaultColor(){return this._defaultColor}set defaultColor(t){this._defaultColor=t}get color(){return this._color||(this._pickerInput?this._pickerInput.getThemePalette():void 0)}set color(t){this._color=t}get _selected(){return this._validSelected}set _selected(t){this._validSelected=t}ngOnInit(){}ngOnDestroy(){this.close(),this._inputSubscription.unsubscribe(),this._disabledChange.complete(),this._popupRef&&(this._popupRef.dispose(),this._popupComponentRef=null)}select(t){let e=this._selected;this._selected=t,this._adapter.sameColor(e,this._selected)||this._selectedChanged.next(t)}registerInput(t){if(this._pickerInput)throw Error("A ColorPicker can only be associated with a single input.");this._pickerInput=t,this._inputSubscription=this._pickerInput._valueChange.subscribe(t=>this._selected=t)}open(){if(!this._opened&&!this.disabled){if(!this._pickerInput)throw Error("Attempted to open an ColorPicker with no associated input.");this._document&&(this._focusedElementBeforeOpen=this._document.activeElement),this.touchUi?this._openAsDialog():this._openAsPopup(),this._opened=!0,this.openedStream.emit()}}_openAsDialog(){this._dialogRef&&this._dialogRef.close(),this._dialogRef=this._dialog.open(pt,{direction:this._dir?this._dir.value:"ltr",viewContainerRef:this._viewContainerRef,panelClass:"ngx-mat-colorpicker-dialog"}),this._dialogRef.afterClosed().subscribe(()=>this.close()),this._dialogRef.componentInstance.picker=this,this._setColor()}_openAsPopup(){this._portal||(this._portal=new i.d(pt,this._viewContainerRef)),this._popupRef||this._createPopup(),this._popupRef.hasAttached()||(this._popupComponentRef=this._popupRef.attach(this._portal),this._popupComponentRef.instance.picker=this,this._setColor(),this._zone.onStable.asObservable().pipe(Object(A.a)(1)).subscribe(()=>{this._popupRef.updatePosition()}))}_createPopup(){const t=new j.d({positionStrategy:this._createPopupPositionStrategy(),hasBackdrop:!0,backdropClass:"mat-overlay-transparent-backdrop",direction:this._dir,scrollStrategy:this._scrollStrategy(),panelClass:"mat-colorpicker-popup"});this._popupRef=this._overlay.create(t),this._popupRef.overlayElement.setAttribute("role","dialog"),Object(C.a)(this._popupRef.backdropClick(),this._popupRef.detachments(),this._popupRef.keydownEvents().pipe(Object(R.a)(t=>t.keyCode===P.f||this._pickerInput&&t.altKey&&t.keyCode===P.o))).subscribe(t=>{t&&t.preventDefault(),this.close()})}close(){if(!this._opened)return;this._popupRef&&this._popupRef.hasAttached()&&this._popupRef.detach(),this._dialogRef&&(this._dialogRef.close(),this._dialogRef=null),this._portal&&this._portal.isAttached&&this._portal.detach();const t=()=>{this._opened&&(this._opened=!1,this.closedStream.emit(),this._focusedElementBeforeOpen=null)};this._focusedElementBeforeOpen&&"function"==typeof this._focusedElementBeforeOpen.focus?(this._focusedElementBeforeOpen.focus(),setTimeout(t)):t()}_setColor(){const t=this.color;this._popupComponentRef&&(this._popupComponentRef.instance.color=t),this._dialogRef&&(this._dialogRef.componentInstance.color=t)}_createPopupPositionStrategy(){return this._overlay.position().flexibleConnectedTo(this._pickerInput.getConnectedOverlayOrigin()).withTransformOriginOn(".ngx-mat-colorpicker-content").withFlexibleDimensions(!1).withViewportMargin(8).withLockedPosition().withPositions([{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"}])}}return t.\u0275fac=function(e){return new(e||t)(o.Mb(g.b),o.Mb(j.c),o.Mb(o.A),o.Mb(st),o.Mb(I.b,8),o.Mb(ht),o.Mb(r.d,8),o.Mb(o.Q))},t.\u0275cmp=o.Gb({type:t,selectors:[["ngx-mat-color-picker"]],inputs:{disabled:"disabled",touchUi:"touchUi",opened:"opened",defaultColor:"defaultColor",color:"color"},outputs:{openedStream:"opened",closedStream:"closed"},exportAs:["ngxMatColorPicker"],decls:0,vars:0,template:function(t,e){},encapsulation:2,changeDetection:0}),t})();class gt{constructor(t,e){this.target=t,this.targetElement=e,this.value=this.target.value}}const ft={provide:a.l,useExisting:Object(o.U)(()=>_t),multi:!0},mt={provide:a.k,useExisting:Object(o.U)(()=>_t),multi:!0};let _t=(()=>{class t{constructor(t,e,n,i){if(this._elementRef=t,this._formField=e,this._colorFormats=n,this._adapter=i,this.colorChange=new o.n,this.colorInput=new o.n,this._disabledChange=new o.n,this._valueChange=new o.n,this._onTouched=()=>{},this._cvaOnChange=()=>{},this._validatorOnChange=()=>{},this._pickerSubscription=w.a.EMPTY,this._validator=a.u.compose([]),this._lastValueValid=!1,!this._colorFormats)throw Error("NgxMatColorPicker: No provider found for MAT_COLOR_FORMATS. You must define MAT_COLOR_FORMATS in your module")}set ngxMatColorPicker(t){t&&(this._picker=t,this._picker.registerInput(this),this._pickerSubscription.unsubscribe(),this._pickerSubscription=this._picker._selectedChanged.subscribe(t=>{this.value=t,this._cvaOnChange(t),this._onTouched(),this.colorInput.emit(new gt(this,this._elementRef.nativeElement)),this.colorChange.emit(new gt(this,this._elementRef.nativeElement))}))}get disabled(){return!!this._disabled}set disabled(t){const e=Object(_.b)(t),n=this._elementRef.nativeElement;this._disabled!==e&&(this._disabled=e,this._disabledChange.emit(e)),e&&n.blur&&n.blur()}get value(){return this._value}set value(t){const e=this.value;this._value=t,this._formatValue(t),this._adapter.sameColor(e,t)||this._valueChange.emit(t)}getThemePalette(){return this._formField?this._formField.color:void 0}registerOnValidatorChange(t){this._validatorOnChange=t}validate(t){return this._validator?this._validator(t):null}getPopupConnectionElementRef(){return this.getConnectedOverlayOrigin()}getConnectedOverlayOrigin(){return this._formField?this._formField.getConnectedOverlayOrigin():this._elementRef}ngOnInit(){}ngOnDestroy(){this._pickerSubscription.unsubscribe(),this._valueChange.complete(),this._disabledChange.complete()}writeValue(t){this.value=t}registerOnChange(t){this._cvaOnChange=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this.disabled=t}_onChange(){this.colorChange.emit(new gt(this,this._elementRef.nativeElement))}_onKeydown(t){this._picker&&t.altKey&&t.keyCode===P.c&&!this._elementRef.nativeElement.readOnly&&(this._picker.open(),t.preventDefault())}_onBlur(){this.value&&this._formatValue(this.value),this._onTouched()}_formatValue(t){this._elementRef.nativeElement.value=t?this._adapter.format(t,this._colorFormats.display.colorInput):""}_onInput(t){const e=this._lastValueValid,n=this._adapter.parse(t);this._adapter.sameColor(n,this._value)?e!==this._lastValueValid&&this._validatorOnChange():(this._value=n,this._cvaOnChange(n),this._valueChange.emit(n),this.colorInput.emit(new gt(this,this._elementRef.nativeElement)))}}return t.\u0275fac=function(e){return new(e||t)(o.Mb(o.l),o.Mb(T.c,8),o.Mb(lt,8),o.Mb(st))},t.\u0275dir=o.Hb({type:t,selectors:[["input","ngxMatColorPicker",""]],hostVars:3,hostBindings:function(t,e){1&t&&o.Zb("input",function(t){return e._onInput(t.target.value)})("change",function(){return e._onChange()})("blur",function(){return e._onBlur()})("keydown",function(t){return e._onKeydown(t)}),2&t&&(o.Vb("disabled",e.disabled),o.Cb("aria-haspopup",e._picker?"dialog":null)("aria-owns",(null==e._picker?null:e._picker.opened)&&e._picker.id||null))},inputs:{ngxMatColorPicker:"ngxMatColorPicker",value:"value",disabled:"disabled"},outputs:{colorChange:"colorChange",colorInput:"colorInput"},exportAs:["ngxMatColorPickerInput"],features:[o.Ab([ft,mt,{provide:m.a,useExisting:t}])]}),t})(),vt=(()=>{class t{constructor(t){this._cd=t,this._stateChanges=w.a.EMPTY}get disabled(){if(null==this._disabled&&this.picker)return this.picker.disabled}set disabled(t){this._disabled=t}ngOnInit(){}ngOnChanges(t){t.picker&&this._watchStateChanges()}ngOnDestroy(){this._stateChanges.unsubscribe()}ngAfterContentInit(){this._watchStateChanges()}open(t){this.picker&&!this.disabled&&(this.picker.open(),t.stopPropagation())}_watchStateChanges(){const t=this.picker?this.picker._disabledChange:Object(k.a)(),e=this.picker&&this.picker._pickerInput?this.picker._pickerInput._disabledChange:Object(k.a)(),n=this.picker?Object(C.a)(this.picker.openedStream,this.picker.closedStream):Object(k.a)();this._stateChanges.unsubscribe(),this._stateChanges=Object(C.a)(t,e,n).subscribe(()=>this._cd.markForCheck())}}return t.\u0275fac=function(e){return new(e||t)(o.Mb(o.h))},t.\u0275cmp=o.Gb({type:t,selectors:[["ngx-mat-color-toggle"]],viewQuery:function(t,e){if(1&t&&o.Ec(D,1),2&t){let t;o.nc(t=o.ac())&&(e._button=t.first)}},hostAttrs:[1,"ngx-mat-color-toggle"],hostVars:7,hostBindings:function(t,e){1&t&&o.Zb("focus",function(){return e._button.focus()}),2&t&&(o.Cb("tabindex",-1),o.Eb("ngx-mat-color-toggle-active",e.picker&&e.picker.opened)("mat-accent",e.picker&&"accent"===e.picker.color)("mat-warn",e.picker&&"warn"===e.picker.color))},inputs:{disabled:"disabled",picker:["for","picker"],tabIndex:"tabIndex"},exportAs:["ngxMatColorPickerToggle"],features:[o.zb],decls:4,vars:5,consts:[["mat-icon-button","","type","button",3,"disabled","click"],["button",""]],template:function(t,e){1&t&&(o.Sb(0,"button",0,1),o.Zb("click",function(t){return e.open(t)}),o.Sb(2,"mat-icon"),o.Ac(3,"palette"),o.Rb(),o.Rb()),2&t&&(o.jc("disabled",e.disabled),o.Cb("aria-haspopup",e.picker?"dialog":null)("tabindex",e.disabled?-1:e.tabIndex),o.Bb(2),o.vc("color",null==e.picker||null==e.picker._selected?null:e.picker._selected.rgba))},directives:[s.a,f.a],styles:[".mat-form-field-appearance-legacy .mat-form-field-prefix .ngx-mat-color-toggle-default-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .ngx-mat-color-toggle-default-icon{width:1em}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .ngx-mat-color-toggle-default-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .ngx-mat-color-toggle-default-icon{display:block;height:1.5em;width:1.5em}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .ngx-mat-color-toggle-default-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .ngx-mat-color-toggle-default-icon{margin:auto}"],encapsulation:2}),t})(),yt=(()=>{class t{constructor(){}onInput(t){this._formatInput(t.target)}_formatInput(t){let e=Number(t.value.replace(H,""));e=isNaN(e)?0:e,t.value=e}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=o.Hb({type:t,selectors:[["","ngxMatNumericColorInput",""]],hostBindings:function(t,e){1&t&&o.Zb("input",function(t){return e.onInput(t)})}}),t})(),xt=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.Kb({type:t}),t.\u0275inj=o.Jb({providers:[st,dt],imports:[[r.c,m.c,s.b,b,y,a.j,a.s,g.f,i.f,f.b]]}),t})();var Ct=n("jaxi"),wt=n("7EHt"),kt=n("M9IT"),St=n("d3UM"),Ot=n("1jcm"),Mt=n("5RNC"),At=n("GU7r"),Rt=n("xgIS"),Pt=n("PqYM"),jt=n("R0Ic"),Et=n("JX91"),Tt=n("nLfN"),It=n("vxfF");function Lt(t,e){1&t&&o.hc(0)}const Bt=["*"];function Ft(t,e){}const Dt=function(t){return{animationDuration:t}},zt=function(t,e){return{value:t,params:e}},Nt=["tabBodyWrapper"],$t=["tabHeader"];function Ht(t,e){}function qt(t,e){if(1&t&&o.yc(0,Ht,0,0,"ng-template",9),2&t){const t=o.dc().$implicit;o.jc("cdkPortalOutlet",t.templateLabel)}}function Vt(t,e){if(1&t&&o.Ac(0),2&t){const t=o.dc().$implicit;o.Bc(t.textLabel)}}function Zt(t,e){if(1&t){const t=o.Tb();o.Sb(0,"div",6),o.Zb("click",function(){o.rc(t);const n=e.$implicit,i=e.index,r=o.dc(),a=o.oc(1);return r._handleClick(n,a,i)})("cdkFocusChange",function(n){o.rc(t);const i=e.index;return o.dc()._tabFocusChanged(n,i)}),o.Sb(1,"div",7),o.yc(2,qt,1,1,"ng-template",8),o.yc(3,Vt,1,1,"ng-template",8),o.Rb(),o.Rb()}if(2&t){const t=e.$implicit,n=e.index,i=o.dc();o.Eb("mat-tab-label-active",i.selectedIndex==n),o.jc("id",i._getTabLabelId(n))("disabled",t.disabled)("matRippleDisabled",t.disabled||i.disableRipple),o.Cb("tabIndex",i._getTabIndex(t,n))("aria-posinset",n+1)("aria-setsize",i._tabs.length)("aria-controls",i._getTabContentId(n))("aria-selected",i.selectedIndex==n)("aria-label",t.ariaLabel||null)("aria-labelledby",!t.ariaLabel&&t.ariaLabelledby?t.ariaLabelledby:null),o.Bb(2),o.jc("ngIf",t.templateLabel),o.Bb(1),o.jc("ngIf",!t.templateLabel)}}function Gt(t,e){if(1&t){const t=o.Tb();o.Sb(0,"mat-tab-body",10),o.Zb("_onCentered",function(){return o.rc(t),o.dc()._removeTabBodyWrapperHeight()})("_onCentering",function(e){return o.rc(t),o.dc()._setTabBodyWrapperHeight(e)}),o.Rb()}if(2&t){const t=e.$implicit,n=e.index,i=o.dc();o.Eb("mat-tab-body-active",i.selectedIndex==n),o.jc("id",i._getTabContentId(n))("content",t.content)("position",t.position)("origin",t.origin)("animationDuration",i.animationDuration),o.Cb("aria-labelledby",i._getTabLabelId(n))}}const Wt=["tabListContainer"],Ut=["tabList"],Kt=["nextPaginator"],Xt=["previousPaginator"],Qt=new o.r("MatInkBarPositioner",{providedIn:"root",factory:function(){return t=>({left:t?(t.offsetLeft||0)+"px":"0",width:t?(t.offsetWidth||0)+"px":"0"})}});let Yt=(()=>{class t{constructor(t,e,n,i){this._elementRef=t,this._ngZone=e,this._inkBarPositioner=n,this._animationMode=i}alignToElement(t){this.show(),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this._setStyles(t))}):this._setStyles(t)}show(){this._elementRef.nativeElement.style.visibility="visible"}hide(){this._elementRef.nativeElement.style.visibility="hidden"}_setStyles(t){const e=this._inkBarPositioner(t),n=this._elementRef.nativeElement;n.style.left=e.left,n.style.width=e.width}}return t.\u0275fac=function(e){return new(e||t)(o.Mb(o.l),o.Mb(o.A),o.Mb(Qt),o.Mb(c.a,8))},t.\u0275dir=o.Hb({type:t,selectors:[["mat-ink-bar"]],hostAttrs:[1,"mat-ink-bar"],hostVars:2,hostBindings:function(t,e){2&t&&o.Eb("_mat-animation-noopable","NoopAnimations"===e._animationMode)}}),t})();const Jt=new o.r("MatTabContent"),te=new o.r("MatTabLabel");class ee{}const ne=Object(l.s)(ee),ie=new o.r("MAT_TAB_GROUP");let re=(()=>{class t extends ne{constructor(t,e){super(),this._viewContainerRef=t,this._closestTabGroup=e,this.textLabel="",this._contentPortal=null,this._stateChanges=new x.a,this.position=null,this.origin=null,this.isActive=!1}get templateLabel(){return this._templateLabel}set templateLabel(t){this._setTemplateLabelInput(t)}get content(){return this._contentPortal}ngOnChanges(t){(t.hasOwnProperty("textLabel")||t.hasOwnProperty("disabled"))&&this._stateChanges.next()}ngOnDestroy(){this._stateChanges.complete()}ngOnInit(){this._contentPortal=new i.g(this._explicitContent||this._implicitContent,this._viewContainerRef)}_setTemplateLabelInput(t){t&&(this._templateLabel=t)}}return t.\u0275fac=function(e){return new(e||t)(o.Mb(o.Q),o.Mb(ie))},t.\u0275cmp=o.Gb({type:t,selectors:[["mat-tab"]],contentQueries:function(t,e,n){if(1&t&&(o.Fb(n,te,1),o.Fb(n,Jt,3,o.M)),2&t){let t;o.nc(t=o.ac())&&(e.templateLabel=t.first),o.nc(t=o.ac())&&(e._explicitContent=t.first)}},viewQuery:function(t,e){if(1&t&&o.Ec(o.M,3),2&t){let t;o.nc(t=o.ac())&&(e._implicitContent=t.first)}},inputs:{disabled:"disabled",textLabel:["label","textLabel"],ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"]},exportAs:["matTab"],features:[o.yb,o.zb],ngContentSelectors:Bt,decls:1,vars:0,template:function(t,e){1&t&&(o.ic(),o.yc(0,Lt,1,0,"ng-template"))},encapsulation:2}),t})();const oe={translateTab:Object(jt.m)("translateTab",[Object(jt.j)("center, void, left-origin-center, right-origin-center",Object(jt.k)({transform:"none"})),Object(jt.j)("left",Object(jt.k)({transform:"translate3d(-100%, 0, 0)",minHeight:"1px"})),Object(jt.j)("right",Object(jt.k)({transform:"translate3d(100%, 0, 0)",minHeight:"1px"})),Object(jt.l)("* => left, * => right, left => center, right => center",Object(jt.e)("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")),Object(jt.l)("void => left-origin-center",[Object(jt.k)({transform:"translate3d(-100%, 0, 0)"}),Object(jt.e)("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")]),Object(jt.l)("void => right-origin-center",[Object(jt.k)({transform:"translate3d(100%, 0, 0)"}),Object(jt.e)("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")])])};let ae=(()=>{class t extends i.c{constructor(t,e,n,i){super(t,e,i),this._host=n,this._centeringSub=w.a.EMPTY,this._leavingSub=w.a.EMPTY}ngOnInit(){super.ngOnInit(),this._centeringSub=this._host._beforeCentering.pipe(Object(Et.a)(this._host._isCenterPosition(this._host._position))).subscribe(t=>{t&&!this.hasAttached()&&this.attach(this._host._content)}),this._leavingSub=this._host._afterLeavingCenter.subscribe(()=>{this.detach()})}ngOnDestroy(){super.ngOnDestroy(),this._centeringSub.unsubscribe(),this._leavingSub.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(o.Mb(o.j),o.Mb(o.Q),o.Mb(Object(o.U)(()=>ce)),o.Mb(r.d))},t.\u0275dir=o.Hb({type:t,selectors:[["","matTabBodyHost",""]],features:[o.yb]}),t})(),se=(()=>{class t{constructor(t,e,n){this._elementRef=t,this._dir=e,this._dirChangeSubscription=w.a.EMPTY,this._translateTabComplete=new x.a,this._onCentering=new o.n,this._beforeCentering=new o.n,this._afterLeavingCenter=new o.n,this._onCentered=new o.n(!0),this.animationDuration="500ms",e&&(this._dirChangeSubscription=e.change.subscribe(t=>{this._computePositionAnimationState(t),n.markForCheck()})),this._translateTabComplete.pipe(Object(M.a)((t,e)=>t.fromState===e.fromState&&t.toState===e.toState)).subscribe(t=>{this._isCenterPosition(t.toState)&&this._isCenterPosition(this._position)&&this._onCentered.emit(),this._isCenterPosition(t.fromState)&&!this._isCenterPosition(this._position)&&this._afterLeavingCenter.emit()})}set position(t){this._positionIndex=t,this._computePositionAnimationState()}ngOnInit(){"center"==this._position&&null!=this.origin&&(this._position=this._computePositionFromOrigin(this.origin))}ngOnDestroy(){this._dirChangeSubscription.unsubscribe(),this._translateTabComplete.complete()}_onTranslateTabStarted(t){const e=this._isCenterPosition(t.toState);this._beforeCentering.emit(e),e&&this._onCentering.emit(this._elementRef.nativeElement.clientHeight)}_getLayoutDirection(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}_isCenterPosition(t){return"center"==t||"left-origin-center"==t||"right-origin-center"==t}_computePositionAnimationState(t=this._getLayoutDirection()){this._position=this._positionIndex<0?"ltr"==t?"left":"right":this._positionIndex>0?"ltr"==t?"right":"left":"center"}_computePositionFromOrigin(t){const e=this._getLayoutDirection();return"ltr"==e&&t<=0||"rtl"==e&&t>0?"left-origin-center":"right-origin-center"}}return t.\u0275fac=function(e){return new(e||t)(o.Mb(o.l),o.Mb(I.b,8),o.Mb(o.h))},t.\u0275dir=o.Hb({type:t,inputs:{animationDuration:"animationDuration",position:"position",_content:["content","_content"],origin:"origin"},outputs:{_onCentering:"_onCentering",_beforeCentering:"_beforeCentering",_afterLeavingCenter:"_afterLeavingCenter",_onCentered:"_onCentered"}}),t})(),ce=(()=>{class t extends se{constructor(t,e,n){super(t,e,n)}}return t.\u0275fac=function(e){return new(e||t)(o.Mb(o.l),o.Mb(I.b,8),o.Mb(o.h))},t.\u0275cmp=o.Gb({type:t,selectors:[["mat-tab-body"]],viewQuery:function(t,e){if(1&t&&o.Ec(i.c,1),2&t){let t;o.nc(t=o.ac())&&(e._portalHost=t.first)}},hostAttrs:[1,"mat-tab-body"],features:[o.yb],decls:3,vars:6,consts:[["cdkScrollable","",1,"mat-tab-body-content"],["content",""],["matTabBodyHost",""]],template:function(t,e){1&t&&(o.Sb(0,"div",0,1),o.Zb("@translateTab.start",function(t){return e._onTranslateTabStarted(t)})("@translateTab.done",function(t){return e._translateTabComplete.next(t)}),o.yc(2,Ft,0,0,"ng-template",2),o.Rb()),2&t&&o.jc("@translateTab",o.mc(3,zt,e._position,o.lc(1,Dt,e.animationDuration)))},directives:[ae],styles:[".mat-tab-body-content{height:100%;overflow:auto}.mat-tab-group-dynamic-height .mat-tab-body-content{overflow:hidden}\n"],encapsulation:2,data:{animation:[oe.translateTab]}}),t})();const le=new o.r("MAT_TABS_CONFIG");let he=0;class de{}class ue{constructor(t){this._elementRef=t}}const pe=Object(l.q)(Object(l.r)(ue),"primary");let be=(()=>{class t extends pe{constructor(t,e,n,i){super(t),this._changeDetectorRef=e,this._animationMode=i,this._tabs=new o.E,this._indexToSelect=0,this._tabBodyWrapperHeight=0,this._tabsSubscription=w.a.EMPTY,this._tabLabelSubscription=w.a.EMPTY,this._selectedIndex=null,this.headerPosition="above",this.selectedIndexChange=new o.n,this.focusChange=new o.n,this.animationDone=new o.n,this.selectedTabChange=new o.n(!0),this._groupId=he++,this.animationDuration=n&&n.animationDuration?n.animationDuration:"500ms",this.disablePagination=!(!n||null==n.disablePagination)&&n.disablePagination,this.dynamicHeight=!(!n||null==n.dynamicHeight)&&n.dynamicHeight}get dynamicHeight(){return this._dynamicHeight}set dynamicHeight(t){this._dynamicHeight=Object(_.b)(t)}get selectedIndex(){return this._selectedIndex}set selectedIndex(t){this._indexToSelect=Object(_.e)(t,null)}get animationDuration(){return this._animationDuration}set animationDuration(t){this._animationDuration=/^\d+$/.test(t)?t+"ms":t}get backgroundColor(){return this._backgroundColor}set backgroundColor(t){const e=this._elementRef.nativeElement;e.classList.remove(`mat-background-${this.backgroundColor}`),t&&e.classList.add(`mat-background-${t}`),this._backgroundColor=t}ngAfterContentChecked(){const t=this._indexToSelect=this._clampTabIndex(this._indexToSelect);if(this._selectedIndex!=t){const e=null==this._selectedIndex;if(!e){this.selectedTabChange.emit(this._createChangeEvent(t));const e=this._tabBodyWrapper.nativeElement;e.style.minHeight=e.clientHeight+"px"}Promise.resolve().then(()=>{this._tabs.forEach((e,n)=>e.isActive=n===t),e||(this.selectedIndexChange.emit(t),this._tabBodyWrapper.nativeElement.style.minHeight="")})}this._tabs.forEach((e,n)=>{e.position=n-t,null==this._selectedIndex||0!=e.position||e.origin||(e.origin=t-this._selectedIndex)}),this._selectedIndex!==t&&(this._selectedIndex=t,this._changeDetectorRef.markForCheck())}ngAfterContentInit(){this._subscribeToAllTabChanges(),this._subscribeToTabLabels(),this._tabsSubscription=this._tabs.changes.subscribe(()=>{if(this._clampTabIndex(this._indexToSelect)===this._selectedIndex){const t=this._tabs.toArray();for(let e=0;e<t.length;e++)if(t[e].isActive){this._indexToSelect=this._selectedIndex=e;break}}this._changeDetectorRef.markForCheck()})}_subscribeToAllTabChanges(){this._allTabs.changes.pipe(Object(Et.a)(this._allTabs)).subscribe(t=>{this._tabs.reset(t.filter(t=>t._closestTabGroup===this)),this._tabs.notifyOnChanges()})}ngOnDestroy(){this._tabs.destroy(),this._tabsSubscription.unsubscribe(),this._tabLabelSubscription.unsubscribe()}realignInkBar(){this._tabHeader&&this._tabHeader._alignInkBarToSelectedTab()}_focusChanged(t){this.focusChange.emit(this._createChangeEvent(t))}_createChangeEvent(t){const e=new de;return e.index=t,this._tabs&&this._tabs.length&&(e.tab=this._tabs.toArray()[t]),e}_subscribeToTabLabels(){this._tabLabelSubscription&&this._tabLabelSubscription.unsubscribe(),this._tabLabelSubscription=Object(C.a)(...this._tabs.map(t=>t._stateChanges)).subscribe(()=>this._changeDetectorRef.markForCheck())}_clampTabIndex(t){return Math.min(this._tabs.length-1,Math.max(t||0,0))}_getTabLabelId(t){return`mat-tab-label-${this._groupId}-${t}`}_getTabContentId(t){return`mat-tab-content-${this._groupId}-${t}`}_setTabBodyWrapperHeight(t){if(!this._dynamicHeight||!this._tabBodyWrapperHeight)return;const e=this._tabBodyWrapper.nativeElement;e.style.height=this._tabBodyWrapperHeight+"px",this._tabBodyWrapper.nativeElement.offsetHeight&&(e.style.height=t+"px")}_removeTabBodyWrapperHeight(){const t=this._tabBodyWrapper.nativeElement;this._tabBodyWrapperHeight=t.clientHeight,t.style.height="",this.animationDone.emit()}_handleClick(t,e,n){t.disabled||(this.selectedIndex=e.focusIndex=n)}_getTabIndex(t,e){return t.disabled?null:this.selectedIndex===e?0:-1}_tabFocusChanged(t,e){t&&(this._tabHeader.focusIndex=e)}}return t.\u0275fac=function(e){return new(e||t)(o.Mb(o.l),o.Mb(o.h),o.Mb(le,8),o.Mb(c.a,8))},t.\u0275dir=o.Hb({type:t,inputs:{headerPosition:"headerPosition",animationDuration:"animationDuration",disablePagination:"disablePagination",dynamicHeight:"dynamicHeight",selectedIndex:"selectedIndex",backgroundColor:"backgroundColor"},outputs:{selectedIndexChange:"selectedIndexChange",focusChange:"focusChange",animationDone:"animationDone",selectedTabChange:"selectedTabChange"},features:[o.yb]}),t})(),ge=(()=>{class t extends be{constructor(t,e,n,i){super(t,e,n,i)}}return t.\u0275fac=function(e){return new(e||t)(o.Mb(o.l),o.Mb(o.h),o.Mb(le,8),o.Mb(c.a,8))},t.\u0275cmp=o.Gb({type:t,selectors:[["mat-tab-group"]],contentQueries:function(t,e,n){if(1&t&&o.Fb(n,re,1),2&t){let t;o.nc(t=o.ac())&&(e._allTabs=t)}},viewQuery:function(t,e){if(1&t&&(o.Ec(Nt,1),o.Ec($t,1)),2&t){let t;o.nc(t=o.ac())&&(e._tabBodyWrapper=t.first),o.nc(t=o.ac())&&(e._tabHeader=t.first)}},hostAttrs:[1,"mat-tab-group"],hostVars:4,hostBindings:function(t,e){2&t&&o.Eb("mat-tab-group-dynamic-height",e.dynamicHeight)("mat-tab-group-inverted-header","below"===e.headerPosition)},inputs:{color:"color",disableRipple:"disableRipple"},exportAs:["matTabGroup"],features:[o.Ab([{provide:ie,useExisting:t}]),o.yb],decls:6,vars:7,consts:[[3,"selectedIndex","disableRipple","disablePagination","indexFocused","selectFocusedIndex"],["tabHeader",""],["class","mat-tab-label mat-focus-indicator","role","tab","matTabLabelWrapper","","mat-ripple","","cdkMonitorElementFocus","",3,"id","mat-tab-label-active","disabled","matRippleDisabled","click","cdkFocusChange",4,"ngFor","ngForOf"],[1,"mat-tab-body-wrapper"],["tabBodyWrapper",""],["role","tabpanel",3,"id","mat-tab-body-active","content","position","origin","animationDuration","_onCentered","_onCentering",4,"ngFor","ngForOf"],["role","tab","matTabLabelWrapper","","mat-ripple","","cdkMonitorElementFocus","",1,"mat-tab-label","mat-focus-indicator",3,"id","disabled","matRippleDisabled","click","cdkFocusChange"],[1,"mat-tab-label-content"],[3,"ngIf"],[3,"cdkPortalOutlet"],["role","tabpanel",3,"id","content","position","origin","animationDuration","_onCentered","_onCentering"]],template:function(t,e){1&t&&(o.Sb(0,"mat-tab-header",0,1),o.Zb("indexFocused",function(t){return e._focusChanged(t)})("selectFocusedIndex",function(t){return e.selectedIndex=t}),o.yc(2,Zt,4,14,"div",2),o.Rb(),o.Sb(3,"div",3,4),o.yc(5,Gt,1,8,"mat-tab-body",5),o.Rb()),2&t&&(o.jc("selectedIndex",e.selectedIndex||0)("disableRipple",e.disableRipple)("disablePagination",e.disablePagination),o.Bb(2),o.jc("ngForOf",e._tabs),o.Bb(1),o.Eb("_mat-animation-noopable","NoopAnimations"===e._animationMode),o.Bb(2),o.jc("ngForOf",e._tabs))},directives:function(){return[Ce,r.k,_e,l.l,v.e,r.l,i.c,ce]},styles:[".mat-tab-group{display:flex;flex-direction:column}.mat-tab-group.mat-tab-group-inverted-header{flex-direction:column-reverse}.mat-tab-label{height:48px;padding:0 24px;cursor:pointer;box-sizing:border-box;opacity:.6;min-width:160px;text-align:center;display:inline-flex;justify-content:center;align-items:center;white-space:nowrap;position:relative}.mat-tab-label:focus{outline:none}.mat-tab-label:focus:not(.mat-tab-disabled){opacity:1}.cdk-high-contrast-active .mat-tab-label:focus{outline:dotted 2px;outline-offset:-2px}.mat-tab-label.mat-tab-disabled{cursor:default}.cdk-high-contrast-active .mat-tab-label.mat-tab-disabled{opacity:.5}.mat-tab-label .mat-tab-label-content{display:inline-flex;justify-content:center;align-items:center;white-space:nowrap}.cdk-high-contrast-active .mat-tab-label{opacity:1}@media(max-width: 599px){.mat-tab-label{padding:0 12px}}@media(max-width: 959px){.mat-tab-label{padding:0 12px}}.mat-tab-group[mat-stretch-tabs]>.mat-tab-header .mat-tab-label{flex-basis:0;flex-grow:1}.mat-tab-body-wrapper{position:relative;overflow:hidden;display:flex;transition:height 500ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable.mat-tab-body-wrapper{transition:none;animation:none}.mat-tab-body{top:0;left:0;right:0;bottom:0;position:absolute;display:block;overflow:hidden;flex-basis:100%}.mat-tab-body.mat-tab-body-active{position:relative;overflow-x:hidden;overflow-y:auto;z-index:1;flex-grow:1}.mat-tab-group.mat-tab-group-dynamic-height .mat-tab-body.mat-tab-body-active{overflow-y:hidden}\n"],encapsulation:2}),t})();class fe{}const me=Object(l.s)(fe);let _e=(()=>{class t extends me{constructor(t){super(),this.elementRef=t}focus(){this.elementRef.nativeElement.focus()}getOffsetLeft(){return this.elementRef.nativeElement.offsetLeft}getOffsetWidth(){return this.elementRef.nativeElement.offsetWidth}}return t.\u0275fac=function(e){return new(e||t)(o.Mb(o.l))},t.\u0275dir=o.Hb({type:t,selectors:[["","matTabLabelWrapper",""]],hostVars:3,hostBindings:function(t,e){2&t&&(o.Cb("aria-disabled",!!e.disabled),o.Eb("mat-tab-disabled",e.disabled))},inputs:{disabled:"disabled"},features:[o.yb]}),t})();const ve=Object(Tt.f)({passive:!0});let ye=(()=>{class t{constructor(t,e,n,i,r,a,s){this._elementRef=t,this._changeDetectorRef=e,this._viewportRuler=n,this._dir=i,this._ngZone=r,this._platform=a,this._animationMode=s,this._scrollDistance=0,this._selectedIndexChanged=!1,this._destroyed=new x.a,this._showPaginationControls=!1,this._disableScrollAfter=!0,this._disableScrollBefore=!0,this._stopScrolling=new x.a,this.disablePagination=!1,this._selectedIndex=0,this.selectFocusedIndex=new o.n,this.indexFocused=new o.n,r.runOutsideAngular(()=>{Object(Rt.a)(t.nativeElement,"mouseleave").pipe(Object(S.a)(this._destroyed)).subscribe(()=>{this._stopInterval()})})}get selectedIndex(){return this._selectedIndex}set selectedIndex(t){t=Object(_.e)(t),this._selectedIndex!=t&&(this._selectedIndexChanged=!0,this._selectedIndex=t,this._keyManager&&this._keyManager.updateActiveItem(t))}ngAfterViewInit(){Object(Rt.a)(this._previousPaginator.nativeElement,"touchstart",ve).pipe(Object(S.a)(this._destroyed)).subscribe(()=>{this._handlePaginatorPress("before")}),Object(Rt.a)(this._nextPaginator.nativeElement,"touchstart",ve).pipe(Object(S.a)(this._destroyed)).subscribe(()=>{this._handlePaginatorPress("after")})}ngAfterContentInit(){const t=this._dir?this._dir.change:Object(k.a)(null),e=this._viewportRuler.change(150),n=()=>{this.updatePagination(),this._alignInkBarToSelectedTab()};this._keyManager=new v.g(this._items).withHorizontalOrientation(this._getLayoutDirection()).withHomeAndEnd().withWrap(),this._keyManager.updateActiveItem(this._selectedIndex),"undefined"!=typeof requestAnimationFrame?requestAnimationFrame(n):n(),Object(C.a)(t,e,this._items.changes).pipe(Object(S.a)(this._destroyed)).subscribe(()=>{this._ngZone.run(()=>Promise.resolve().then(n)),this._keyManager.withHorizontalOrientation(this._getLayoutDirection())}),this._keyManager.change.pipe(Object(S.a)(this._destroyed)).subscribe(t=>{this.indexFocused.emit(t),this._setTabFocus(t)})}ngAfterContentChecked(){this._tabLabelCount!=this._items.length&&(this.updatePagination(),this._tabLabelCount=this._items.length,this._changeDetectorRef.markForCheck()),this._selectedIndexChanged&&(this._scrollToLabel(this._selectedIndex),this._checkScrollingControls(),this._alignInkBarToSelectedTab(),this._selectedIndexChanged=!1,this._changeDetectorRef.markForCheck()),this._scrollDistanceChanged&&(this._updateTabScrollPosition(),this._scrollDistanceChanged=!1,this._changeDetectorRef.markForCheck())}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete(),this._stopScrolling.complete()}_handleKeydown(t){if(!Object(P.r)(t))switch(t.keyCode){case P.e:case P.m:this.focusIndex!==this.selectedIndex&&(this.selectFocusedIndex.emit(this.focusIndex),this._itemSelected(t));break;default:this._keyManager.onKeydown(t)}}_onContentChanges(){const t=this._elementRef.nativeElement.textContent;t!==this._currentTextContent&&(this._currentTextContent=t||"",this._ngZone.run(()=>{this.updatePagination(),this._alignInkBarToSelectedTab(),this._changeDetectorRef.markForCheck()}))}updatePagination(){this._checkPaginationEnabled(),this._checkScrollingControls(),this._updateTabScrollPosition()}get focusIndex(){return this._keyManager?this._keyManager.activeItemIndex:0}set focusIndex(t){this._isValidIndex(t)&&this.focusIndex!==t&&this._keyManager&&this._keyManager.setActiveItem(t)}_isValidIndex(t){if(!this._items)return!0;const e=this._items?this._items.toArray()[t]:null;return!!e&&!e.disabled}_setTabFocus(t){if(this._showPaginationControls&&this._scrollToLabel(t),this._items&&this._items.length){this._items.toArray()[t].focus();const e=this._tabListContainer.nativeElement,n=this._getLayoutDirection();e.scrollLeft="ltr"==n?0:e.scrollWidth-e.offsetWidth}}_getLayoutDirection(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}_updateTabScrollPosition(){if(this.disablePagination)return;const t=this.scrollDistance,e="ltr"===this._getLayoutDirection()?-t:t;this._tabList.nativeElement.style.transform=`translateX(${Math.round(e)}px)`,(this._platform.TRIDENT||this._platform.EDGE)&&(this._tabListContainer.nativeElement.scrollLeft=0)}get scrollDistance(){return this._scrollDistance}set scrollDistance(t){this._scrollTo(t)}_scrollHeader(t){return this._scrollTo(this._scrollDistance+("before"==t?-1:1)*this._tabListContainer.nativeElement.offsetWidth/3)}_handlePaginatorClick(t){this._stopInterval(),this._scrollHeader(t)}_scrollToLabel(t){if(this.disablePagination)return;const e=this._items?this._items.toArray()[t]:null;if(!e)return;const n=this._tabListContainer.nativeElement.offsetWidth,{offsetLeft:i,offsetWidth:r}=e.elementRef.nativeElement;let o,a;"ltr"==this._getLayoutDirection()?(o=i,a=o+r):(a=this._tabList.nativeElement.offsetWidth-i,o=a-r);const s=this.scrollDistance,c=this.scrollDistance+n;o<s?this.scrollDistance-=s-o+60:a>c&&(this.scrollDistance+=a-c+60)}_checkPaginationEnabled(){if(this.disablePagination)this._showPaginationControls=!1;else{const t=this._tabList.nativeElement.scrollWidth>this._elementRef.nativeElement.offsetWidth;t||(this.scrollDistance=0),t!==this._showPaginationControls&&this._changeDetectorRef.markForCheck(),this._showPaginationControls=t}}_checkScrollingControls(){this.disablePagination?this._disableScrollAfter=this._disableScrollBefore=!0:(this._disableScrollBefore=0==this.scrollDistance,this._disableScrollAfter=this.scrollDistance==this._getMaxScrollDistance(),this._changeDetectorRef.markForCheck())}_getMaxScrollDistance(){return this._tabList.nativeElement.scrollWidth-this._tabListContainer.nativeElement.offsetWidth||0}_alignInkBarToSelectedTab(){const t=this._items&&this._items.length?this._items.toArray()[this.selectedIndex]:null,e=t?t.elementRef.nativeElement:null;e?this._inkBar.alignToElement(e):this._inkBar.hide()}_stopInterval(){this._stopScrolling.next()}_handlePaginatorPress(t,e){e&&null!=e.button&&0!==e.button||(this._stopInterval(),Object(Pt.a)(650,100).pipe(Object(S.a)(Object(C.a)(this._stopScrolling,this._destroyed))).subscribe(()=>{const{maxScrollDistance:e,distance:n}=this._scrollHeader(t);(0===n||n>=e)&&this._stopInterval()}))}_scrollTo(t){if(this.disablePagination)return{maxScrollDistance:0,distance:0};const e=this._getMaxScrollDistance();return this._scrollDistance=Math.max(0,Math.min(e,t)),this._scrollDistanceChanged=!0,this._checkScrollingControls(),{maxScrollDistance:e,distance:this._scrollDistance}}}return t.\u0275fac=function(e){return new(e||t)(o.Mb(o.l),o.Mb(o.h),o.Mb(It.d),o.Mb(I.b,8),o.Mb(o.A),o.Mb(Tt.a),o.Mb(c.a,8))},t.\u0275dir=o.Hb({type:t,inputs:{disablePagination:"disablePagination"}}),t})(),xe=(()=>{class t extends ye{constructor(t,e,n,i,r,o,a){super(t,e,n,i,r,o,a),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=Object(_.b)(t)}_itemSelected(t){t.preventDefault()}}return t.\u0275fac=function(e){return new(e||t)(o.Mb(o.l),o.Mb(o.h),o.Mb(It.d),o.Mb(I.b,8),o.Mb(o.A),o.Mb(Tt.a),o.Mb(c.a,8))},t.\u0275dir=o.Hb({type:t,inputs:{disableRipple:"disableRipple"},features:[o.yb]}),t})(),Ce=(()=>{class t extends xe{constructor(t,e,n,i,r,o,a){super(t,e,n,i,r,o,a)}}return t.\u0275fac=function(e){return new(e||t)(o.Mb(o.l),o.Mb(o.h),o.Mb(It.d),o.Mb(I.b,8),o.Mb(o.A),o.Mb(Tt.a),o.Mb(c.a,8))},t.\u0275cmp=o.Gb({type:t,selectors:[["mat-tab-header"]],contentQueries:function(t,e,n){if(1&t&&o.Fb(n,_e,0),2&t){let t;o.nc(t=o.ac())&&(e._items=t)}},viewQuery:function(t,e){if(1&t&&(o.Ec(Yt,3),o.Ec(Wt,3),o.Ec(Ut,3),o.Ec(Kt,1),o.Ec(Xt,1)),2&t){let t;o.nc(t=o.ac())&&(e._inkBar=t.first),o.nc(t=o.ac())&&(e._tabListContainer=t.first),o.nc(t=o.ac())&&(e._tabList=t.first),o.nc(t=o.ac())&&(e._nextPaginator=t.first),o.nc(t=o.ac())&&(e._previousPaginator=t.first)}},hostAttrs:[1,"mat-tab-header"],hostVars:4,hostBindings:function(t,e){2&t&&o.Eb("mat-tab-header-pagination-controls-enabled",e._showPaginationControls)("mat-tab-header-rtl","rtl"==e._getLayoutDirection())},inputs:{selectedIndex:"selectedIndex"},outputs:{selectFocusedIndex:"selectFocusedIndex",indexFocused:"indexFocused"},features:[o.yb],ngContentSelectors:Bt,decls:13,vars:8,consts:[["aria-hidden","true","mat-ripple","",1,"mat-tab-header-pagination","mat-tab-header-pagination-before","mat-elevation-z4",3,"matRippleDisabled","click","mousedown","touchend"],["previousPaginator",""],[1,"mat-tab-header-pagination-chevron"],[1,"mat-tab-label-container",3,"keydown"],["tabListContainer",""],["role","tablist",1,"mat-tab-list",3,"cdkObserveContent"],["tabList",""],[1,"mat-tab-labels"],["aria-hidden","true","mat-ripple","",1,"mat-tab-header-pagination","mat-tab-header-pagination-after","mat-elevation-z4",3,"matRippleDisabled","mousedown","click","touchend"],["nextPaginator",""]],template:function(t,e){1&t&&(o.ic(),o.Sb(0,"div",0,1),o.Zb("click",function(){return e._handlePaginatorClick("before")})("mousedown",function(t){return e._handlePaginatorPress("before",t)})("touchend",function(){return e._stopInterval()}),o.Nb(2,"div",2),o.Rb(),o.Sb(3,"div",3,4),o.Zb("keydown",function(t){return e._handleKeydown(t)}),o.Sb(5,"div",5,6),o.Zb("cdkObserveContent",function(){return e._onContentChanges()}),o.Sb(7,"div",7),o.hc(8),o.Rb(),o.Nb(9,"mat-ink-bar"),o.Rb(),o.Rb(),o.Sb(10,"div",8,9),o.Zb("mousedown",function(t){return e._handlePaginatorPress("after",t)})("click",function(){return e._handlePaginatorClick("after")})("touchend",function(){return e._stopInterval()}),o.Nb(12,"div",2),o.Rb()),2&t&&(o.Eb("mat-tab-header-pagination-disabled",e._disableScrollBefore),o.jc("matRippleDisabled",e._disableScrollBefore||e.disableRipple),o.Bb(5),o.Eb("_mat-animation-noopable","NoopAnimations"===e._animationMode),o.Bb(5),o.Eb("mat-tab-header-pagination-disabled",e._disableScrollAfter),o.jc("matRippleDisabled",e._disableScrollAfter||e.disableRipple))},directives:[l.l,At.a,Yt],styles:['.mat-tab-header{display:flex;overflow:hidden;position:relative;flex-shrink:0}.mat-tab-header-pagination{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;position:relative;display:none;justify-content:center;align-items:center;min-width:32px;cursor:pointer;z-index:2;-webkit-tap-highlight-color:transparent;touch-action:none}.mat-tab-header-pagination-controls-enabled .mat-tab-header-pagination{display:flex}.mat-tab-header-pagination-before,.mat-tab-header-rtl .mat-tab-header-pagination-after{padding-left:4px}.mat-tab-header-pagination-before .mat-tab-header-pagination-chevron,.mat-tab-header-rtl .mat-tab-header-pagination-after .mat-tab-header-pagination-chevron{transform:rotate(-135deg)}.mat-tab-header-rtl .mat-tab-header-pagination-before,.mat-tab-header-pagination-after{padding-right:4px}.mat-tab-header-rtl .mat-tab-header-pagination-before .mat-tab-header-pagination-chevron,.mat-tab-header-pagination-after .mat-tab-header-pagination-chevron{transform:rotate(45deg)}.mat-tab-header-pagination-chevron{border-style:solid;border-width:2px 2px 0 0;content:"";height:8px;width:8px}.mat-tab-header-pagination-disabled{box-shadow:none;cursor:default}.mat-tab-list{flex-grow:1;position:relative;transition:transform 500ms cubic-bezier(0.35, 0, 0.25, 1)}.mat-ink-bar{position:absolute;bottom:0;height:2px;transition:500ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable.mat-ink-bar{transition:none;animation:none}.mat-tab-group-inverted-header .mat-ink-bar{bottom:auto;top:0}.cdk-high-contrast-active .mat-ink-bar{outline:solid 2px;height:0}.mat-tab-labels{display:flex}[mat-align-tabs=center]>.mat-tab-header .mat-tab-labels{justify-content:center}[mat-align-tabs=end]>.mat-tab-header .mat-tab-labels{justify-content:flex-end}.mat-tab-label-container{display:flex;flex-grow:1;overflow:hidden;z-index:1}._mat-animation-noopable.mat-tab-list{transition:none;animation:none}.mat-tab-label{height:48px;padding:0 24px;cursor:pointer;box-sizing:border-box;opacity:.6;min-width:160px;text-align:center;display:inline-flex;justify-content:center;align-items:center;white-space:nowrap;position:relative}.mat-tab-label:focus{outline:none}.mat-tab-label:focus:not(.mat-tab-disabled){opacity:1}.cdk-high-contrast-active .mat-tab-label:focus{outline:dotted 2px;outline-offset:-2px}.mat-tab-label.mat-tab-disabled{cursor:default}.cdk-high-contrast-active .mat-tab-label.mat-tab-disabled{opacity:.5}.mat-tab-label .mat-tab-label-content{display:inline-flex;justify-content:center;align-items:center;white-space:nowrap}.cdk-high-contrast-active .mat-tab-label{opacity:1}@media(max-width: 599px){.mat-tab-label{min-width:72px}}\n'],encapsulation:2}),t})(),we=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.Kb({type:t}),t.\u0275inj=o.Jb({imports:[[r.c,l.g,i.f,l.m,At.c,v.a],l.g]}),t})();var ke=n("CzEO"),Se=n("kzlf"),Oe=n.n(Se),Me=n("X607"),Ae=n.n(Me),Re=n("PCNd");const Pe=Oe.a.import("blots/inline");let je=(()=>{class t extends Pe{static create(t){const e=super.create();return t.uuid&&e.setAttribute("data-comment-uuid",t.uuid),t.message&&e.setAttribute("data-comment-message",t.message),e}static formats(t){const e={},n=t.getAttribute("data-comment-uuid");n&&(e.uuid=n);const i=t.getAttribute("data-comment-message");return i&&(e.message=i),e}format(t,e){"comment"===t?e?(e.uuid?this.domNode.setAttribute("data-comment-uuid",e.uuid):this.domNode.removeAttribute("data-comment-uuid"),e.message?this.domNode.setAttribute("data-comment-message",e.message):this.domNode.removeAttribute("data-comment-message")):(this.domNode.removeAttribute("data-comment-uuid"),this.domNode.removeAttribute("data-comment-message")):super.format(t,e)}}return t.blotName="comment",t.tagName="span",t})(),Ee=(()=>{class t extends Pe{static create(t){const e=super.create();return t.uuid&&e.setAttribute("data-lint-uuid",t.uuid),t.message&&e.setAttribute("data-lint-message",t.message),e}static formats(t){const e={},n=t.getAttribute("data-lint-uuid");n&&(e.uuid=n);const i=t.getAttribute("data-lint-message");return i&&(e.message=i),e}format(t,e){"lint"===t?e?(e.uuid?this.domNode.setAttribute("data-lint-uuid",e.uuid):this.domNode.removeAttribute("data-lint-uuid"),e.message?this.domNode.setAttribute("data-lint-message",e.message):this.domNode.removeAttribute("data-lint-message")):(this.domNode.removeAttribute("data-lint-uuid"),this.domNode.removeAttribute("data-lint-message")):super.format(t,e)}}return t.blotName="lint",t.tagName="span",t})();var Te=n("tyNb");let Ie=(()=>{class t{canDeactivate(t,e,n,i){return t.canDeactivate?t.canDeactivate():window.confirm("Are you sure you want to leave this page")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=o.Ib({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var Le=n("2Vo4"),Be=n("tk/3");let Fe=(()=>{class t{constructor(t){this.http=t}getScripts(t=0,e=10){return this.http.get(`api/v1/scripts?pageIndex=${t}&pageSize=${e}`)}deleteScripts(t){const e=t.map(t=>`id[]=${t}`).join("&");return this.http.delete(`api/v1/scripts?${e}`)}}return t.\u0275fac=function(e){return new(e||t)(o.Wb(Be.b))},t.\u0275prov=o.Ib({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function De(t,e){if(1&t){const t=o.Tb();o.Sb(0,"li",6),o.Sb(1,"input",7),o.Zb("change",function(n){o.rc(t);const i=e.$implicit;return o.dc().checkScript(n,i.id)}),o.Rb(),o.Sb(2,"div",8),o.Sb(3,"a",9),o.Ac(4),o.Rb(),o.Sb(5,"div",10),o.Ac(6),o.Rb(),o.Sb(7,"div",11),o.Sb(8,"div",12),o.Ac(9),o.ec(10,"date"),o.Rb(),o.Sb(11,"div",12),o.Ac(12),o.ec(13,"date"),o.Rb(),o.Rb(),o.Rb(),o.Rb()}if(2&t){const t=e.$implicit,n=o.dc();o.Bb(1),o.jc("value",n.deleteScriptIds.includes(t.id)),o.Bb(2),o.jc("routerLink",t.id.toString()),o.Bb(1),o.Cc(" ",t.title," "),o.Bb(2),o.Cc(" author: ",null==t.author?null:t.author.name," "),o.Bb(3),o.Cc(" created: ",o.gc(10,6,t.created,"short")," "),o.Bb(3),o.Cc(" updated: ",o.gc(13,9,t.updated,"short")," ")}}let ze=(()=>{class t{constructor(t,e,n,i){this.scriptListService=t,this.cd=e,this.router=n,this.route=i,this.scripts$=new Le.a([]),this.deleteScriptIds=[],this.pageSizeOptions=[10,30,60],this.unsubscriber$=new x.a}ngOnInit(){this.scriptListService.getScripts().pipe(Object(S.a)(this.unsubscriber$)).subscribe(t=>{this.scripts$.next(t.data),this.count=t.count,this.pageIndex=t.pageIndex,this.pageSize=t.pageSize,this.cd.markForCheck()})}ngOnDestroy(){this.unsubscriber$.next()}checkScript(t,e){t.target.checked?this.deleteScriptIds.push(e):this.deleteScriptIds=this.deleteScriptIds.filter(t=>t!==e)}newScript(){this.router.navigate(["new"],{relativeTo:this.route})}deleteScripts(){0!==this.deleteScriptIds.length&&this.scriptListService.deleteScripts(this.deleteScriptIds).pipe(Object(S.a)(this.unsubscriber$)).subscribe(()=>{const t=this.scripts$.getValue().filter(t=>!this.deleteScriptIds.includes(t.id));this.scripts$.next(t),this.deleteScriptIds=[],this.cd.markForCheck()})}handlePageEvent(t){this.scriptListService.getScripts(t.pageIndex,t.pageSize).pipe(Object(S.a)(this.unsubscriber$)).subscribe(t=>{this.scripts$.next(t.data),this.count=t.count,this.pageIndex=t.pageIndex,this.pageSize=t.pageSize,this.cd.markForCheck()})}}return t.\u0275fac=function(e){return new(e||t)(o.Mb(Fe),o.Mb(o.h),o.Mb(Te.b),o.Mb(Te.a))},t.\u0275cmp=o.Gb({type:t,selectors:[["app-script-list"]],decls:10,vars:8,consts:[[1,"wrapper"],["aria-label","Select page",3,"length","pageSize","showFirstLastButtons","pageSizeOptions","pageIndex","page"],[1,"list"],["class","list-detail",4,"ngFor","ngForOf"],[1,"buttons"],["mat-stroked-button","","color","primary",3,"click"],[1,"list-detail"],["type","checkbox",1,"list-detail__checkbox",3,"value","change"],[1,"list-detail__body"],[1,"list-detail__body-title",3,"routerLink"],[1,"list-detail__body-author"],[1,"list-detail__body-sub"],[1,"list-detail__body-sub-date"]],template:function(t,e){1&t&&(o.Sb(0,"div",0),o.Sb(1,"mat-paginator",1),o.Zb("page",function(t){return e.handlePageEvent(t)}),o.Rb(),o.Sb(2,"ul",2),o.yc(3,De,14,12,"li",3),o.ec(4,"async"),o.Rb(),o.Sb(5,"div",4),o.Sb(6,"button",5),o.Zb("click",function(){return e.newScript()}),o.Ac(7," new script "),o.Rb(),o.Sb(8,"button",5),o.Zb("click",function(){return e.deleteScripts()}),o.Ac(9," delete "),o.Rb(),o.Rb(),o.Rb()),2&t&&(o.Bb(1),o.jc("length",e.count)("pageSize",e.pageSize)("showFirstLastButtons",!0)("pageSizeOptions",e.pageSizeOptions)("pageIndex",e.pageIndex),o.Bb(2),o.jc("ngForOf",o.fc(4,6,e.scripts$)))},directives:[kt.a,r.k,s.a,Te.c],pipes:[r.b,r.e],styles:[".cdk-global-overlay-wrapper[_ngcontent-%COMP%], .cdk-overlay-container[_ngcontent-%COMP%]{pointer-events:none;top:0;left:0;height:100%;width:100%}.cdk-overlay-container[_ngcontent-%COMP%]{position:fixed;z-index:1000}.cdk-overlay-container[_ngcontent-%COMP%]:empty{display:none}.cdk-global-overlay-wrapper[_ngcontent-%COMP%], .cdk-overlay-pane[_ngcontent-%COMP%]{display:flex;position:absolute;z-index:1000}.cdk-overlay-pane[_ngcontent-%COMP%]{pointer-events:auto;box-sizing:border-box;max-width:100%;max-height:100%}.cdk-overlay-backdrop[_ngcontent-%COMP%]{position:absolute;top:0;bottom:0;left:0;right:0;z-index:1000;pointer-events:auto;-webkit-tap-highlight-color:transparent;transition:opacity .4s cubic-bezier(.25,.8,.25,1);opacity:0}.cdk-overlay-backdrop.cdk-overlay-backdrop-showing[_ngcontent-%COMP%]{opacity:1}.cdk-high-contrast-active[_ngcontent-%COMP%]   .cdk-overlay-backdrop.cdk-overlay-backdrop-showing[_ngcontent-%COMP%]{opacity:.6}.cdk-overlay-dark-backdrop[_ngcontent-%COMP%]{background:rgba(0,0,0,.32)}.cdk-overlay-transparent-backdrop[_ngcontent-%COMP%], .cdk-overlay-transparent-backdrop.cdk-overlay-backdrop-showing[_ngcontent-%COMP%]{opacity:0}.cdk-overlay-connected-position-bounding-box[_ngcontent-%COMP%]{position:absolute;z-index:1000;display:flex;flex-direction:column;min-width:1px;min-height:1px}.cdk-global-scrollblock[_ngcontent-%COMP%]{position:fixed;width:100%;overflow-y:scroll}body[_ngcontent-%COMP%], html[_ngcontent-%COMP%]{height:100%}body[_ngcontent-%COMP%]{margin:0;font-family:Roboto,Helvetica Neue,sans-serif}body.dark-theme[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff}body.dark-theme[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#607d8b}.wrapper[_ngcontent-%COMP%]{width:100%;max-width:1080px;padding:0 30px;margin:20px auto 0}.wrapper[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]{list-style-type:none;padding-left:5px}.wrapper[_ngcontent-%COMP%]   .list-detail[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:5px;border-bottom:1px solid}.wrapper[_ngcontent-%COMP%]   .list-detail__checkbox[_ngcontent-%COMP%]{display:block}.wrapper[_ngcontent-%COMP%]   .list-detail__body[_ngcontent-%COMP%]{width:100%;margin-left:20px;display:flex}.wrapper[_ngcontent-%COMP%]   .list-detail__body-status[_ngcontent-%COMP%]{width:50px;margin-right:10px}.wrapper[_ngcontent-%COMP%]   .list-detail__body-title[_ngcontent-%COMP%]{display:block;width:150px;overflow-x:hidden}.wrapper[_ngcontent-%COMP%]   .list-detail__body-author[_ngcontent-%COMP%]{margin-left:20px}.wrapper[_ngcontent-%COMP%]   .list-detail__body-sub[_ngcontent-%COMP%]{margin-left:auto;display:flex}.wrapper[_ngcontent-%COMP%]   .list-detail__body-sub-date[_ngcontent-%COMP%]{width:200px;margin-right:20px}.wrapper[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100px;margin-right:20px}"],changeDetection:0}),t})();var Ne=n("mrSG"),$e=n("LvDl"),He=n("jtHE"),qe=n("5+tZ"),Ve=n("SxV6"),Ze=n("zP0r"),Ge=n("2Xbf"),We=n("KT39"),Ue=n("3UWI"),Ke=n("lJxs"),Xe=n("7Cbv"),Qe=n("Ptse"),Ye=n("dCgF");n("8kjx");const Je=(t,e,n,i,r)=>{try{if(e&&e.cursor&&n!==i.clientID){const o=e.user||{},a=o.color||"#ffa500",s=o.name||`User: ${n}`;t.createCursor(n.toString(),s,a);const c=Ye.e(Ye.f(e.cursor.anchor),i),l=Ye.e(Ye.f(e.cursor.head),i);c&&l&&c.type===r&&t.moveCursor(n.toString(),{index:c.index,length:l.index-c.index})}else t.removeCursor(n.toString())}catch(o){console.error(o)}};class tn{constructor(t,e,n){const i=Object(Qe.a)(),r=t.doc;this.mux=i,this.type=t,this.doc=r,this.quill=e;const o=e.getModule("cursors")||null;this.quillCursors=o,this._negatedUsedFormats={},this.awareness=n,this._awarenessChange=({added:e,removed:i,updated:a})=>{const s=n.getStates();e.forEach(e=>{Je(o,s.get(e),e,r,t)}),a.forEach(e=>{Je(o,s.get(e),e,r,t)}),i.forEach(t=>{o.removeCursor(t.toString())})},this._typeObserver=t=>{i(()=>{const n=t.delta,i=[];for(let t=0;t<n.length;t++){const e=n[t];i.push(void 0!==e.insert?Object.assign({},e,{attributes:Object.assign({},this._negatedUsedFormats,e.attributes||{})}):e)}e.updateContents(i,"yjs")})},t.observe(this._typeObserver),this._quillObserver=(a,s)=>{if(s&&s.ops){const e=s.ops;e.forEach(t=>{if(void 0!==t.attributes)for(let e in t.attributes)void 0===this._negatedUsedFormats[e]&&(this._negatedUsedFormats[e]=!1)}),i(()=>{t.applyDelta(e)})}if(n&&o){const i=e.getSelection(),a=n.getLocalState();if(null===i)null!==n.getLocalState()&&n.setLocalStateField("cursor",null);else{const e=Ye.g(t,i.index),r=Ye.g(t,i.index+i.length);a&&a.cursor&&Ye.d(e,a.cursor.anchor)&&Ye.d(r,a.cursor.head)||n.setLocalStateField("cursor",{anchor:e,head:r})}n.getStates().forEach((e,n)=>{Je(o,e,n,r,t)})}},e.on("editor-change",this._quillObserver),i(()=>{e.setContents(t.toDelta())}),null!==o&&n&&(n.getStates().forEach((e,n)=>{Je(o,e,n,r,t)}),n.on("change",this._awarenessChange))}destroy(){this.type.unobserve(this._typeObserver),this.quill.off("editor-change",this._quillObserver),this.awareness&&this.awareness.off("change",this._awarenessChange)}}var en=n("OaWH");let nn=(()=>{class t{constructor(t){this.http=t}constituencyParse(t){return this.http.post("api/v2/constituency-parse",{textBlocks:t})}textLint(t){return this.http.post("api/v1/textlint",{text:t}).pipe(Object(Ke.a)(t=>t[0]))}splitTextByNewline(t){if(t.length<2)return t;let e=t;[/\u300c[^\u300d]*\u300d/g,/\uff08[^\uff09]*\uff09/g,/\([^\)]*\)/g,/\[[^\]]*\]/g,/"[^"]*"/g,/\u201d[^\u201d]*\u201d/g].forEach(t=>{e=e.replace(t,t=>"#".repeat(t.length))});let n="",i=0;return[...Array(e.length-1)].forEach((r,o)=>{"\u3002"===e.charAt(o)&&(n+=t.substring(i,o+1)+"\n",i=o+1)}),n+=t.substring(i),n}getScript(t){return this.http.get(`api/v1/scripts/${t}`).pipe(Object(Ke.a)(t=>new We.a(t)))}putScript(t){return this.http.put(`api/v1/scripts/${t.id}`,{title:t.title,deltaOps:t.deltaOps}).pipe(Object(Ke.a)(t=>new We.a(t)))}postScript(t){return this.http.post("api/v1/scripts",{title:t.title,deltaOps:t.deltaOps}).pipe(Object(Ke.a)(t=>new We.a(t)))}deleteScript(t){return this.http.delete(`api/v1/scripts/${t}`)}}return t.\u0275fac=function(e){return new(e||t)(o.Wb(Be.b))},t.\u0275prov=o.Ib({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var rn=n("ZZLe");const on=Oe.a.import("delta");let an=(()=>{class t{constructor(t,e,n){this.appService=t,this.scriptService=e,this.tokenizeService=n,this.commentSubject$=new x.a,this.focusChatMessage$=new x.a,this.editorFocus$=new x.a,this.initialized$=new He.a(1),this.textChanged$=new x.a,this.wordCounter$=this.initialized$.pipe(Object(Ve.a)(),Object(qe.a)(()=>this.textChanged$),Object(Ue.a)(300),Object(Ke.a)(()=>this.editor.getText().trim().length))}initialize(t,e,n){const i=this.appService.setLoading();this.editor=e,this.ytext=this.appService.ydoc.getText(`script-${t}`),this.undoManager=new Ye.b(this.ytext),this.appService.useWs?(this.binding=new tn(this.ytext,e,this.appService.wsProvider.awareness),this.appService.wsSynced().subscribe(()=>{"\n"!==this.editor.getText()&&void 0!==t||this.editor.setContents(n),this.initialized$.next(),this.appService.resolveLoading(i)})):(this.editor.setContents(n),this.initialized$.next(),this.appService.resolveLoading(i))}onContentChanged(t){this.textChanged$.next()}getText(){return this.editor.getText()}getDelta(){return this.editor.getContents().ops}setDelta(t){const e=this.editor.getContents();e.ops=t,this.editor.setContents(e)}undo(){this.checkInitialized(),this.undoManager.undo()}redo(){this.checkInitialized(),this.undoManager.redo()}reformat(){const t=this.editor.getText();let e=0,n=t.indexOf("\u3002");for(;n>-1;)"\n"!==t.charAt(n+1)&&(this.editor.insertText(n+e+1,"\n"),e+=1),n=t.indexOf("\u3002",n+1)}selectionReformat(){const t=this.editor.getText(),e=this.editor.getSelection();let n=0,i=t.indexOf("\u3002",e.index);for(;i>-1&&i<e.index+e.length;)"\n"!==t.charAt(i+1)&&(this.editor.insertText(i+n+1,"\n"),n+=1),i=t.indexOf("\u3002",i+1)}highlight(t,e="#FFAF7A"){t.forEach(t=>{const n=t.length;let i=this.editor.getText().indexOf(t);for(;i>-1;)this.editor.formatText(i,n,"background-color",e),i=this.editor.getText().indexOf(t,i+1)})}highlightByBaseForm(t,e="#FFAF7A"){const n=this.editor.getText();return this.tokenizeService.tokenize(n).pipe(Object(Ke.a)(n=>{const i=new on;n.forEach(n=>{t.includes(n.base_form)?i.retain(n.surface.length,{"background-color":e}):i.retain(n.surface.length)}),this.editor.updateContents(i)}))}removeHighlight(){const t=this.editor.getContents();t.ops=t.ops.map(t=>{var e;return(null===(e=t.attributes)||void 0===e?void 0:e.background)&&delete t.attributes.background,t}),this.editor.setContents(t)}underline(t){t.forEach(t=>{const e=t.length;let n=this.editor.getText().indexOf(t);for(;n>-1;)this.editor.formatText(n,e,"underline",!0),n=this.editor.getText().indexOf(t,n+1)})}removeUnderline(){const t=this.editor.getContents();t.ops=t.ops.map(t=>{var e;return(null===(e=t.attributes)||void 0===e?void 0:e.underline)&&delete t.attributes.underline,t}),this.editor.setContents(t)}removeStrikes(){const t=this.editor.getContents();t.ops=t.ops.filter(t=>{var e;return!(null===(e=t.attributes)||void 0===e?void 0:e.strike)}),this.editor.setContents(t)}onChangeTextColor(t){this.textColor=t}onChangeBackgroundColor(t){this.backgroundColor=t}onSelectionChange(t){t.range&&(this.selectionRange=t.range)}selectionBold(){const t=this.selectionRange;this.editor.formatText(t.index,t.length,"bold",!0)}selectionColorUp(){const t=this.selectionRange,e=!["#000000","#ffffff"].includes(this.textColor)&&this.textColor;this.editor.formatText(t.index,t.length,"color",e)}selectionBackgroundColorUp(){const t=this.selectionRange;this.editor.formatText(t.index,t.length,"background",this.backgroundColor)}selectionStrike(){const t=this.selectionRange;this.editor.formatText(t.index,t.length,"strike",!0)}selectionComment(){const t=Object(Xe.a)(),e=this.selectionRange;this.editor.formatText(e.index,e.length,"comment",{uuid:t}),this.commentSubject$.next(t)}unselectComment(t){const e=this.editor.getContents();e.ops=e.ops.map(e=>{var n,i;return(null===(i=null===(n=e.attributes)||void 0===n?void 0:n.comment)||void 0===i?void 0:i.uuid)===t&&delete e.attributes.comment,e}),this.editor.setContents(e)}focusChatMessage(t){this.focusChatMessage$.next(t)}initialComments(t){const e=new Map;t.forEach(t=>{e.set(t.uuid,t)});const n=new on,i=this.editor.getContents(),r=this.editor.getText();let o=0;return i.ops.forEach(t=>{var i,a;const s=null===(a=null===(i=t.attributes)||void 0===i?void 0:i.comment)||void 0===a?void 0:a.uuid,c=t.insert.length;if(!s)return n.retain(c),void(o+=c);if(e.has(s)){const i=e.get(s);i.selectedText=i.selectedText||t.insert,n.retain(c,{comment:{uuid:s,message:i.body}})}else{const e=t.attributes;delete e.comment,n.delete(c);const i=r.slice(o,o+c);n.insert(i,e)}o+=c}),this.editor.updateContents(n),t}selectionCommentFocused(t){this.editorFocus$.next({uuid:t,type:"comment"})}selectionCommentText(t){return this.editor.getContents().ops.filter(e=>{var n,i;return(null===(i=null===(n=e.attributes)||void 0===n?void 0:n.comment)||void 0===i?void 0:i.uuid)===t}).map(t=>t.insert).join()}applySelectionCommentMessage(t,e){const n=this.editor.getContents(),i=new on;n.ops.forEach(n=>{var r,o;const a=n.insert.length;(null===(o=null===(r=n.attributes)||void 0===r?void 0:r.comment)||void 0===o?void 0:o.uuid)===t?i.retain(a,{comment:{uuid:t,message:e}}):i.retain(a)}),this.editor.updateContents(i)}applyTextLintResult(t){const e=this.editor.getText().split("\n"),n=new on;let i=0,r=0,o=0;for(;i<e.length&&r<t.messages.length;){const a=t.messages[r],s=e[i],c=o+s.length+1;a.index<o?(a.target=e[i-1].slice(0,10)+"..",r++):o<=a.index&&a.index<c?(a.uuid=Object(Xe.a)(),a.target=s.slice(0,10)+"..",n.retain(s.length+1,{lint:{uuid:a.uuid,message:a.message}}),r++,i++,o+=s.length+1):c<=a.index&&(i++,n.retain(s.length+1),o+=s.length+1)}return this.editor.updateContents(n),t}removeTextLintResult(){const t=this.editor.getContents(),e=this.editor.getText(),n=new on;let i=0;t.ops.forEach(t=>{var r;const o=t.insert.length;if(null===(r=t.attributes)||void 0===r?void 0:r.lint){const r=t.attributes;delete r.lint,n.delete(o);const a=e.slice(i,i+o);n.insert(a,r)}else n.retain(o);i+=o}),this.editor.updateContents(n)}focusTextLintMessage(t){this.editorFocus$.next({uuid:t.uuid,type:"textlint"})}checkInitialized(){if(!this.editor)throw new Error("ytext is not initialized")}}return t.\u0275fac=function(e){return new(e||t)(o.Wb(en.a),o.Wb(nn),o.Wb(rn.a))},t.\u0275prov=o.Ib({token:t,factory:t.\u0275fac}),t})(),sn=(()=>{class t{constructor(t,e){this.cd=t,this.editorService=e,this.display="none"}ngOnInit(){}selectionChange(t){this.selection=window.getSelection();const e=this.selection.getRangeAt(0);if(this.selection.isCollapsed)return this.display="none",void this.cd.markForCheck();const n=e.getBoundingClientRect();this.top=n.top+window.pageYOffset-50+"px",this.left=n.left+"px",this.display="block",this.cd.markForCheck()}clickDocument(t){t.target.closest(".editor__main")||(this.display="none",this.cd.markForCheck())}bold(){this.editorService.selectionBold()}colorUp(){this.editorService.selectionColorUp()}backColor(){this.editorService.selectionBackgroundColorUp()}comment(){this.editorService.selectionComment()}format(){this.editorService.selectionReformat()}strike(){this.editorService.selectionStrike()}}return t.\u0275fac=function(e){return new(e||t)(o.Mb(o.h),o.Mb(an))},t.\u0275cmp=o.Gb({type:t,selectors:[["app-balloon"]],hostVars:6,hostBindings:function(t,e){1&t&&o.Zb("click",function(t){return e.clickDocument(t)},!1,o.qc),2&t&&o.vc("top",e.top)("left",e.left)("display",e.display)},inputs:{darkTheme:"darkTheme"},decls:18,vars:2,consts:[[1,"wrapper"],[1,"svg__icon","item",3,"click"],[1,"item",3,"click"]],template:function(t,e){1&t&&(o.Sb(0,"div",0),o.Sb(1,"div",1),o.Zb("click",function(){return e.bold()}),o.Sb(2,"mat-icon"),o.Ac(3,"format_bold"),o.Rb(),o.Rb(),o.Sb(4,"div",1),o.Zb("click",function(){return e.colorUp()}),o.Sb(5,"mat-icon"),o.Ac(6,"format_color_text"),o.Rb(),o.Rb(),o.Sb(7,"div",1),o.Zb("click",function(){return e.backColor()}),o.Sb(8,"mat-icon"),o.Ac(9,"format_color_fill"),o.Rb(),o.Rb(),o.Sb(10,"div",1),o.Zb("click",function(){return e.strike()}),o.Sb(11,"mat-icon"),o.Ac(12,"strikethrough_s"),o.Rb(),o.Rb(),o.Sb(13,"div",1),o.Zb("click",function(){return e.comment()}),o.Sb(14,"mat-icon"),o.Ac(15,"comment"),o.Rb(),o.Rb(),o.Sb(16,"button",2),o.Zb("click",function(){return e.format()}),o.Ac(17,"format"),o.Rb(),o.Rb()),2&t&&o.Eb("dark-theme",e.darkTheme)},directives:[f.a],styles:[".cdk-global-overlay-wrapper[_ngcontent-%COMP%], .cdk-overlay-container[_ngcontent-%COMP%]{pointer-events:none;top:0;left:0;height:100%;width:100%}.cdk-overlay-container[_ngcontent-%COMP%]{position:fixed;z-index:1000}.cdk-overlay-container[_ngcontent-%COMP%]:empty{display:none}.cdk-global-overlay-wrapper[_ngcontent-%COMP%], .cdk-overlay-pane[_ngcontent-%COMP%]{display:flex;position:absolute;z-index:1000}.cdk-overlay-pane[_ngcontent-%COMP%]{pointer-events:auto;box-sizing:border-box;max-width:100%;max-height:100%}.cdk-overlay-backdrop[_ngcontent-%COMP%]{position:absolute;top:0;bottom:0;left:0;right:0;z-index:1000;pointer-events:auto;-webkit-tap-highlight-color:transparent;transition:opacity .4s cubic-bezier(.25,.8,.25,1);opacity:0}.cdk-overlay-backdrop.cdk-overlay-backdrop-showing[_ngcontent-%COMP%]{opacity:1}.cdk-high-contrast-active[_ngcontent-%COMP%]   .cdk-overlay-backdrop.cdk-overlay-backdrop-showing[_ngcontent-%COMP%]{opacity:.6}.cdk-overlay-dark-backdrop[_ngcontent-%COMP%]{background:rgba(0,0,0,.32)}.cdk-overlay-transparent-backdrop[_ngcontent-%COMP%], .cdk-overlay-transparent-backdrop.cdk-overlay-backdrop-showing[_ngcontent-%COMP%]{opacity:0}.cdk-overlay-connected-position-bounding-box[_ngcontent-%COMP%]{position:absolute;z-index:1000;display:flex;flex-direction:column;min-width:1px;min-height:1px}.cdk-global-scrollblock[_ngcontent-%COMP%]{position:fixed;width:100%;overflow-y:scroll}body[_ngcontent-%COMP%], html[_ngcontent-%COMP%]{height:100%}body[_ngcontent-%COMP%]{margin:0;font-family:Roboto,Helvetica Neue,sans-serif}body.dark-theme[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff}body.dark-theme[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#607d8b}[_nghost-%COMP%]{position:absolute;z-index:30}.wrapper[_ngcontent-%COMP%]{border:1px solid #000;background:#fff;box-shadow:0 0 10px;height:20px;padding:8px 10px;display:flex}.wrapper.dark-theme[_ngcontent-%COMP%]{background:#303030}.wrapper[_ngcontent-%COMP%]     mat-form-field .mat-form-field-infix{display:none}.wrapper[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{margin-right:5px;cursor:pointer}.svg__icon[_ngcontent-%COMP%]:hover{color:#3f51b5}"],changeDetection:0}),t})();function cn(t,e){if(1&t&&(o.Sb(0,"mat-button-toggle",9),o.Ac(1),o.ec(2,"date"),o.Rb()),2&t){const t=e.$implicit,n=e.index,i=o.dc();o.jc("value",t)("checked",n===i.script.revisions.length-1),o.Bb(1),o.Bc(o.gc(2,3,t.created,"short"))}}let ln=(()=>{class t{constructor(t,e){this.data=t,this.dialogRef=e,this.script=t.script,this.darkTheme=t.darkTheme}ngOnInit(){}onEditorCreated(t){this.editor=t,this.showHistory(this.script.revisions[this.script.revisions.length-1])}showHistory(t){this.selectedRevision=t;const e=this.editor.getContents();e.ops=t.deltaOps,this.editor.setContents(e)}onNoClick(){this.dialogRef.close()}}return t.\u0275fac=function(e){return new(e||t)(o.Mb(g.a),o.Mb(g.g))},t.\u0275cmp=o.Gb({type:t,selectors:[["app-history"]],decls:12,vars:6,consts:[["mat-dialog-title",""],["mat-dialog-content","",1,"history-wrapper"],[1,"history-sidebar"],[1,"history-sidebar-date",3,"change"],[3,"value","checked",4,"ngFor","ngForOf"],[1,"editor",3,"readOnly","onEditorCreated"],["mat-dialog-actions",""],["mat-stroked-button","","color","primary","cdkFocusInitial","",3,"click"],["mat-stroked-button","","color","primary",3,"mat-dialog-close"],[3,"value","checked"]],template:function(t,e){1&t&&(o.Sb(0,"h2",0),o.Ac(1),o.Rb(),o.Sb(2,"div",1),o.Sb(3,"div",2),o.Sb(4,"mat-button-toggle-group",3),o.Zb("change",function(t){return e.showHistory(t.value)}),o.yc(5,cn,3,6,"mat-button-toggle",4),o.Rb(),o.Rb(),o.Sb(6,"quill-editor",5),o.Zb("onEditorCreated",function(t){return e.onEditorCreated(t)}),o.Rb(),o.Rb(),o.Sb(7,"div",6),o.Sb(8,"button",7),o.Zb("click",function(){return e.onNoClick()}),o.Ac(9," Close "),o.Rb(),o.Sb(10,"button",8),o.Ac(11," Paste to editor "),o.Rb(),o.Rb()),2&t&&(o.Bb(1),o.Cc("Histories(",e.script.revisions.length,")"),o.Bb(4),o.jc("ngForOf",e.script.revisions),o.Bb(1),o.Eb("dark-theme",e.darkTheme),o.jc("readOnly",!0),o.Bb(4),o.jc("mat-dialog-close",e.selectedRevision))},directives:[g.h,g.e,Ct.b,r.k,ke.a,g.c,s.a,g.d,Ct.a],pipes:[r.e],styles:[".history-wrapper[_ngcontent-%COMP%]{display:flex}.history-wrapper[_ngcontent-%COMP%]   .history-sidebar[_ngcontent-%COMP%]{text-align:center;width:150px;padding:15px}.history-wrapper[_ngcontent-%COMP%]   .history-sidebar-date[_ngcontent-%COMP%]{display:flex;flex-direction:column}.history-wrapper[_ngcontent-%COMP%]     .editor .ql-container{overflow:auto;height:60vh;width:600px}"]}),t})();var hn=n("cp0P"),dn=n("JIr8");const un=["\u3060\u304b\u3089","\u305d\u308c\u3067","\u305d\u306e\u305f\u3081","\u3053\u306e\u305f\u3081","\u305d\u3053\u3067","\u3057\u305f\u304c\u3063\u3066","\u3086\u3048\u306b","\u305d\u308c\u3086\u3048\u306b","\u3059\u308b\u3068","\u305d\u308c\u306a\u3089","\u305d\u308c\u3067\u306f","\u3057\u304b\u3057","\u3057\u304b\u3057\u306a\u304c\u3089","\u3060\u3051\u3069","\u3051\u308c\u3069\u3082","\u3068\u3053\u308d\u304c","\u306e\u306b","\u306a\u306e\u306b","\u305d\u308c\u306a\u306e\u306b","\u306b\u3082\u304b\u304b\u308f\u3089\u305a","\u305d\u308c\u306b\u3082\u304b\u304b\u308f\u3089\u305a","\u3082\u306e\u306e","\u3068\u306f\u3044\u3046\u3082\u306e\u306e","\u3067\u3082","\u305d\u308c\u3067\u3082","\u307e\u305f","\u304a\u3088\u3073","\u304b\u3064","\u306a\u3089\u3073\u306b","\u540c\u3058\u304f","\u7b2c\uff11\u306b","\u7b2c\uff12\u306b","\u7b2c\uff13\u306b","\uff11\u3064\u76ee\u306f","\uff12\u3064\u76ee\u306f","\uff13\u3064\u76ee\u306f","\uff11\u70b9\u76ee\u306f","\uff12\u70b9\u76ee\u306f","\uff13\u70b9\u76ee\u306f","\uff11\u3064\u306f","\u3082\u3046\uff11\u3064\u306f","\uff11\u70b9\u306f","\u3082\u3046\uff11\u70b9\u306f","\u6700\u521d\u306b","\u6b21\u306b","\u6700\u5f8c\u306b","\u306f\u3058\u3081\u306b","\u305d\u306e\u3042\u3068\u306b","\u304a\u308f\u308a\u306b","\u305d\u3057\u3066","\u305d\u308c\u306b","\u305d\u308c\u306b\u3057\u3066\u3082","\u305d\u308c\u304b\u3089","\u3057\u304b\u3082","\u304a\u307e\u3051\u306b","\u3055\u3089\u306b","\u305d\u306e\u3046\u3048","\u52a0\u3048\u3066","\u305d\u308c\u3069\u3053\u308d\u304b","\u3069\u3053\u308d\u304b","\u305d\u308c\u3070\u304b\u308a\u304b","\u305d\u308c\u3070\u304b\u308a\u3067\u306a\u304f","\u305d\u306e\u4e0a\u3067","\u4e00\u65b9","\u4ed6\u65b9","\u9006\u306b","\u53cd\u5bfe\u306b","\u53cd\u9762","\u305d\u306e\u304b\u308f\u308a","\u307e\u305f\u306f","\u305d\u308c\u3068\u3082","\u3042\u308b\u3044\u306f","\u3082\u3057\u304f\u306f","\u306a\u305c\u306a\u3089","\u3060\u3063\u3066","\u3068\u3044\u3046\u306e\u306f","\u3068\u3044\u3046\u306e\u3082","\u306a\u305c\u304b\u3068\u3044\u3046\u3068","\u3069\u3046\u3057\u3066\u304b\u3068\u3044\u3046\u3068","\u306a\u3093\u3067\u304b\u3068\u3044\u3046\u3068","\u305d\u306e\u305f\u3081\u306b\u306f","\u305d\u308c\u306b\u306f","\u306a\u304a","\u305f\u3060\u3057","\u305f\u3060","\u3082\u3063\u3068\u3082","\u3061\u306a\u307f\u306b","\u305d\u3082\u305d\u3082","\u5b9f\u306f","\u5b9f\u306e\u3068\u3053\u308d","\u3064\u307e\u308a","\u3059\u306a\u308f\u3061","\u8981\u3059\u308b\u306b","\u4f8b\u3048\u3070","\u3044\u308f\u3070","\u7279\u306b","\u3068\u308a\u308f\u3051","\u306a\u304b\u3067\u3082","\u305d\u308c\u3067\u306f","\u3067\u306f","\u3055\u3066","\u3068\u3053\u308d\u3067","\u3053\u306e\u3088\u3046\u306b","\u4ee5\u4e0a\u306e\u3088\u3046\u306b","\u3044\u305a\u308c\u306b\u3057\u3066\u3082","\u3044\u305a\u308c\u306b\u305b\u3088","\u3068\u3082\u3042\u308c","\u78ba\u304b\u306b","\u3057\u304b\u3057","\u4e00\u65b9\u3067\u306f","\u4ed6\u65b9\u3067\u306f"];function pn(t,e){if(1&t){const t=o.Tb();o.Sb(0,"button",39),o.Zb("click",function(){return o.rc(t),o.dc().highlightValue.reset()}),o.Sb(1,"mat-icon"),o.Ac(2,"close"),o.Rb(),o.Rb()}}function bn(t,e){if(1&t){const t=o.Tb();o.Sb(0,"button",39),o.Zb("click",function(){return o.rc(t),o.dc().baseFormValue.reset()}),o.Sb(1,"mat-icon"),o.Ac(2,"close"),o.Rb(),o.Rb()}}function gn(t,e){if(1&t&&(o.Sb(0,"mat-option",40),o.Ac(1),o.Rb()),2&t){const t=e.$implicit;o.jc("value",t),o.Bb(1),o.Bc(t)}}function fn(t,e){if(1&t&&(o.Sb(0,"mat-option",40),o.Ac(1),o.Rb()),2&t){const t=e.$implicit;o.jc("value",t),o.Bb(1),o.Bc(t)}}function mn(t,e){if(1&t&&(o.Sb(0,"mat-option",40),o.Ac(1),o.Rb()),2&t){const t=e.$implicit;o.jc("value",t),o.Bb(1),o.Cc(" ",t," ")}}let _n=(()=>{class t{constructor(t,e,n,i,r){this.appService=t,this.scriptService=e,this.editorService=n,this.tokenizeService=i,this.cd=r,this.highlightValue=new a.e(""),this.baseFormValue=new a.e(""),this.keys=["\u8003\u3048\u308b","\u601d\u3046"],this.keywordValues=new a.e(this.keys),this.conjunctions=un,this.conjunctionValues=new a.e(this.conjunctions),this.textColorCtr=new a.e,this.backgroundColorCtr=new a.e,this.color="primary",this.wordCount=0,this.fonts=We.b,this.fontChange=new o.n,this.subtitleChange=new o.n,this.toolBoxHighlightKey="tool-box-highlight-key",this.toolBoxBaseFormKey="tool-box-base-form-key",this.toolBoxTextColorCodeKey="tool-box-text-color-code-key",this.toolBoxBackgroundColorCodeKey="tool-box-background-color-code-key",this.unsubscriber$=new x.a;const s=localStorage.getItem(this.toolBoxHighlightKey);s&&this.highlightValue.setValue(s);const c=localStorage.getItem(this.toolBoxBaseFormKey);c&&this.baseFormValue.setValue(c),this.textColorCtr.valueChanges.pipe(Object(R.a)(t=>t),Object(S.a)(this.unsubscriber$)).subscribe(t=>{const e=`#${t.toHex()}`;this.editorService.onChangeTextColor(e),localStorage.setItem(this.toolBoxTextColorCodeKey,e)}),this.backgroundColorCtr.valueChanges.pipe(Object(R.a)(t=>t),Object(S.a)(this.unsubscriber$)).subscribe(t=>{const e=`#${t.toHex()}`;this.editorService.onChangeBackgroundColor(e),localStorage.setItem(this.toolBoxBackgroundColorCodeKey,e)});const l=localStorage.getItem(this.toolBoxTextColorCodeKey),h=this.hex2rgb(l?`${l}`:"#000000");this.textColorCtr.setValue(new et(h[0],h[1],h[2]));const d=localStorage.getItem(this.toolBoxBackgroundColorCodeKey),u=this.hex2rgb(d?`${d}`:"#000000");this.backgroundColorCtr.setValue(new et(u[0],u[1],u[2])),this.editorService.wordCounter$.pipe(Object(S.a)(this.unsubscriber$)).subscribe(t=>{this.wordCount=t,this.cd.markForCheck()})}get subtitleWidth(){return this.appService.subtitleWidth}set subtitleWidth(t){this.appService.subtitleWidth=t,this.subtitleChange.emit(t)}get font(){return this.appService.font}set font(t){this.appService.font=t,this.fontChange.emit(t)}ngOnInit(){}ngOnDestroy(){this.unsubscriber$.next()}highlight(t,e){this.highlightValue.value&&this.editorService.highlight(t,e)}removeOldHighlighted(){this.editorService.removeHighlight()}highlightBaseForm(t,e){if(0===t.length)return;const n=this.appService.setLoading();Object(hn.a)(t.map(t=>this.tokenizeService.tokenize(t))).pipe(Object(Ke.a)(t=>{const e=t.map(t=>t[0].base_form),n=e.filter(t=>"*"===t);return n.length>0&&alert(`\u4ee5\u4e0b\u306e\u8a9e\u53e5\u306e\u8868\u5c64\u7cfb\u304c\u898b\u3064\u304b\u308a\u307e\u305b\u3093\u3002\n${n.join}`),e.filter(t=>"*"!==t)}),Object(qe.a)(t=>this.editorService.highlightByBaseForm(t,e)),Object(S.a)(this.unsubscriber$)).subscribe(t=>{this.appService.resolveLoading(n)},t=>{this.appService.resolveLoading(n)})}bulkUnderline(t){if(0===t.length)return;const e=this.appService.setLoading();Object(hn.a)(t.map(t=>this.tokenizeService.tokenize(t))).pipe(Object(Ke.a)(t=>t.map(t=>t[0].base_form).filter(t=>"*"!==t)),Object(dn.a)(t=>Object(k.a)([])),Object(S.a)(this.unsubscriber$)).subscribe(t=>{t.length>0&&this.editorService.underline(t),this.appService.resolveLoading(e)})}removeAllUnderlinedSentences(){this.editorService.removeUnderline()}removeStrike(){this.editorService.removeStrikes()}reformat(){this.editorService.reformat()}hex2rgb(t){return"#"===t.slice(0,1)&&(t=t.slice(1)),3===t.length&&(t=t.slice(0,1)+t.slice(0,1)+t.slice(1,2)+t.slice(1,2)+t.slice(2,3)+t.slice(2,3)),[t.slice(0,2),t.slice(2,4),t.slice(4,6)].map(t=>parseInt(t,16))}}return t.\u0275fac=function(e){return new(e||t)(o.Mb(en.a),o.Mb(nn),o.Mb(an),o.Mb(rn.a),o.Mb(o.h))},t.\u0275cmp=o.Gb({type:t,selectors:[["app-tool-box"]],outputs:{fontChange:"fontChange",subtitleChange:"subtitleChange"},decls:104,vars:24,consts:[[1,"wrapper"],[1,"title"],[1,"word-counter"],[1,"tool__wrapper"],[1,"highlight"],[1,"highlight__wrapper"],[1,"highlight__word"],[3,"ngSubmit"],["matInput","",3,"formControl"],["type","reset","mat-stroked-button","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],[1,"highlight__base-form"],[1,"highlight-reserved"],[1,"highlight-reserved__wrapper"],[1,"highlight-reserved__words"],["multiple","",3,"formControl"],[1,"keywords"],[3,"value",4,"ngFor","ngForOf"],[1,"svg__icon",3,"click"],[1,"highlight-reserved__conjunctions"],[1,"color"],[1,"color__wrapper"],[1,"color__text"],["matInput","",3,"ngxMatColorPicker","formControl"],["matSuffix","",3,"for"],[3,"touchUi","color"],["picker1",""],[1,"color__background"],["picker2",""],[1,"others"],[1,"others__wrapper"],[1,"others__format","others__item"],["mat-stroked-button","","color","primary",3,"click"],[1,"others__subtitle","others__item"],["color","primary","thumbLabel","",3,"ngModel","ngModelChange"],[1,"others__font","others__item"],["name","font",3,"ngModel","ngModelChange"],[1,"remove"],[1,"remove__wrapper"],[1,"remove__button"],["type","reset","mat-stroked-button","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],[3,"value"]],template:function(t,e){if(1&t&&(o.Sb(0,"mat-expansion-panel",0),o.Sb(1,"mat-expansion-panel-header"),o.Sb(2,"mat-panel-title"),o.Sb(3,"div",1),o.Ac(4,"Toolbox"),o.Rb(),o.Sb(5,"div",2),o.Ac(6),o.Rb(),o.Rb(),o.Rb(),o.Sb(7,"div",3),o.Sb(8,"mat-card",4),o.Sb(9,"mat-card-title"),o.Ac(10,"Highlight"),o.Rb(),o.Sb(11,"div",5),o.Sb(12,"div",6),o.Sb(13,"form",7),o.Zb("ngSubmit",function(){return e.highlight([e.highlightValue.value])}),o.Sb(14,"mat-form-field"),o.Sb(15,"mat-label"),o.Ac(16,"Word"),o.Rb(),o.Nb(17,"input",8),o.yc(18,pn,3,0,"button",9),o.Rb(),o.Rb(),o.Rb(),o.Sb(19,"div",10),o.Sb(20,"form",7),o.Zb("ngSubmit",function(){return e.highlightBaseForm([e.baseFormValue.value])}),o.Sb(21,"mat-form-field"),o.Sb(22,"mat-label"),o.Ac(23,"Base form"),o.Rb(),o.Nb(24,"input",8),o.yc(25,bn,3,0,"button",9),o.Rb(),o.Rb(),o.Rb(),o.Rb(),o.Rb(),o.Sb(26,"mat-card",11),o.Sb(27,"mat-card-title"),o.Ac(28,"Highlight Reserved"),o.Rb(),o.Sb(29,"div",12),o.Sb(30,"div",13),o.Sb(31,"mat-form-field"),o.Sb(32,"mat-label"),o.Ac(33,"Keywords"),o.Rb(),o.Sb(34,"mat-select",14),o.Sb(35,"mat-select-trigger"),o.Sb(36,"span",15),o.Ac(37),o.Rb(),o.Rb(),o.yc(38,gn,2,2,"mat-option",16),o.Rb(),o.Rb(),o.Sb(39,"div",17),o.Zb("click",function(){return e.highlight(e.keywordValues.value,"orange")}),o.Sb(40,"mat-icon"),o.Ac(41,"format_color_fill"),o.Rb(),o.Rb(),o.Rb(),o.Sb(42,"div",18),o.Sb(43,"mat-form-field"),o.Sb(44,"mat-label"),o.Ac(45,"conjunctions"),o.Rb(),o.Sb(46,"mat-select",14),o.Sb(47,"mat-select-trigger"),o.Sb(48,"span",15),o.Ac(49),o.Rb(),o.Rb(),o.yc(50,fn,2,2,"mat-option",16),o.Rb(),o.Rb(),o.Sb(51,"div",17),o.Zb("click",function(){return e.highlight(e.conjunctionValues.value,"green")}),o.Sb(52,"mat-icon"),o.Ac(53,"border_color"),o.Rb(),o.Rb(),o.Rb(),o.Rb(),o.Rb(),o.Sb(54,"mat-card",19),o.Sb(55,"mat-card-title"),o.Ac(56,"Color"),o.Rb(),o.Sb(57,"div",20),o.Sb(58,"div",21),o.Sb(59,"mat-form-field"),o.Sb(60,"mat-label"),o.Ac(61,"text color"),o.Rb(),o.Nb(62,"input",22),o.Nb(63,"ngx-mat-color-toggle",23),o.Nb(64,"ngx-mat-color-picker",24,25),o.Rb(),o.Rb(),o.Sb(66,"div",26),o.Sb(67,"mat-form-field"),o.Sb(68,"mat-label"),o.Ac(69,"background color"),o.Rb(),o.Nb(70,"input",22),o.Nb(71,"ngx-mat-color-toggle",23),o.Nb(72,"ngx-mat-color-picker",24,27),o.Rb(),o.Rb(),o.Rb(),o.Rb(),o.Sb(74,"mat-card",28),o.Sb(75,"mat-card-title"),o.Ac(76,"Others"),o.Rb(),o.Sb(77,"div",29),o.Sb(78,"div",30),o.Sb(79,"button",31),o.Zb("click",function(){return e.reformat()}),o.Ac(80," format "),o.Rb(),o.Rb(),o.Sb(81,"div",32),o.Sb(82,"h4"),o.Ac(83,"Subtitle"),o.Rb(),o.Sb(84,"mat-slider",33),o.Zb("ngModelChange",function(t){return e.subtitleWidth=t}),o.Rb(),o.Rb(),o.Sb(85,"div",34),o.Sb(86,"mat-form-field"),o.Sb(87,"mat-label"),o.Ac(88,"Font"),o.Rb(),o.Sb(89,"mat-select",35),o.Zb("ngModelChange",function(t){return e.font=t}),o.yc(90,mn,2,2,"mat-option",16),o.Rb(),o.Rb(),o.Rb(),o.Rb(),o.Rb(),o.Sb(91,"mat-card",36),o.Sb(92,"mat-card-title"),o.Ac(93,"Remove"),o.Rb(),o.Sb(94,"div",37),o.Sb(95,"div",38),o.Sb(96,"button",31),o.Zb("click",function(){return e.removeOldHighlighted()}),o.Ac(97," Highlight "),o.Rb(),o.Rb(),o.Sb(98,"div",38),o.Sb(99,"button",31),o.Zb("click",function(){return e.removeAllUnderlinedSentences()}),o.Ac(100," UnderLine "),o.Rb(),o.Rb(),o.Sb(101,"div",38),o.Sb(102,"button",31),o.Zb("click",function(){return e.removeStrike()}),o.Ac(103," Strike "),o.Rb(),o.Rb(),o.Rb(),o.Rb(),o.Rb(),o.Rb()),2&t){const t=o.oc(65),n=o.oc(73);o.Bb(6),o.Cc(" Word Count: ",e.wordCount," "),o.Bb(11),o.jc("formControl",e.highlightValue),o.Bb(1),o.jc("ngIf",e.highlightValue.value),o.Bb(6),o.jc("formControl",e.baseFormValue),o.Bb(1),o.jc("ngIf",e.baseFormValue.value),o.Bb(9),o.jc("formControl",e.keywordValues),o.Bb(3),o.Bc(null==e.keywordValues.value?null:e.keywordValues.value.length),o.Bb(1),o.jc("ngForOf",e.keys),o.Bb(8),o.jc("formControl",e.conjunctionValues),o.Bb(3),o.Bc(null==e.conjunctionValues.value?null:e.conjunctionValues.value.length),o.Bb(1),o.jc("ngForOf",e.conjunctions),o.Bb(12),o.jc("ngxMatColorPicker",t)("formControl",e.textColorCtr),o.Bb(1),o.jc("for",t),o.Bb(1),o.jc("touchUi",!1)("color",e.color),o.Bb(6),o.jc("ngxMatColorPicker",n)("formControl",e.backgroundColorCtr),o.Bb(1),o.jc("for",n),o.Bb(1),o.jc("touchUi",!1)("color",e.color),o.Bb(12),o.jc("ngModel",e.subtitleWidth),o.Bb(5),o.jc("ngModel",e.font),o.Bb(1),o.jc("ngForOf",e.fonts)}},directives:[wt.c,wt.d,wt.e,p,u,a.v,a.o,a.p,T.c,T.f,m.b,a.c,a.n,a.f,r.l,St.a,St.c,r.k,f.a,_t,vt,T.h,bt,s.a,Mt.a,a.q,l.i],styles:[".wrapper[_ngcontent-%COMP%]{border:1px solid #000;text-align:center}.wrapper[_ngcontent-%COMP%]   .word-counter[_ngcontent-%COMP%]{margin-left:auto}.wrapper[_ngcontent-%COMP%]   .tool__wrapper[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}.wrapper[_ngcontent-%COMP%]   .tool__wrapper[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{text-align:left}.wrapper[_ngcontent-%COMP%]   .highlight[_ngcontent-%COMP%]{width:400px;margin-right:30px;margin-bottom:30px}.wrapper[_ngcontent-%COMP%]   .highlight__wrapper[_ngcontent-%COMP%]{display:flex}.wrapper[_ngcontent-%COMP%]   .highlight__word[_ngcontent-%COMP%]{margin-right:30px}.wrapper[_ngcontent-%COMP%]   .highlight-reserved[_ngcontent-%COMP%]{width:440px;margin-right:30px;margin-bottom:30px}.wrapper[_ngcontent-%COMP%]   .highlight-reserved__wrapper[_ngcontent-%COMP%]{display:flex}.wrapper[_ngcontent-%COMP%]   .highlight-reserved__words[_ngcontent-%COMP%]{margin-right:30px;display:flex;align-items:center}.wrapper[_ngcontent-%COMP%]   .highlight-reserved__conjunctions[_ngcontent-%COMP%]{display:flex;align-items:center}.wrapper[_ngcontent-%COMP%]   .color[_ngcontent-%COMP%]{width:450px;margin-right:30px;margin-bottom:30px}.wrapper[_ngcontent-%COMP%]   .color__wrapper[_ngcontent-%COMP%]{display:flex}.wrapper[_ngcontent-%COMP%]   .color__text[_ngcontent-%COMP%], .wrapper[_ngcontent-%COMP%]   .others[_ngcontent-%COMP%]{margin-right:30px}.wrapper[_ngcontent-%COMP%]   .others[_ngcontent-%COMP%]{width:430px;margin-bottom:30px}.wrapper[_ngcontent-%COMP%]   .others__wrapper[_ngcontent-%COMP%]{display:flex;align-items:center}.wrapper[_ngcontent-%COMP%]   .others__item[_ngcontent-%COMP%]{margin-right:20px}.wrapper[_ngcontent-%COMP%]   .remove[_ngcontent-%COMP%]{width:400px;margin-right:30px;margin-bottom:30px}.wrapper[_ngcontent-%COMP%]   .remove__wrapper[_ngcontent-%COMP%]{display:flex}.wrapper[_ngcontent-%COMP%]   .remove__button[_ngcontent-%COMP%]{margin-right:20px}.svg__icon[_ngcontent-%COMP%]{cursor:pointer}.svg__icon[_ngcontent-%COMP%]:hover{color:#3f51b5}"],changeDetection:0}),t})();var vn=n("eIep"),yn=n("NXyV");let xn=(()=>{class t{constructor(t,e){this.http=t,this.appService=e}createArray(t){this.yarray=this.appService.ydoc.getArray(t);const e=new He.a(1);return this.yarray.observe((t,n)=>{const i=this.yarray.toArray();e.next(i)}),e.next(this.yarray.toArray()),Object(yn.a)(()=>this.appService.useWs?this.appService.wsSynced():Object(k.a)(!0)).pipe(Object(qe.a)(()=>e.asObservable()),Object(M.a)())}insertArray(t,...e){this.yarray.insert(t,e)}pushArray(...t){this.yarray.push(t)}spliceArray(t,e,...n){this.yarray.delete(t,e),this.yarray.insert(t,n)}getMessages(t){return this.http.get(`api/v1/messages?scriptId=${t}`)}postMessage(t){return this.http.post("api/v1/messages",t)}deleteMessage(t){return this.http.delete(`api/v1/messages/${t}`)}deleteMessages(t){const e=t.map(t=>`id[]=${t}`).join("&");return this.http.delete(`api/v1/messages?${e}`)}}return t.\u0275fac=function(e){return new(e||t)(o.Wb(Be.b),o.Wb(en.a))},t.\u0275prov=o.Ib({token:t,factory:t.\u0275fac}),t})();var Cn=n("ej43");const wn=["form"],kn=["chatMessage"];function Sn(t,e){1&t&&o.Ob(0)}const On=function(t){return{message:t}};function Mn(t,e){if(1&t&&(o.Qb(0),o.yc(1,Sn,1,0,"ng-container",11),o.Pb()),2&t){const t=e.$implicit;o.dc(2);const n=o.oc(11);o.Bb(1),o.jc("ngTemplateOutlet",n)("ngTemplateOutletContext",o.lc(2,On,t))}}function An(t,e){if(1&t&&(o.Qb(0),o.Sb(1,"div",8,9),o.yc(3,Mn,2,4,"ng-container",10),o.Rb(),o.Pb()),2&t){const t=o.dc();o.Bb(3),o.jc("ngForOf",t.messages)}}function Rn(t,e){if(1&t&&(o.Qb(0),o.Ac(1),o.Pb()),2&t){const t=o.dc();o.Bb(1),o.Cc("Reply: ",t.activeMessage.body.slice(0,10)+"..","")}}function Pn(t,e){if(1&t&&(o.Qb(0),o.Ac(1),o.Pb()),2&t){const t=o.dc();o.Bb(1),o.Cc(" Target: ",t.selected.text," ")}}function jn(t,e){if(1&t&&(o.Sb(0,"p",25),o.Ac(1),o.Rb()),2&t){const t=o.dc().message;o.Bb(1),o.Cc(" ",t.selectedText.length>15?t.selectedText.slice(0,15)+"..":t.selectedText," ")}}function En(t,e){if(1&t&&(o.Sb(0,"span",26),o.Ac(1),o.Rb()),2&t){const t=o.dc().message;o.Bb(1),o.Bc((null==t.children?null:t.children.length)||0)}}function Tn(t,e){1&t&&o.Ob(0)}function In(t,e){if(1&t&&(o.Qb(0),o.yc(1,Tn,1,0,"ng-container",11),o.Pb()),2&t){const t=e.$implicit;o.dc(3);const n=o.oc(11);o.Bb(1),o.jc("ngTemplateOutlet",n)("ngTemplateOutletContext",o.lc(2,On,t))}}function Ln(t,e){if(1&t&&(o.Sb(0,"div",27),o.yc(1,In,2,4,"ng-container",10),o.Rb()),2&t){const t=o.dc().message;o.Bb(1),o.jc("ngForOf",t.children)}}function Bn(t,e){if(1&t){const t=o.Tb();o.Sb(0,"div",12),o.Sb(1,"div",13),o.Zb("click",function(){o.rc(t);const n=e.message;return o.dc().messageClick(n)}),o.Sb(2,"mat-icon",14),o.Ac(3,"arrow_right"),o.Rb(),o.Rb(),o.Sb(4,"div",15),o.Sb(5,"div",16),o.Zb("click",function(){o.rc(t);const n=e.message;return o.dc().messageClick(n,"open")}),o.Sb(6,"p",17),o.Ac(7),o.Rb(),o.Rb(),o.yc(8,jn,2,1,"p",18),o.Sb(9,"div",19),o.yc(10,En,2,1,"span",20),o.Sb(11,"span",21),o.Ac(12),o.Rb(),o.Sb(13,"span",22),o.Ac(14),o.ec(15,"date"),o.Rb(),o.Sb(16,"div",23),o.Zb("click",function(){o.rc(t);const n=e.message;return o.dc().deleteMessage(n)}),o.Sb(17,"mat-icon",14),o.Ac(18,"inventory_2"),o.Rb(),o.Rb(),o.Rb(),o.Rb(),o.Rb(),o.yc(19,Ln,2,1,"div",24)}if(2&t){const t=e.message,n=o.dc();o.Bb(1),o.Eb("chat-message__expand-icon--has-children",((null==t.children?null:t.children.length)||0)>0)("chat-message__expand-icon--expanded",t.expanded),o.Bb(4),o.Eb("dark-theme",n.darkTheme)("chat-message__text--active",n.activeMessage===t),o.Bb(2),o.Bc(t.body),o.Bb(1),o.jc("ngIf",t.selectedText),o.Bb(2),o.jc("ngIf",((null==t.children?null:t.children.length)||0)>0),o.Bb(2),o.Bc(t.author.name),o.Bb(2),o.Bc(o.gc(15,14,t.created,"short")),o.Bb(5),o.jc("ngIf",t.expanded&&!(null==t.children||!t.children.length))}}let Fn=(()=>{class t{constructor(t,e,n,i,r){this.cd=t,this.authenticationService=e,this.route=n,this.chatService=i,this.editorService=r,this.messages=[],this.disable=!0,this.chatForm=new a.h({body:new a.e({value:"",disabled:this.disabled},[a.u.required,a.u.minLength(1)])}),this.selected={uuid:void 0,text:void 0},this.unsubscriber$=new x.a,this.initialized$=new Le.a(!1),this.route.paramMap.pipe(Object(R.a)(t=>"new"!==t.get("id")),Object(vn.a)(t=>{const e=t.get("id");return this.scriptId=parseInt(e,10),Object(hn.a)([this.chatService.getMessages(this.scriptId),this.editorService.initialized$.pipe(Object(Ve.a)())])}),Object(dn.a)(t=>{}),Object(R.a)(t=>!!t),Object(Ve.a)(),Object(qe.a)(([t,e])=>this.chatService.createArray(this.wsMessageType).pipe(Object(Ke.a)((e,n)=>{0===n?(t.length>0&&0===e.length&&this.chatService.insertArray(0,...t),this.disabled=!1,this.messages=this.editorService.initialComments(t),this.initialized$.next(!0)):this.messages=e}))),Object(S.a)(this.unsubscriber$)).subscribe(()=>{this.cd.markForCheck()},t=>{this.initialized$.next(!0)})}get disabled(){return this.disable}set disabled(t){this.disable=t,this.chatForm.controls.body.enable()}get wsMessageType(){return`chat-${this.scriptId}`}ngOnInit(){}ngAfterViewInit(){Object(Rt.a)(this.formElement.nativeElement,"keydown").pipe(Object(R.a)(t=>t.ctrlKey&&"Enter"===t.key),Object(S.a)(this.unsubscriber$)).subscribe(t=>{this.submit()}),this.editorService.commentSubject$.pipe(Object(S.a)(this.unsubscriber$)).subscribe(t=>{this.selected.uuid=t,this.selected.text=this.editorService.selectionCommentText(t),this.formElement.nativeElement.querySelector("textarea").focus(),this.cd.markForCheck()}),this.initialized$.pipe(Object(R.a)(t=>t),Object(qe.a)(()=>this.editorService.focusChatMessage$),Object(S.a)(this.unsubscriber$)).subscribe(t=>{const e=this.messages.find(e=>e.uuid===t);e&&(e.expanded=!0,this.activeMessage=e,this.cd.markForCheck())})}onClick(t){if(!t.target.closest("app-chat")){const e=this.formElement.nativeElement.querySelector("textarea");void 0!==this.selected.uuid&&document.activeElement!==e&&(this.editorService.unselectComment(this.selected.uuid),this.selected.uuid=void 0,this.selected.text=void 0),this.activeMessage&&(t.target.closest("[data-comment-uuid]")||(this.activeMessage=void 0,this.cd.markForCheck()))}}messageClick(t,e){let n;switch(e){case"open":n=!0;break;case"close":n=!1;break;default:n=!t.expanded}n?(t.expanded=!0,this.activeMessage=t,this.formElement.nativeElement.querySelector("textarea").focus()):(this.activeMessage=void 0,t.expanded=!1,this.cd.markForCheck());const i=t.uuid;i&&(this.editorService.selectionCommentFocused(i),this.selected.text=this.editorService.selectionCommentText(i),this.cd.markForCheck())}ngOnDestroy(){this.unsubscriber$.next()}submit(){var t;if(!this.chatForm.valid||this.disabled)return;const[e,n]=this.findTopMessage(this.messages,null===(t=this.activeMessage)||void 0===t?void 0:t.id),i={body:this.chatForm.get("body").value,author:this.authenticationService.user,scriptId:this.scriptId,uuid:this.selected.uuid||(null==n?void 0:n.uuid),parentId:null==n?void 0:n.id};this.chatService.postMessage(i).pipe(Object(S.a)(this.unsubscriber$)).subscribe(t=>{t.selectedText=this.selected.text,e?(this.messages[e].children?this.messages[e].children.push(t):this.messages[e].children=[t],this.chatService.spliceArray(e,1,this.messages[e])):this.chatService.pushArray(t),t.uuid&&(this.editorService.applySelectionCommentMessage(t.uuid,t.body),this.selected.uuid=void 0,this.selected.text=void 0),this.chatForm.reset(),this.cd.markForCheck()})}deleteMessage(t){const e=n=>{n.forEach((i,r)=>{i.id!==t.id?i.children&&e(i.children):n.splice(r,1)})};e(this.messages),this.chatService.deleteMessage(t.id).pipe(Object(S.a)(this.unsubscriber$)).subscribe(()=>{this.cd.markForCheck()})}findTopMessage(t,e){if(!t||void 0===e)return[void 0,void 0];const n=t=>t.id===e||(t.children?t.children.some(t=>n(t)):void 0);for(let i=0;i<t.length;i++)if(n(t[i]))return[i,t[i]];return[void 0,void 0]}}return t.\u0275fac=function(e){return new(e||t)(o.Mb(o.h),o.Mb(Cn.a),o.Mb(Te.a),o.Mb(xn),o.Mb(an))},t.\u0275cmp=o.Gb({type:t,selectors:[["app-chat"]],viewQuery:function(t,e){if(1&t&&(o.Ec(wn,1),o.Ec(kn,1)),2&t){let t;o.nc(t=o.ac())&&(e.formElement=t.first),o.nc(t=o.ac())&&(e.chatMessageElement=t.first)}},hostBindings:function(t,e){1&t&&o.Zb("click",function(t){return e.onClick(t)},!1,o.qc)},inputs:{darkTheme:"darkTheme"},features:[o.Ab([xn])],decls:12,vars:8,consts:[[1,"wrapper"],[4,"ngIf"],[1,"chat-form"],[1,"chat-form__status"],[1,"chat-form__form",3,"formGroup","ngSubmit"],["form",""],["formControlName","body",1,"chat-form__textarea"],["messageTemplate",""],[1,"chat-messages"],["chatMessage",""],[4,"ngFor","ngForOf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"chat-message"],[1,"chat-message__expand-icon",3,"click"],[1,"svg__icon"],[1,"chat-message__body"],[1,"chat-message__text",3,"click"],[1,"chat-message__text-p"],["class","chat-message__selected-text",4,"ngIf"],[1,"chat-message__sub"],["class","chat-message__sub-reply",4,"ngIf"],[1,"chat-message__sub-author"],[1,"chat-message__sub-created"],[1,"chat-message__sub-delete",3,"click"],["class","chat-message__replay",4,"ngIf"],[1,"chat-message__selected-text"],[1,"chat-message__sub-reply"],[1,"chat-message__replay"]],template:function(t,e){1&t&&(o.Sb(0,"div",0),o.yc(1,An,4,1,"ng-container",1),o.ec(2,"async"),o.Sb(3,"div",2),o.Sb(4,"p",3),o.yc(5,Rn,2,1,"ng-container",1),o.yc(6,Pn,2,1,"ng-container",1),o.Rb(),o.Sb(7,"form",4,5),o.Zb("ngSubmit",function(){return e.submit()}),o.Nb(9,"textarea",6),o.Rb(),o.Rb(),o.Rb(),o.yc(10,Bn,20,17,"ng-template",null,7,o.zc)),2&t&&(o.Bb(1),o.jc("ngIf",o.fc(2,6,e.initialized$)),o.Bb(4),o.jc("ngIf",!!e.activeMessage),o.Bb(1),o.jc("ngIf",!!e.selected.text&&!e.activeMessage),o.Bb(1),o.jc("formGroup",e.chatForm),o.Bb(2),o.Eb("dark-theme",e.darkTheme))},directives:[r.l,a.v,a.o,a.i,a.c,a.n,a.g,r.k,r.q,f.a],pipes:[r.b,r.e],styles:[".cdk-global-overlay-wrapper[_ngcontent-%COMP%], .cdk-overlay-container[_ngcontent-%COMP%]{pointer-events:none;top:0;left:0;height:100%;width:100%}.cdk-overlay-container[_ngcontent-%COMP%]{position:fixed;z-index:1000}.cdk-overlay-container[_ngcontent-%COMP%]:empty{display:none}.cdk-global-overlay-wrapper[_ngcontent-%COMP%], .cdk-overlay-pane[_ngcontent-%COMP%]{display:flex;position:absolute;z-index:1000}.cdk-overlay-pane[_ngcontent-%COMP%]{pointer-events:auto;box-sizing:border-box;max-width:100%;max-height:100%}.cdk-overlay-backdrop[_ngcontent-%COMP%]{position:absolute;top:0;bottom:0;left:0;right:0;z-index:1000;pointer-events:auto;-webkit-tap-highlight-color:transparent;transition:opacity .4s cubic-bezier(.25,.8,.25,1);opacity:0}.cdk-overlay-backdrop.cdk-overlay-backdrop-showing[_ngcontent-%COMP%]{opacity:1}.cdk-high-contrast-active[_ngcontent-%COMP%]   .cdk-overlay-backdrop.cdk-overlay-backdrop-showing[_ngcontent-%COMP%]{opacity:.6}.cdk-overlay-dark-backdrop[_ngcontent-%COMP%]{background:rgba(0,0,0,.32)}.cdk-overlay-transparent-backdrop[_ngcontent-%COMP%], .cdk-overlay-transparent-backdrop.cdk-overlay-backdrop-showing[_ngcontent-%COMP%]{opacity:0}.cdk-overlay-connected-position-bounding-box[_ngcontent-%COMP%]{position:absolute;z-index:1000;display:flex;flex-direction:column;min-width:1px;min-height:1px}.cdk-global-scrollblock[_ngcontent-%COMP%]{position:fixed;width:100%;overflow-y:scroll}body[_ngcontent-%COMP%], html[_ngcontent-%COMP%]{height:100%}body[_ngcontent-%COMP%]{margin:0;font-family:Roboto,Helvetica Neue,sans-serif}body.dark-theme[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff}body.dark-theme[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#607d8b}.wrapper[_ngcontent-%COMP%]{height:100%}.wrapper[_ngcontent-%COMP%]   .chat-messages[_ngcontent-%COMP%]{max-height:calc(100% - 80px);overflow:auto;box-sizing:border-box;padding-top:20px}.wrapper[_ngcontent-%COMP%]   .chat-message[_ngcontent-%COMP%]{display:flex;align-items:center}.wrapper[_ngcontent-%COMP%]   .chat-message__expand-icon[_ngcontent-%COMP%]{visibility:hidden}.wrapper[_ngcontent-%COMP%]   .chat-message__expand-icon--expanded[_ngcontent-%COMP%]{transform:rotate(90deg)}.wrapper[_ngcontent-%COMP%]   .chat-message__expand-icon--has-children[_ngcontent-%COMP%]{visibility:visible}.wrapper[_ngcontent-%COMP%]   .chat-message__body[_ngcontent-%COMP%]{flex-grow:1}.wrapper[_ngcontent-%COMP%]   .chat-message__selected-text[_ngcontent-%COMP%]{font-size:10px;margin:3px 0 3px 30px}.wrapper[_ngcontent-%COMP%]   .chat-message__text[_ngcontent-%COMP%]{padding:10px;background:#fff;border-radius:30px;cursor:pointer}.wrapper[_ngcontent-%COMP%]   .chat-message__text.dark-theme[_ngcontent-%COMP%]{background:#555}.wrapper[_ngcontent-%COMP%]   .chat-message__text-p[_ngcontent-%COMP%]{word-break:break-all}.wrapper[_ngcontent-%COMP%]   .chat-message__text--active[_ngcontent-%COMP%], .wrapper[_ngcontent-%COMP%]   .chat-message__text[_ngcontent-%COMP%]:hover{box-sizing:border-box;border:1px solid #9acd32}.wrapper[_ngcontent-%COMP%]   .chat-message__sub[_ngcontent-%COMP%]{text-align:right;font-size:10px;align-items:center}.wrapper[_ngcontent-%COMP%]   .chat-message__sub-reply[_ngcontent-%COMP%]{display:inline-block;margin-right:20px;border-radius:50%;width:15px;height:15px;background:#fff;color:#00f;font-weight:700;text-align:center}.wrapper[_ngcontent-%COMP%]   .chat-message__sub-author[_ngcontent-%COMP%], .wrapper[_ngcontent-%COMP%]   .chat-message__sub-created[_ngcontent-%COMP%]{margin-right:20px}.wrapper[_ngcontent-%COMP%]   .chat-message__sub-delete[_ngcontent-%COMP%]{display:inline-block;margin-right:5px}.wrapper[_ngcontent-%COMP%]   .chat-message__replay[_ngcontent-%COMP%]{padding-left:20px}.wrapper[_ngcontent-%COMP%]   .chat-form[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;height:80px;width:100%}.wrapper[_ngcontent-%COMP%]   .chat-form__status[_ngcontent-%COMP%]{margin:0;font-size:10px;height:20%;color:#6c6c6e}.wrapper[_ngcontent-%COMP%]   .chat-form__form[_ngcontent-%COMP%]{height:80%}.wrapper[_ngcontent-%COMP%]   .chat-form__textarea[_ngcontent-%COMP%]{height:100%;width:100%;box-sizing:border-box}.wrapper[_ngcontent-%COMP%]   .chat-form__textarea.dark-theme[_ngcontent-%COMP%]{background:#555;color:#fff}.svg__icon[_ngcontent-%COMP%]{cursor:pointer}.svg__icon[_ngcontent-%COMP%]:hover{color:#3f51b5}"],changeDetection:0}),t})();function Dn(t,e){if(1&t){const t=o.Tb();o.Sb(0,"li",14),o.Zb("click",function(){o.rc(t);const n=e.$implicit;return o.dc(3).onClickMessage(n)}),o.Ac(1),o.Rb()}if(2&t){const t=e.$implicit;o.Bb(1),o.Dc(" ",t.line,"-",t.message,"(",t.target,") ")}}function zn(t,e){if(1&t&&(o.Qb(0),o.Ac(1),o.Sb(2,"ul",12),o.yc(3,Dn,2,3,"li",13),o.Rb(),o.Pb()),2&t){const t=o.dc(2);o.Bb(1),o.Cc(" ","count: "+t.textLintErrors.length," "),o.Bb(2),o.jc("ngForOf",t.textLintErrors)}}function Nn(t,e){1&t&&(o.Sb(0,"p"),o.Ac(1,"no text lint errors"),o.Rb())}function $n(t,e){if(1&t&&(o.Qb(0),o.yc(1,zn,4,2,"ng-container",9),o.yc(2,Nn,2,0,"ng-template",null,11,o.zc),o.Pb()),2&t){const t=o.oc(3),e=o.dc();o.Bb(1),o.jc("ngIf",e.textLintErrors.length>0)("ngIfElse",t)}}function Hn(t,e){1&t&&(o.Qb(0),o.Sb(1,"p"),o.Ac(2,"textlint something went wrong"),o.Rb(),o.Sb(3,"p"),o.Ac(4,"please try again latter"),o.Rb(),o.Pb())}function qn(t,e){1&t&&(o.Sb(0,"p"),o.Ac(1,"try text lint"),o.Rb())}function Vn(t,e){if(1&t&&(o.yc(0,Hn,5,0,"ng-container",9),o.yc(1,qn,2,0,"ng-template",null,15,o.zc)),2&t){const t=o.oc(2),e=o.dc();o.jc("ngIf",e.textLintRaisedError)("ngIfElse",t)}}let Zn=(()=>{class t{constructor(t,e,n,i){this.appService=t,this.scriptService=e,this.cd=n,this.editorService=i,this.unsubscriber$=new x.a,this.textLintRaisedError=!1}ngOnInit(){this.editorService.initialized$.pipe(Object(Ve.a)(),Object(S.a)(this.unsubscriber$)).subscribe(()=>{this.textLint()})}ngOnDestroy(){this.unsubscriber$.next()}textLint(){const t=this.editorService.getText();if(!t)return;this.removeOldLint();const e=this.appService.setLoading();this.scriptService.textLint(t).pipe(Object(S.a)(this.unsubscriber$)).subscribe(t=>{const n=this.editorService.applyTextLintResult(t);this.textLintErrors=n.messages,this.cd.markForCheck(),this.appService.resolveLoading(e)},t=>{this.textLintRaisedError=!0,this.textLintErrors=void 0,this.cd.markForCheck(),this.appService.resolveLoading(e)})}removeOldLint(){this.editorService.removeTextLintResult()}onClickMessage(t){this.editorService.focusTextLintMessage(t)}}return t.\u0275fac=function(e){return new(e||t)(o.Mb(en.a),o.Mb(nn),o.Mb(o.h),o.Mb(an))},t.\u0275cmp=o.Gb({type:t,selectors:[["app-console"]],inputs:{darkTheme:"darkTheme"},decls:15,vars:7,consts:[[1,"wrapper"],["mat-stretch-tabs",""],["label","chat"],[3,"darkTheme"],["label","textlint"],[1,"textlint"],[1,"textlint-header"],["type","button",1,"textlint__button",3,"click"],[1,"textlint__content"],[4,"ngIf","ngIfElse"],["NoResult",""],["NoTextLintErrors",""],[1,"textlint-detail"],["class","textlint-detail__li",3,"click",4,"ngFor","ngForOf"],[1,"textlint-detail__li",3,"click"],["tryTextLint",""]],template:function(t,e){if(1&t&&(o.Sb(0,"div",0),o.Sb(1,"mat-tab-group",1),o.Sb(2,"mat-tab",2),o.Nb(3,"app-chat",3),o.Rb(),o.Sb(4,"mat-tab",4),o.Sb(5,"div",5),o.Sb(6,"div",6),o.Sb(7,"button",7),o.Zb("click",function(){return e.textLint()}),o.Ac(8," Refresh "),o.Rb(),o.Sb(9,"button",7),o.Zb("click",function(){return e.removeOldLint()}),o.Ac(10," Remove "),o.Rb(),o.Rb(),o.Sb(11,"div",8),o.yc(12,$n,4,2,"ng-container",9),o.yc(13,Vn,3,2,"ng-template",null,10,o.zc),o.Rb(),o.Rb(),o.Rb(),o.Rb(),o.Rb()),2&t){const t=o.oc(14);o.Eb("dark-theme",e.darkTheme),o.Bb(3),o.jc("darkTheme",e.darkTheme),o.Bb(8),o.Eb("dark-theme",e.darkTheme),o.Bb(1),o.jc("ngIf",!!e.textLintErrors)("ngIfElse",t)}},directives:[ge,re,Fn,r.l,r.k],styles:[".wrapper[_ngcontent-%COMP%]{border:1px solid #000;padding:5px;box-sizing:border-box}.wrapper[_ngcontent-%COMP%], .wrapper[_ngcontent-%COMP%]     .mat-tab-group{height:100%}.wrapper[_ngcontent-%COMP%]     .mat-tab-group mat-tab-header{height:50px}.wrapper[_ngcontent-%COMP%]     .mat-tab-group .mat-tab-body-wrapper{height:calc(100% - 50px)}.wrapper[_ngcontent-%COMP%]     .mat-tab-group app-chat{height:100%}.wrapper[_ngcontent-%COMP%]:not(.dark-theme){background-color:#dcdde0}.wrapper[_ngcontent-%COMP%]   .textlint-header[_ngcontent-%COMP%]{height:50px}.wrapper[_ngcontent-%COMP%]   .textlint__button[_ngcontent-%COMP%]{background-color:#777;color:#fff;cursor:pointer;border:none;text-align:left;outline:none;font-size:15px;width:50%;padding:10px;box-sizing:border-box}.wrapper[_ngcontent-%COMP%]   .textlint__button[_ngcontent-%COMP%]:hover{background-color:#555}.wrapper[_ngcontent-%COMP%]   .textlint__content[_ngcontent-%COMP%]{padding:0 18px;overflow:auto;height:calc(100% - 50px)}.wrapper[_ngcontent-%COMP%]   .textlint__content[_ngcontent-%COMP%]:not(.dark-theme){background:#f1f1f1}.wrapper[_ngcontent-%COMP%]   .textlint__content[_ngcontent-%COMP%]   .textlint-detail__li[_ngcontent-%COMP%]{padding-bottom:5px}.wrapper[_ngcontent-%COMP%]   .textlint__content[_ngcontent-%COMP%]   .textlint-detail__li[_ngcontent-%COMP%]:hover{border-bottom:1px solid #000;cursor:pointer}"],changeDetection:0}),t})();function Gn(t,e){1&t&&(o.Sb(0,"mat-error"),o.Ac(1," Title is "),o.Sb(2,"strong"),o.Ac(3,"required"),o.Rb(),o.Rb())}function Wn(t,e){if(1&t&&(o.Sb(0,"div",21),o.Sb(1,"p"),o.Ac(2),o.ec(3,"date"),o.Rb(),o.Rb()),2&t){const t=o.dc(2);o.Bb(2),o.Cc("last update: ",o.gc(3,1,t.script.updated,"short"),"")}}function Un(t,e){if(1&t){const t=o.Tb();o.Sb(0,"div",21),o.Sb(1,"button",22),o.Zb("click",function(){return o.rc(t),o.dc(2).openHistoryDialog()}),o.Ac(2),o.Rb(),o.Rb()}if(2&t){const t=o.dc(2);o.Bb(2),o.Cc(" Histories(",t.script.revisions.length,") ")}}const Kn=function(t){return{"font-family":t}};function Xn(t,e){if(1&t){const t=o.Tb();o.Sb(0,"div",3),o.Sb(1,"div",4),o.Sb(2,"form",5),o.Sb(3,"div",6),o.Sb(4,"mat-form-field",7),o.Sb(5,"mat-label"),o.Ac(6,"Title"),o.Rb(),o.Nb(7,"input",8),o.yc(8,Gn,4,0,"mat-error",9),o.Rb(),o.Rb(),o.Sb(9,"div",6),o.Sb(10,"div",10),o.Zb("click",function(){return o.rc(t),o.dc().save()}),o.Sb(11,"mat-icon",11),o.Ac(12,"save"),o.Rb(),o.Rb(),o.Rb(),o.Rb(),o.Sb(13,"div",5),o.Sb(14,"div",10),o.Zb("click",function(){return o.rc(t),o.dc().deleteScript()}),o.Sb(15,"mat-icon",11),o.Ac(16,"inventory_2"),o.Rb(),o.Rb(),o.Rb(),o.Sb(17,"div",5),o.Sb(18,"div",10),o.Zb("click",function(){return o.rc(t),o.dc().copy2Clipboard()}),o.Sb(19,"mat-icon",11),o.Ac(20,"content_copy"),o.Rb(),o.Rb(),o.Rb(),o.Sb(21,"div",5),o.Sb(22,"button",2),o.Zb("click",function(){return o.rc(t),o.dc().navigateSubtitle()}),o.Ac(23," To subtitle "),o.Rb(),o.Rb(),o.yc(24,Wn,4,4,"div",12),o.yc(25,Un,3,1,"div",12),o.Rb(),o.Sb(26,"main",13),o.Sb(27,"div",14),o.Sb(28,"app-tool-box",15),o.Zb("fontChange",function(e){return o.rc(t),o.dc().font=e})("subtitleChange",function(e){return o.rc(t),o.dc().subtitleWidth=e}),o.Rb(),o.Rb(),o.Sb(29,"div",16),o.Nb(30,"div",17),o.Nb(31,"div",17),o.Sb(32,"quill-editor",18),o.Zb("onEditorCreated",function(e){return o.rc(t),o.dc().onEditorCreated(e)})("onContentChanged",function(e){return o.rc(t),o.dc().onContentChanged(e)})("onSelectionChanged",function(e){return o.rc(t),o.dc().onSelectionChanged(e)}),o.Rb(),o.Sb(33,"div",19),o.Nb(34,"app-console",20),o.Rb(),o.Rb(),o.Nb(35,"app-balloon",20),o.Rb(),o.Rb()}if(2&t){const t=o.dc();o.Eb("dark-theme",t.darkTheme),o.Bb(7),o.jc("formControl",t.titleFormControl),o.Bb(1),o.jc("ngIf",t.titleFormControl.hasError("required")),o.Bb(16),o.jc("ngIf",t.script.updated),o.Bb(1),o.jc("ngIf",t.script.updated),o.Bb(2),o.Eb("dark-theme",t.darkTheme),o.Bb(3),o.vc("visibility",t.showSubtitleLine("single")?"visible":"hidden")("left",t.subtitleLineLeftPx,"px"),o.Bb(1),o.vc("visibility",t.showSubtitleLine("double")?"visible":"hidden")("left",t.subtitleLineLeftPxDouble,"px"),o.Bb(1),o.Eb("dark-theme",t.darkTheme),o.jc("styles",o.lc(21,Kn,t.font)),o.Bb(2),o.jc("darkTheme",t.darkTheme),o.Bb(1),o.jc("darkTheme",t.darkTheme)}}const Qn=[{path:"",component:ze},{path:":id",component:(()=>{class t{constructor(t,e,n,i,r,o,s,c,l){this.route=t,this.router=e,this.cd=n,this.scriptService=i,this.renderer=r,this.editorService=o,this.elementRef=s,this.appService=c,this.dialog=l,this.blurred=!1,this.focused=!1,this.subtitleWidth=this.appService.subtitleWidth,this.darkTheme=!1,this.font=this.appService.font,this.titleFormControl=new a.e("",[a.u.required]),this.consolePositionTop=0,this.initialized$=new He.a(1),this.unsubscriber$=new x.a,this.autoSave$=new x.a,this.appService.darkTheme$.pipe(Object(S.a)(this.unsubscriber$)).subscribe(t=>{this.darkTheme=t,this.cd.markForCheck()});const h=this.route.snapshot.paramMap.get("id");"new"===h?(this.script=new We.a,this.initialScript=new We.a,this.cd.markForCheck(),this.initialized$.next()):this.scriptService.getScript(parseInt(h,10)).pipe(Object(S.a)(this.unsubscriber$)).subscribe(t=>{this.script=t,this.initialScript=Object($e.cloneDeep)(this.script),this.titleFormControl.setValue(this.script.title),this.cd.markForCheck(),this.initialized$.next()}),this.initialized$.pipe(Object(qe.a)(()=>this.autoSave$),Object(O.a)(3e4),Object(S.a)(this.unsubscriber$)).subscribe(()=>{this.save()})}get subtitleLineLeftPx(){return this.subtitleWidth/100*310*2+15}get subtitleLineLeftPxDouble(){return this.subtitleWidth/100*310*4+15}showSubtitleLine(t){if(!this.editorComponent)return!1;const e=this.editorComponent.elementRef.nativeElement.getBoundingClientRect().width;return"single"===t?this.subtitleLineLeftPx+15<e:this.subtitleLineLeftPxDouble+15<e}onEditorCreated(t){this.initialized$.pipe(Object(Ve.a)(),Object(S.a)(this.unsubscriber$)).subscribe(()=>{const e=t.getContents();e.ops=this.script.deltaOps,this.editorService.initialize(this.script.id,t,e)})}onContentChanged(t){this.editorService.onContentChanged(t),this.autoSave$.next()}onSelectionChanged(t){this.editorService.onSelectionChange(t)}ngOnInit(){}ngOnDestroy(){this.unsubscriber$.next()}ngAfterViewInit(){this.initialized$.pipe(Object(Ve.a)(),Object(S.a)(this.unsubscriber$)).subscribe(()=>Object(Ne.a)(this,void 0,void 0,function*(){this.cd.detectChanges(),this.registerEditorEventListener(),this.consolePositionTop=document.querySelector(".tool-box__wrapper").getBoundingClientRect().height}))}canDeactivate(){return this.script.deltaOps=this.editorService.getDelta(),!!this.script.isEqual(this.initialScript)||window.confirm("Are you sure you want to leave this page before you save this script")}save(){this.script.title=this.titleFormControl.value,this.script.deltaOps=this.editorService.getDelta(),0!==this.script.deltaOps.length&&this.script.title&&(this.script.isEqual(this.initialScript)||(this.script.id?this.scriptService.putScript(this.script).pipe(Object(S.a)(this.unsubscriber$)).subscribe(t=>{this.script=t,this.initialScript=Object($e.cloneDeep)(t),this.cd.markForCheck()}):this.scriptService.postScript(this.script).pipe(Object(S.a)(this.unsubscriber$)).subscribe(t=>{this.script=t,this.initialScript=Object($e.cloneDeep)(t),this.cd.markForCheck(),this.router.navigate([`../${t.id}`],{relativeTo:this.route})})))}copy2Clipboard(){this.renderer.createElement("div").innerHTML=this.script.deltaOps.map(t=>t.insert).join("");const t=document.createElement("textarea");t.value=this.editorService.getText(),document.body.appendChild(t),t.select(),t.setSelectionRange(0,9999),document.execCommand("copy"),document.body.removeChild(t)}deleteScript(){window.confirm("Are you sure you want to delete")&&this.scriptService.deleteScript(this.script.id).pipe(Object(S.a)(this.unsubscriber$)).subscribe(()=>{this.router.navigate(["../"],{relativeTo:this.route})})}scrollTop(){window.scroll({top:0,behavior:"smooth"}),this.editorComponent.elementRef.nativeElement.querySelector(".ql-editor").scrollTop={top:0,behavior:"smooth"}}navigateSubtitle(){const t=this.editorService.getDelta().reduce((t,e)=>{var n;return(null===(n=e.attributes)||void 0===n?void 0:n.strike)||(t+=e.insert),t},"");localStorage.setItem(Ge.a.subtitleLocalStorageKey,t),this.router.navigate(["/subtitle"])}undo(){this.editorService.undo()}redo(){this.editorService.redo()}openHistoryDialog(){this.dialog.open(ln,{data:{script:this.script,darkTheme:this.darkTheme},height:"80vh",width:"80vh"}).afterClosed().subscribe(t=>{t&&this.editorService.setDelta(t.deltaOps)})}registerEditorEventListener(){Object(Rt.a)(this.editorComponent.elementRef.nativeElement,"mouseup").pipe(Object(S.a)(this.unsubscriber$)).subscribe(t=>{this.balloonComponent.selectionChange(t);const e=t.target.closest("[data-comment-uuid]");if(e){const t=e.getAttribute("data-comment-uuid");this.editorService.focusChatMessage(t)}}),Object(Rt.a)(this.editorComponent.elementRef.nativeElement,"keydown").pipe(Object(S.a)(this.unsubscriber$)).subscribe(t=>{if(t.ctrlKey)switch(t.key){case"z":t.shiftKey?this.editorService.undo():this.editorService.redo(),t.preventDefault();break;case"s":this.autoSave$.next(),this.save(),t.preventDefault()}}),this.editorService.editorFocus$.pipe(Object(S.a)(this.unsubscriber$)).subscribe(({uuid:t,type:e})=>{let n;switch(e){case"textlint":n=this.elementRef.nativeElement.querySelector(`[data-lint-uuid="${t}"]`);break;case"comment":n=this.elementRef.nativeElement.querySelector(`[data-comment-uuid="${t}"]`)}if(!n)return;this.renderer.addClass(n,"focused");const i=this.editorComponent.elementRef.nativeElement.querySelector(".ql-editor"),r=n.offsetTop+i.offsetTop-200;i.scroll({top:r<200?0:r,behavior:"smooth"}),Object(Rt.a)(document,"click").pipe(Object(Ze.a)(1),Object(R.a)(t=>!n.contains(t.target)),Object(Ve.a)(),Object(S.a)(this.unsubscriber$)).subscribe(t=>{this.renderer.removeClass(n,"focused")})})}}return t.\u0275fac=function(e){return new(e||t)(o.Mb(Te.a),o.Mb(Te.b),o.Mb(o.h),o.Mb(nn),o.Mb(o.F),o.Mb(an),o.Mb(o.l),o.Mb(en.a),o.Mb(g.b))},t.\u0275cmp=o.Gb({type:t,selectors:[["app-script"]],viewQuery:function(t,e){if(1&t&&(o.Ec(sn,1),o.Ec(ke.a,1)),2&t){let t;o.nc(t=o.ac())&&(e.balloonComponent=t.first),o.nc(t=o.ac())&&(e.editorComponent=t.first)}},features:[o.Ab([an])],decls:4,vars:1,consts:[["class","wrapper",3,"dark-theme",4,"ngIf"],[1,"scroller"],["mat-raised-button","","color","primary",3,"click"],[1,"wrapper"],[1,"tool"],[1,"tool__item"],[1,"form__item"],["appearance","fill"],["matInput","",3,"formControl"],[4,"ngIf"],[3,"click"],[1,"svg__icon"],["class","tool__item tool__item--right",4,"ngIf"],[1,"main"],[1,"tool-box__wrapper"],[3,"fontChange","subtitleChange"],[1,"editor"],[1,"editor__subtitle-line"],[1,"editor__main",3,"styles","onEditorCreated","onContentChanged","onSelectionChanged"],[1,"console__wrapper"],[3,"darkTheme"],[1,"tool__item","tool__item--right"],["mat-stroked-button","","color","primary",3,"click"]],template:function(t,e){1&t&&(o.yc(0,Xn,36,23,"div",0),o.Sb(1,"div",1),o.Sb(2,"button",2),o.Zb("click",function(){return e.scrollTop()}),o.Ac(3,"\u2191"),o.Rb(),o.Rb()),2&t&&o.jc("ngIf",!!e.script)},directives:[r.l,s.a,a.v,a.o,a.p,T.c,T.f,m.b,a.c,a.n,a.f,f.a,_n,ke.a,Zn,sn,T.b],pipes:[r.e],styles:['.cdk-global-overlay-wrapper[_ngcontent-%COMP%], .cdk-overlay-container[_ngcontent-%COMP%]{pointer-events:none;top:0;left:0;height:100%;width:100%}.cdk-overlay-container[_ngcontent-%COMP%]{position:fixed;z-index:1000}.cdk-overlay-container[_ngcontent-%COMP%]:empty{display:none}.cdk-global-overlay-wrapper[_ngcontent-%COMP%], .cdk-overlay-pane[_ngcontent-%COMP%]{display:flex;position:absolute;z-index:1000}.cdk-overlay-pane[_ngcontent-%COMP%]{pointer-events:auto;box-sizing:border-box;max-width:100%;max-height:100%}.cdk-overlay-backdrop[_ngcontent-%COMP%]{position:absolute;top:0;bottom:0;left:0;right:0;z-index:1000;pointer-events:auto;-webkit-tap-highlight-color:transparent;transition:opacity .4s cubic-bezier(.25,.8,.25,1);opacity:0}.cdk-overlay-backdrop.cdk-overlay-backdrop-showing[_ngcontent-%COMP%]{opacity:1}.cdk-high-contrast-active[_ngcontent-%COMP%]   .cdk-overlay-backdrop.cdk-overlay-backdrop-showing[_ngcontent-%COMP%]{opacity:.6}.cdk-overlay-dark-backdrop[_ngcontent-%COMP%]{background:rgba(0,0,0,.32)}.cdk-overlay-transparent-backdrop[_ngcontent-%COMP%], .cdk-overlay-transparent-backdrop.cdk-overlay-backdrop-showing[_ngcontent-%COMP%]{opacity:0}.cdk-overlay-connected-position-bounding-box[_ngcontent-%COMP%]{position:absolute;z-index:1000;display:flex;flex-direction:column;min-width:1px;min-height:1px}.cdk-global-scrollblock[_ngcontent-%COMP%]{position:fixed;width:100%;overflow-y:scroll}body[_ngcontent-%COMP%], html[_ngcontent-%COMP%]{height:100%}body[_ngcontent-%COMP%]{margin:0;font-family:Roboto,Helvetica Neue,sans-serif}body.dark-theme[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff}body.dark-theme[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#607d8b}.wrapper[_ngcontent-%COMP%]{height:calc(100% - 65px)}.tool[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;height:70px;padding:10px;box-sizing:border-box}.tool__item[_ngcontent-%COMP%]{margin-right:20px}.tool__item--right[_ngcontent-%COMP%]{margin-left:auto}main[_ngcontent-%COMP%]{height:calc(100% - 70px);box-sizing:border-box;padding:10px}form[_ngcontent-%COMP%]{display:flex}form[_ngcontent-%COMP%]   .form__item[_ngcontent-%COMP%]{margin-right:20px}.tool-box__wrapper[_ngcontent-%COMP%]{height:60px;position:sticky;top:0;z-index:2;box-sizing:border-box;background:#fff}.tool-box__wrapper.dark-theme[_ngcontent-%COMP%]{background:#303030}.editor[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;height:calc(100% - 60px);width:100%;position:relative}.editor__subtitle-line[_ngcontent-%COMP%]{position:absolute;width:3px;height:100%;background-color:rgba(255,0,0,.2)}  .editor__main{height:100%;overflow:hidden;width:100%;box-sizing:border-box;border:1px solid #000;white-space:pre-line}@media screen and (min-width:768px){  .editor__main{width:70%}}  .editor__main .ql-toolbar{height:43px;position:relative;z-index:1;background:#fff}  .editor__main .ql-container{max-height:calc(100% - 43px);overflow:auto}  .editor__main.dark-theme .ql-toolbar{background:#303030}  .editor__main [data-comment-uuid]{position:relative;border-bottom:2px dotted green;padding-bottom:2px}  .editor__main [data-comment-uuid]:hover:after{content:attr(data-comment-message) "";position:absolute;top:20px;left:10px;z-index:25;background-color:silver;box-shadow:0 0 10px;width:200px;border:1px solid green}  .editor__main [data-comment-uuid].focused{border:5px solid green}  .editor__main [data-lint-uuid]{position:relative;border-bottom:2px dotted red}  .editor__main [data-lint-uuid]:hover:after{content:attr(data-lint-message) "";position:absolute;bottom:20px;left:10px;z-index:25;background-color:silver;box-shadow:0 0 10px;width:200px;border:1px solid red}  .editor__main [data-lint-uuid].focused{border:5px solid red}  .editor__main.dark-theme [data-comment-uuid]:hover:after,   .editor__main.dark-theme [data-lint-uuid]:hover:after{background-color:#303030}  .editor__main.dark-theme .ql-blank:before{color:#fff;opacity:.6}  .editor__main .ql-editor{padding-top:30px}  .editor__main .ql-editor p{margin:0}  .editor__main .text--highlighted{background-color:red;opacity:1}  .editor__main .text--underlined{border-bottom:2px solid orange}  .editor__main .text__tooltip-relative{position:relative}  .editor__main .text__tooltip-relative:hover .text__tooltip-absolute{display:inline-block}  .editor__main .text__tooltip-absolute{position:absolute;display:none;padding:2px;background-color:orange;left:20px;bottom:20px}.editor[_ngcontent-%COMP%]   .console__wrapper[_ngcontent-%COMP%]{width:100%;height:100%}@media screen and (min-width:768px){.editor[_ngcontent-%COMP%]   .console__wrapper[_ngcontent-%COMP%]{width:30%}}.scroller[_ngcontent-%COMP%]{position:fixed;bottom:10px;left:10px;z-index:100}.svg__icon[_ngcontent-%COMP%]{cursor:pointer}.svg__icon[_ngcontent-%COMP%]:hover{color:#3f51b5}'],changeDetection:0}),t})(),canDeactivate:[Ie]}];let Yn=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.Kb({type:t}),t.\u0275inj=o.Jb({imports:[[Te.d.forChild(Qn)],Te.d]}),t})();Oe.a.register(je),Oe.a.register(Ee),Oe.a.register("modules/cursors",Ae.a);let Jn=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.Kb({type:t}),t.\u0275inj=o.Jb({providers:[{provide:lt,useValue:ct}],imports:[[r.c,xt,a.s,a.j,T.e,m.c,Yn,s.b,we,Re.a,Ot.b,f.b,St.b,wt.b,g.f,Ct.c,kt.b,b,Mt.b,ke.b.forRoot({modules:{cursors:!0,toolbar:[["bold","italic","underline","strike"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}]]}})]]}),t})()},X607:function(t,e,n){self,t.exports=(()=>{var t={582:(t,e,n)=>{"use strict";n.d(e,{Z:()=>o});var i=n(645),r=n.n(i)()(function(t){return t[1]});r.push([t.id,".ql-container{position:relative;overflow:hidden}.ql-cursor.hidden{display:none}.ql-cursor .ql-cursor-caret-container,.ql-cursor .ql-cursor-flag{position:absolute}.ql-cursor .ql-cursor-flag{z-index:1;transform:translate3d(-1px, -100%, 0);opacity:0;visibility:hidden;color:#fff;padding-bottom:2px;border-radius:0 3px 3px 0}.ql-cursor .ql-cursor-flag.flag-flipped{border-radius:3px 0 0 3px;transform:translate3d(calc(-100% + 1px ), -100%, 0)}@media screen{.ql-cursor .ql-cursor-flag{transition:opacity 0ms cubic-bezier(0.25, 0.46, 0.45, 0.94) 0ms,visibility 0ms cubic-bezier(0.25, 0.46, 0.45, 0.94) 0ms}}.ql-cursor .ql-cursor-flag .ql-cursor-name{margin-left:5px;margin-right:5px;display:inline-block;margin-top:-2px;white-space:nowrap}.ql-cursor .ql-cursor-flag:hover,.ql-cursor .ql-cursor-flag.show-flag,.ql-cursor .ql-cursor-caret-container:hover+.ql-cursor-flag{opacity:1;visibility:visible;transition:none}.ql-cursor .ql-cursor-flag.no-delay[style]{transition-delay:unset !important}.ql-cursor .ql-cursor-caret-container{margin-left:-9px;padding:0 9px;z-index:1}.ql-cursor .ql-cursor-caret-container .ql-cursor-caret{position:absolute;top:0;bottom:0;width:2px;margin-left:-1px;background-color:attr(data-color)}.ql-cursor .ql-cursor-selection-block{position:absolute;pointer-events:none}",""]);const o=r},645:t=>{"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var n=t(e);return e[2]?"@media ".concat(e[2]," {").concat(n,"}"):n}).join("")},e.i=function(t,n,i){"string"==typeof t&&(t=[[null,t,""]]);var r={};if(i)for(var o=0;o<this.length;o++){var a=this[o][0];null!=a&&(r[a]=!0)}for(var s=0;s<t.length;s++){var c=[].concat(t[s]);i&&r[c[0]]||(n&&(c[2]=c[2]?"".concat(n," and ").concat(c[2]):n),e.push(c))}},e}},465:(t,e,n)=>{t=n.nmd(t);var i="__lodash_hash_undefined__",r=9007199254740991,o="[object Arguments]",a="[object Boolean]",s="[object Date]",c="[object Function]",l="[object GeneratorFunction]",h="[object Map]",d="[object Number]",u="[object Object]",p="[object Promise]",b="[object RegExp]",g="[object Set]",f="[object String]",m="[object Symbol]",_="[object WeakMap]",v="[object ArrayBuffer]",y="[object DataView]",x="[object Float32Array]",C="[object Float64Array]",w="[object Int8Array]",k="[object Int16Array]",S="[object Int32Array]",O="[object Uint8Array]",M="[object Uint8ClampedArray]",A="[object Uint16Array]",R="[object Uint32Array]",P=/\w*$/,j=/^\[object .+?Constructor\]$/,E=/^(?:0|[1-9]\d*)$/,T={};T[o]=T["[object Array]"]=T[v]=T[y]=T[a]=T[s]=T[x]=T[C]=T[w]=T[k]=T[S]=T[h]=T[d]=T[u]=T[b]=T[g]=T[f]=T[m]=T[O]=T[M]=T[A]=T[R]=!0,T["[object Error]"]=T[c]=T[_]=!1;var I="object"==typeof self&&self&&self.Object===Object&&self,L="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g||I||Function("return this")(),B=e&&!e.nodeType&&e,F=B&&t&&!t.nodeType&&t,D=F&&F.exports===B;function z(t,e){return t.set(e[0],e[1]),t}function N(t,e){return t.add(e),t}function $(t,e,n,i){var r=-1,o=t?t.length:0;for(i&&o&&(n=t[++r]);++r<o;)n=e(n,t[r],r,t);return n}function H(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}function q(t){var e=-1,n=Array(t.size);return t.forEach(function(t,i){n[++e]=[i,t]}),n}function V(t,e){return function(n){return t(e(n))}}function Z(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}var G,W=Array.prototype,U=Function.prototype,K=Object.prototype,X=L["__core-js_shared__"],Q=(G=/[^.]+$/.exec(X&&X.keys&&X.keys.IE_PROTO||""))?"Symbol(src)_1."+G:"",Y=U.toString,J=K.hasOwnProperty,tt=K.toString,et=RegExp("^"+Y.call(J).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),nt=D?L.Buffer:void 0,it=L.Symbol,rt=L.Uint8Array,ot=V(Object.getPrototypeOf,Object),at=Object.create,st=K.propertyIsEnumerable,ct=W.splice,lt=Object.getOwnPropertySymbols,ht=nt?nt.isBuffer:void 0,dt=V(Object.keys,Object),ut=Lt(L,"DataView"),pt=Lt(L,"Map"),bt=Lt(L,"Promise"),gt=Lt(L,"Set"),ft=Lt(L,"WeakMap"),mt=Lt(Object,"create"),_t=Nt(ut),vt=Nt(pt),yt=Nt(bt),xt=Nt(gt),Ct=Nt(ft),wt=it?it.prototype:void 0,kt=wt?wt.valueOf:void 0;function St(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function Ot(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function Mt(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function At(t){this.__data__=new Ot(t)}function Rt(t,e,n){var i=t[e];J.call(t,e)&&$t(i,n)&&(void 0!==n||e in t)||(t[e]=n)}function Pt(t,e){for(var n=t.length;n--;)if($t(t[n][0],e))return n;return-1}function jt(t,e,n,i,r,p,_){var j;if(i&&(j=p?i(t,r,p,_):i(t)),void 0!==j)return j;if(!Gt(t))return t;var E=Ht(t);if(E){if(j=function(t){var e=t.length,n=t.constructor(e);return e&&"string"==typeof t[0]&&J.call(t,"index")&&(n.index=t.index,n.input=t.input),n}(t),!e)return function(t,e){var n=-1,i=t.length;for(e||(e=Array(i));++n<i;)e[n]=t[n];return e}(t,j)}else{var I=Ft(t),L=I==c||I==l;if(Vt(t))return function(t,e){if(e)return t.slice();var n=new t.constructor(t.length);return t.copy(n),n}(t,e);if(I==u||I==o||L&&!p){if(H(t))return p?t:{};if(j=function(t){return"function"!=typeof t.constructor||zt(t)?{}:Gt(e=ot(t))?at(e):{};var e}(L?{}:t),!e)return function(t,e){return Tt(t,Bt(t),e)}(t,function(t,e){return t&&Tt(e,Wt(e),t)}(j,t))}else{if(!T[I])return p?t:{};j=function(t,e,n,i){var r=t.constructor;switch(e){case v:return Et(t);case a:case s:return new r(+t);case y:return function(t,e){var n=e?Et(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,i);case x:case C:case w:case k:case S:case O:case M:case A:case R:return function(t,e){var n=e?Et(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}(t,i);case h:return function(t,e,n){return $(e?n(q(t),!0):q(t),z,new t.constructor)}(t,i,n);case d:case f:return new r(t);case b:return function(t){var e=new t.constructor(t.source,P.exec(t));return e.lastIndex=t.lastIndex,e}(t);case g:return function(t,e,n){return $(e?n(Z(t),!0):Z(t),N,new t.constructor)}(t,i,n);case m:return kt?Object(kt.call(t)):{}}}(t,I,jt,e)}}_||(_=new At);var B=_.get(t);if(B)return B;if(_.set(t,j),!E)var F=n?function(t){return function(t,e,n){var i=e(t);return Ht(t)?i:function(t,e){for(var n=-1,i=e.length,r=t.length;++n<i;)t[r+n]=e[n];return t}(i,n(t))}(t,Wt,Bt)}(t):Wt(t);return function(t,e){for(var n=-1,i=t?t.length:0;++n<i&&!1!==e(t[n],n););}(F||t,function(r,o){F&&(r=t[o=r]),Rt(j,o,jt(r,e,n,i,o,t,_))}),j}function Et(t){var e=new t.constructor(t.byteLength);return new rt(e).set(new rt(t)),e}function Tt(t,e,n,i){n||(n={});for(var r=-1,o=e.length;++r<o;){var a=e[r],s=i?i(n[a],t[a],a,n,t):void 0;Rt(n,a,void 0===s?t[a]:s)}return n}function It(t,e){var n,i,r=t.__data__;return("string"==(i=typeof(n=e))||"number"==i||"symbol"==i||"boolean"==i?"__proto__"!==n:null===n)?r["string"==typeof e?"string":"hash"]:r.map}function Lt(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return function(t){return!(!Gt(t)||(e=t,Q&&Q in e))&&(Zt(t)||H(t)?et:j).test(Nt(t));var e}(n)?n:void 0}St.prototype.clear=function(){this.__data__=mt?mt(null):{}},St.prototype.delete=function(t){return this.has(t)&&delete this.__data__[t]},St.prototype.get=function(t){var e=this.__data__;if(mt){var n=e[t];return n===i?void 0:n}return J.call(e,t)?e[t]:void 0},St.prototype.has=function(t){var e=this.__data__;return mt?void 0!==e[t]:J.call(e,t)},St.prototype.set=function(t,e){return this.__data__[t]=mt&&void 0===e?i:e,this},Ot.prototype.clear=function(){this.__data__=[]},Ot.prototype.delete=function(t){var e=this.__data__,n=Pt(e,t);return!(n<0||(n==e.length-1?e.pop():ct.call(e,n,1),0))},Ot.prototype.get=function(t){var e=this.__data__,n=Pt(e,t);return n<0?void 0:e[n][1]},Ot.prototype.has=function(t){return Pt(this.__data__,t)>-1},Ot.prototype.set=function(t,e){var n=this.__data__,i=Pt(n,t);return i<0?n.push([t,e]):n[i][1]=e,this},Mt.prototype.clear=function(){this.__data__={hash:new St,map:new(pt||Ot),string:new St}},Mt.prototype.delete=function(t){return It(this,t).delete(t)},Mt.prototype.get=function(t){return It(this,t).get(t)},Mt.prototype.has=function(t){return It(this,t).has(t)},Mt.prototype.set=function(t,e){return It(this,t).set(t,e),this},At.prototype.clear=function(){this.__data__=new Ot},At.prototype.delete=function(t){return this.__data__.delete(t)},At.prototype.get=function(t){return this.__data__.get(t)},At.prototype.has=function(t){return this.__data__.has(t)},At.prototype.set=function(t,e){var n=this.__data__;if(n instanceof Ot){var i=n.__data__;if(!pt||i.length<199)return i.push([t,e]),this;n=this.__data__=new Mt(i)}return n.set(t,e),this};var Bt=lt?V(lt,Object):function(){return[]},Ft=function(t){return tt.call(t)};function Dt(t,e){return!!(e=null==e?r:e)&&("number"==typeof t||E.test(t))&&t>-1&&t%1==0&&t<e}function zt(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||K)}function Nt(t){if(null!=t){try{return Y.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function $t(t,e){return t===e||t!=t&&e!=e}(ut&&Ft(new ut(new ArrayBuffer(1)))!=y||pt&&Ft(new pt)!=h||bt&&Ft(bt.resolve())!=p||gt&&Ft(new gt)!=g||ft&&Ft(new ft)!=_)&&(Ft=function(t){var e=tt.call(t),n=e==u?t.constructor:void 0,i=n?Nt(n):void 0;if(i)switch(i){case _t:return y;case vt:return h;case yt:return p;case xt:return g;case Ct:return _}return e});var Ht=Array.isArray;function qt(t){return null!=t&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=r}(t.length)&&!Zt(t)}var Vt=ht||function(){return!1};function Zt(t){var e=Gt(t)?tt.call(t):"";return e==c||e==l}function Gt(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function Wt(t){return qt(t)?function(t,e){var n=Ht(t)||function(t){return function(t){return function(t){return!!t&&"object"==typeof t}(t)&&qt(t)}(t)&&J.call(t,"callee")&&(!st.call(t,"callee")||tt.call(t)==o)}(t)?function(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i}(t.length,String):[],i=n.length,r=!!i;for(var a in t)!J.call(t,a)||r&&("length"==a||Dt(a,i))||n.push(a);return n}(t):function(t){if(!zt(t))return dt(t);var e=[];for(var n in Object(t))J.call(t,n)&&"constructor"!=n&&e.push(n);return e}(t)}t.exports=function(t){return jt(t,!0,!0)}},307:(t,e,n)=>{t=n.nmd(t);var i="__lodash_hash_undefined__",r=9007199254740991,o="[object Arguments]",a="[object Array]",s="[object Boolean]",c="[object Date]",l="[object Error]",h="[object Function]",d="[object Map]",u="[object Number]",p="[object Object]",b="[object Promise]",g="[object RegExp]",f="[object Set]",m="[object String]",_="[object WeakMap]",v="[object ArrayBuffer]",y="[object DataView]",x=/^\[object .+?Constructor\]$/,C=/^(?:0|[1-9]\d*)$/,w={};w["[object Float32Array]"]=w["[object Float64Array]"]=w["[object Int8Array]"]=w["[object Int16Array]"]=w["[object Int32Array]"]=w["[object Uint8Array]"]=w["[object Uint8ClampedArray]"]=w["[object Uint16Array]"]=w["[object Uint32Array]"]=!0,w[o]=w[a]=w[v]=w[s]=w[y]=w[c]=w[l]=w[h]=w[d]=w[u]=w[p]=w[g]=w[f]=w[m]=w[_]=!1;var k="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,S="object"==typeof self&&self&&self.Object===Object&&self,O=k||S||Function("return this")(),M=e&&!e.nodeType&&e,A=M&&t&&!t.nodeType&&t,R=A&&A.exports===M,P=R&&k.process,j=function(){try{return P&&P.binding&&P.binding("util")}catch(t){}}(),E=j&&j.isTypedArray;function T(t,e){for(var n=-1,i=null==t?0:t.length;++n<i;)if(e(t[n],n,t))return!0;return!1}function I(t){var e=-1,n=Array(t.size);return t.forEach(function(t,i){n[++e]=[i,t]}),n}function L(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}var B,F,D,z=Array.prototype,N=Object.prototype,$=O["__core-js_shared__"],H=Function.prototype.toString,q=N.hasOwnProperty,V=(B=/[^.]+$/.exec($&&$.keys&&$.keys.IE_PROTO||""))?"Symbol(src)_1."+B:"",Z=N.toString,G=RegExp("^"+H.call(q).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),W=R?O.Buffer:void 0,U=O.Symbol,K=O.Uint8Array,X=N.propertyIsEnumerable,Q=z.splice,Y=U?U.toStringTag:void 0,J=Object.getOwnPropertySymbols,tt=W?W.isBuffer:void 0,et=(F=Object.keys,D=Object,function(t){return F(D(t))}),nt=Mt(O,"DataView"),it=Mt(O,"Map"),rt=Mt(O,"Promise"),ot=Mt(O,"Set"),at=Mt(O,"WeakMap"),st=Mt(Object,"create"),ct=jt(nt),lt=jt(it),ht=jt(rt),dt=jt(ot),ut=jt(at),pt=U?U.prototype:void 0,bt=pt?pt.valueOf:void 0;function gt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function ft(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function mt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function _t(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new mt;++e<n;)this.add(t[e])}function vt(t){var e=this.__data__=new ft(t);this.size=e.size}function yt(t,e){for(var n=t.length;n--;)if(Et(t[n][0],e))return n;return-1}function xt(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":Y&&Y in Object(t)?function(t){var e=q.call(t,Y),n=t[Y];try{t[Y]=void 0;var i=!0}catch(t){}var r=Z.call(t);return i&&(e?t[Y]=n:delete t[Y]),r}(t):function(t){return Z.call(t)}(t)}function Ct(t){return zt(t)&&xt(t)==o}function wt(t,e,n,i,r){return t===e||(null==t||null==e||!zt(t)&&!zt(e)?t!=t&&e!=e:function(t,e,n,i,r,h){var b=It(t),_=It(e),x=b?a:Rt(t),C=_?a:Rt(e),w=(x=x==o?p:x)==p,k=(C=C==o?p:C)==p,S=x==C;if(S&&Lt(t)){if(!Lt(e))return!1;b=!0,w=!1}if(S&&!w)return h||(h=new vt),b||Nt(t)?kt(t,e,n,i,r,h):function(t,e,n,i,r,o,a){switch(n){case y:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case v:return!(t.byteLength!=e.byteLength||!o(new K(t),new K(e)));case s:case c:case u:return Et(+t,+e);case l:return t.name==e.name&&t.message==e.message;case g:case m:return t==e+"";case d:var h=I;case f:if(h||(h=L),t.size!=e.size&&!(1&i))return!1;var p=a.get(t);if(p)return p==e;i|=2,a.set(t,e);var b=kt(h(t),h(e),i,r,o,a);return a.delete(t),b;case"[object Symbol]":if(bt)return bt.call(t)==bt.call(e)}return!1}(t,e,x,n,i,r,h);if(!(1&n)){var O=w&&q.call(t,"__wrapped__"),M=k&&q.call(e,"__wrapped__");if(O||M){var A=O?t.value():t,R=M?e.value():e;return h||(h=new vt),r(A,R,n,i,h)}}return!!S&&(h||(h=new vt),function(t,e,n,i,r,o){var a=1&n,s=St(t),c=s.length;if(c!=St(e).length&&!a)return!1;for(var l=c;l--;){var h=s[l];if(!(a?h in e:q.call(e,h)))return!1}var d=o.get(t);if(d&&o.get(e))return d==e;var u=!0;o.set(t,e),o.set(e,t);for(var p=a;++l<c;){var b=t[h=s[l]],g=e[h];if(i)var f=a?i(g,b,h,e,t,o):i(b,g,h,t,e,o);if(!(void 0===f?b===g||r(b,g,n,i,o):f)){u=!1;break}p||(p="constructor"==h)}if(u&&!p){var m=t.constructor,_=e.constructor;m==_||!("constructor"in t)||!("constructor"in e)||"function"==typeof m&&m instanceof m&&"function"==typeof _&&_ instanceof _||(u=!1)}return o.delete(t),o.delete(e),u}(t,e,n,i,r,h))}(t,e,n,i,wt,r))}function kt(t,e,n,i,r,o){var a=1&n,s=t.length,c=e.length;if(s!=c&&!(a&&c>s))return!1;var l=o.get(t);if(l&&o.get(e))return l==e;var h=-1,d=!0,u=2&n?new _t:void 0;for(o.set(t,e),o.set(e,t);++h<s;){var p=t[h],b=e[h];if(i)var g=a?i(b,p,h,e,t,o):i(p,b,h,t,e,o);if(void 0!==g){if(g)continue;d=!1;break}if(u){if(!T(e,function(t,e){if(!u.has(e)&&(p===t||r(p,t,n,i,o)))return u.push(e)})){d=!1;break}}else if(p!==b&&!r(p,b,n,i,o)){d=!1;break}}return o.delete(t),o.delete(e),d}function St(t){return function(t,e,n){var i=e(t);return It(t)?i:function(t,e){for(var n=-1,i=e.length,r=t.length;++n<i;)t[r+n]=e[n];return t}(i,n(t))}(t,$t,At)}function Ot(t,e){var n,i,r=t.__data__;return("string"==(i=typeof(n=e))||"number"==i||"symbol"==i||"boolean"==i?"__proto__"!==n:null===n)?r["string"==typeof e?"string":"hash"]:r.map}function Mt(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return function(t){return!(!Dt(t)||function(t){return!!V&&V in t}(t))&&(Bt(t)?G:x).test(jt(t))}(n)?n:void 0}gt.prototype.clear=function(){this.__data__=st?st(null):{},this.size=0},gt.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},gt.prototype.get=function(t){var e=this.__data__;if(st){var n=e[t];return n===i?void 0:n}return q.call(e,t)?e[t]:void 0},gt.prototype.has=function(t){var e=this.__data__;return st?void 0!==e[t]:q.call(e,t)},gt.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=st&&void 0===e?i:e,this},ft.prototype.clear=function(){this.__data__=[],this.size=0},ft.prototype.delete=function(t){var e=this.__data__,n=yt(e,t);return!(n<0||(n==e.length-1?e.pop():Q.call(e,n,1),--this.size,0))},ft.prototype.get=function(t){var e=this.__data__,n=yt(e,t);return n<0?void 0:e[n][1]},ft.prototype.has=function(t){return yt(this.__data__,t)>-1},ft.prototype.set=function(t,e){var n=this.__data__,i=yt(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this},mt.prototype.clear=function(){this.size=0,this.__data__={hash:new gt,map:new(it||ft),string:new gt}},mt.prototype.delete=function(t){var e=Ot(this,t).delete(t);return this.size-=e?1:0,e},mt.prototype.get=function(t){return Ot(this,t).get(t)},mt.prototype.has=function(t){return Ot(this,t).has(t)},mt.prototype.set=function(t,e){var n=Ot(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this},_t.prototype.add=_t.prototype.push=function(t){return this.__data__.set(t,i),this},_t.prototype.has=function(t){return this.__data__.has(t)},vt.prototype.clear=function(){this.__data__=new ft,this.size=0},vt.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},vt.prototype.get=function(t){return this.__data__.get(t)},vt.prototype.has=function(t){return this.__data__.has(t)},vt.prototype.set=function(t,e){var n=this.__data__;if(n instanceof ft){var i=n.__data__;if(!it||i.length<199)return i.push([t,e]),this.size=++n.size,this;n=this.__data__=new mt(i)}return n.set(t,e),this.size=n.size,this};var At=J?function(t){return null==t?[]:(t=Object(t),function(e,n){for(var i=-1,r=null==e?0:e.length,o=0,a=[];++i<r;){var s=e[i];X.call(t,s)&&(a[o++]=s)}return a}(J(t)))}:function(){return[]},Rt=xt;function Pt(t,e){return!!(e=null==e?r:e)&&("number"==typeof t||C.test(t))&&t>-1&&t%1==0&&t<e}function jt(t){if(null!=t){try{return H.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Et(t,e){return t===e||t!=t&&e!=e}(nt&&Rt(new nt(new ArrayBuffer(1)))!=y||it&&Rt(new it)!=d||rt&&Rt(rt.resolve())!=b||ot&&Rt(new ot)!=f||at&&Rt(new at)!=_)&&(Rt=function(t){var e=xt(t),n=e==p?t.constructor:void 0,i=n?jt(n):"";if(i)switch(i){case ct:return y;case lt:return d;case ht:return b;case dt:return f;case ut:return _}return e});var Tt=Ct(function(){return arguments}())?Ct:function(t){return zt(t)&&q.call(t,"callee")&&!X.call(t,"callee")},It=Array.isArray,Lt=tt||function(){return!1};function Bt(t){if(!Dt(t))return!1;var e=xt(t);return e==h||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}function Ft(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=r}function Dt(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function zt(t){return null!=t&&"object"==typeof t}var Nt=E?function(t){return function(e){return t(e)}}(E):function(t){return zt(t)&&Ft(t.length)&&!!w[xt(t)]};function $t(t){return null!=(e=t)&&Ft(e.length)&&!Bt(e)?function(t,e){var n=It(t),i=!n&&Tt(t),r=!n&&!i&&Lt(t),o=!n&&!i&&!r&&Nt(t),a=n||i||r||o,s=a?function(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i}(t.length,String):[],c=s.length;for(var l in t)!q.call(t,l)||a&&("length"==l||r&&("offset"==l||"parent"==l)||o&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||Pt(l,c))||s.push(l);return s}(t):function(t){if(n=(e=t)&&e.constructor,e!==("function"==typeof n&&n.prototype||N))return et(t);var e,n,i=[];for(var r in Object(t))q.call(t,r)&&"constructor"!=r&&i.push(r);return i}(t);var e}t.exports=function(t,e){return wt(t,e)}},210:function(t,e,n){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var r,o=i(n(465)),a=i(n(307));!function(t){t.compose=function(t,e,n){void 0===t&&(t={}),void 0===e&&(e={}),"object"!=typeof t&&(t={}),"object"!=typeof e&&(e={});var i=o.default(e);for(var r in n||(i=Object.keys(i).reduce(function(t,e){return null!=i[e]&&(t[e]=i[e]),t},{})),t)void 0!==t[r]&&void 0===e[r]&&(i[r]=t[r]);return Object.keys(i).length>0?i:void 0},t.diff=function(t,e){void 0===t&&(t={}),void 0===e&&(e={}),"object"!=typeof t&&(t={}),"object"!=typeof e&&(e={});var n=Object.keys(t).concat(Object.keys(e)).reduce(function(n,i){return a.default(t[i],e[i])||(n[i]=void 0===e[i]?null:e[i]),n},{});return Object.keys(n).length>0?n:void 0},t.invert=function(t,e){void 0===t&&(t={}),void 0===e&&(e={}),t=t||{};var n=Object.keys(e).reduce(function(n,i){return e[i]!==t[i]&&void 0!==t[i]&&(n[i]=e[i]),n},{});return Object.keys(t).reduce(function(n,i){return t[i]!==e[i]&&void 0===e[i]&&(n[i]=null),n},n)},t.transform=function(t,e,n){if(void 0===n&&(n=!1),"object"!=typeof t)return e;if("object"==typeof e){if(!n)return e;var i=Object.keys(e).reduce(function(n,i){return void 0===t[i]&&(n[i]=e[i]),n},{});return Object.keys(i).length>0?i:void 0}}}(r||(r={})),e.default=r},895:function(t,e,n){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},r=i(n(103)),o=i(n(465)),a=i(n(307)),s=i(n(210)),c=i(n(430)),l=String.fromCharCode(0),h=function(){function t(t){this.ops=Array.isArray(t)?t:null!=t&&Array.isArray(t.ops)?t.ops:[]}return t.prototype.insert=function(t,e){var n={};return"string"==typeof t&&0===t.length?this:(n.insert=t,null!=e&&"object"==typeof e&&Object.keys(e).length>0&&(n.attributes=e),this.push(n))},t.prototype.delete=function(t){return t<=0?this:this.push({delete:t})},t.prototype.retain=function(t,e){if(t<=0)return this;var n={retain:t};return null!=e&&"object"==typeof e&&Object.keys(e).length>0&&(n.attributes=e),this.push(n)},t.prototype.push=function(t){var e=this.ops.length,n=this.ops[e-1];if(t=o.default(t),"object"==typeof n){if("number"==typeof t.delete&&"number"==typeof n.delete)return this.ops[e-1]={delete:n.delete+t.delete},this;if("number"==typeof n.delete&&null!=t.insert&&"object"!=typeof(n=this.ops[(e-=1)-1]))return this.ops.unshift(t),this;if(a.default(t.attributes,n.attributes)){if("string"==typeof t.insert&&"string"==typeof n.insert)return this.ops[e-1]={insert:n.insert+t.insert},"object"==typeof t.attributes&&(this.ops[e-1].attributes=t.attributes),this;if("number"==typeof t.retain&&"number"==typeof n.retain)return this.ops[e-1]={retain:n.retain+t.retain},"object"==typeof t.attributes&&(this.ops[e-1].attributes=t.attributes),this}}return e===this.ops.length?this.ops.push(t):this.ops.splice(e,0,t),this},t.prototype.chop=function(){var t=this.ops[this.ops.length-1];return t&&t.retain&&!t.attributes&&this.ops.pop(),this},t.prototype.filter=function(t){return this.ops.filter(t)},t.prototype.forEach=function(t){this.ops.forEach(t)},t.prototype.map=function(t){return this.ops.map(t)},t.prototype.partition=function(t){var e=[],n=[];return this.forEach(function(i){(t(i)?e:n).push(i)}),[e,n]},t.prototype.reduce=function(t,e){return this.ops.reduce(t,e)},t.prototype.changeLength=function(){return this.reduce(function(t,e){return e.insert?t+c.default.length(e):e.delete?t-e.delete:t},0)},t.prototype.length=function(){return this.reduce(function(t,e){return t+c.default.length(e)},0)},t.prototype.slice=function(e,n){void 0===e&&(e=0),void 0===n&&(n=1/0);for(var i=[],r=c.default.iterator(this.ops),o=0;o<n&&r.hasNext();){var a=void 0;o<e?a=r.next(e-o):(a=r.next(n-o),i.push(a)),o+=c.default.length(a)}return new t(i)},t.prototype.compose=function(e){var n=c.default.iterator(this.ops),i=c.default.iterator(e.ops),r=[],o=i.peek();if(null!=o&&"number"==typeof o.retain&&null==o.attributes){for(var l=o.retain;"insert"===n.peekType()&&n.peekLength()<=l;)l-=n.peekLength(),r.push(n.next());o.retain-l>0&&i.next(o.retain-l)}for(var h=new t(r);n.hasNext()||i.hasNext();)if("insert"===i.peekType())h.push(i.next());else if("delete"===n.peekType())h.push(n.next());else{var d=Math.min(n.peekLength(),i.peekLength()),u=n.next(d),p=i.next(d);if("number"==typeof p.retain){var b={};"number"==typeof u.retain?b.retain=d:b.insert=u.insert;var g=s.default.compose(u.attributes,p.attributes,"number"==typeof u.retain);if(g&&(b.attributes=g),h.push(b),!i.hasNext()&&a.default(h.ops[h.ops.length-1],b)){var f=new t(n.rest());return h.concat(f).chop()}}else"number"==typeof p.delete&&"number"==typeof u.retain&&h.push(p)}return h.chop()},t.prototype.concat=function(e){var n=new t(this.ops.slice());return e.ops.length>0&&(n.push(e.ops[0]),n.ops=n.ops.concat(e.ops.slice(1))),n},t.prototype.diff=function(e,n){if(this.ops===e.ops)return new t;var i=[this,e].map(function(t){return t.map(function(n){if(null!=n.insert)return"string"==typeof n.insert?n.insert:l;throw new Error("diff() called "+(t===e?"on":"with")+" non-document")}).join("")}),o=new t,h=r.default(i[0],i[1],n),d=c.default.iterator(this.ops),u=c.default.iterator(e.ops);return h.forEach(function(t){for(var e=t[1].length;e>0;){var n=0;switch(t[0]){case r.default.INSERT:n=Math.min(u.peekLength(),e),o.push(u.next(n));break;case r.default.DELETE:n=Math.min(e,d.peekLength()),d.next(n),o.delete(n);break;case r.default.EQUAL:n=Math.min(d.peekLength(),u.peekLength(),e);var i=d.next(n),c=u.next(n);a.default(i.insert,c.insert)?o.retain(n,s.default.diff(i.attributes,c.attributes)):o.push(c).delete(n)}e-=n}}),o.chop()},t.prototype.eachLine=function(e,n){void 0===n&&(n="\n");for(var i=c.default.iterator(this.ops),r=new t,o=0;i.hasNext();){if("insert"!==i.peekType())return;var a=i.peek(),s=c.default.length(a)-i.peekLength(),l="string"==typeof a.insert?a.insert.indexOf(n,s)-s:-1;if(l<0)r.push(i.next());else if(l>0)r.push(i.next(l));else{if(!1===e(r,i.next(1).attributes||{},o))return;o+=1,r=new t}}r.length()>0&&e(r,{},o)},t.prototype.invert=function(e){var n=new t;return this.reduce(function(t,i){if(i.insert)n.delete(c.default.length(i));else{if(i.retain&&null==i.attributes)return n.retain(i.retain),t+i.retain;if(i.delete||i.retain&&i.attributes){var r=i.delete||i.retain;return e.slice(t,t+r).forEach(function(t){i.delete?n.push(t):i.retain&&i.attributes&&n.retain(c.default.length(t),s.default.invert(i.attributes,t.attributes))}),t+r}}return t},0),n.chop()},t.prototype.transform=function(e,n){if(void 0===n&&(n=!1),n=!!n,"number"==typeof e)return this.transformPosition(e,n);for(var i=e,r=c.default.iterator(this.ops),o=c.default.iterator(i.ops),a=new t;r.hasNext()||o.hasNext();)if("insert"!==r.peekType()||!n&&"insert"===o.peekType())if("insert"===o.peekType())a.push(o.next());else{var l=Math.min(r.peekLength(),o.peekLength()),h=r.next(l),d=o.next(l);if(h.delete)continue;d.delete?a.push(d):a.retain(l,s.default.transform(h.attributes,d.attributes,n))}else a.retain(c.default.length(r.next()));return a.chop()},t.prototype.transformPosition=function(t,e){void 0===e&&(e=!1),e=!!e;for(var n=c.default.iterator(this.ops),i=0;n.hasNext()&&i<=t;){var r=n.peekLength(),o=n.peekType();n.next(),"delete"!==o?("insert"===o&&(i<t||!e)&&(t+=r),i+=r):t-=Math.min(r,t-i)}return t},t.Op=c.default,t.AttributeMap=s.default,t}();t.exports=h},977:function(t,e,n){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var r=i(n(430)),o=function(){function t(t){this.ops=t,this.index=0,this.offset=0}return t.prototype.hasNext=function(){return this.peekLength()<1/0},t.prototype.next=function(t){t||(t=1/0);var e=this.ops[this.index];if(e){var n=this.offset,i=r.default.length(e);if(t>=i-n?(t=i-n,this.index+=1,this.offset=0):this.offset+=t,"number"==typeof e.delete)return{delete:t};var o={};return e.attributes&&(o.attributes=e.attributes),"number"==typeof e.retain?o.retain=t:o.insert="string"==typeof e.insert?e.insert.substr(n,t):e.insert,o}return{retain:1/0}},t.prototype.peek=function(){return this.ops[this.index]},t.prototype.peekLength=function(){return this.ops[this.index]?r.default.length(this.ops[this.index])-this.offset:1/0},t.prototype.peekType=function(){return this.ops[this.index]?"number"==typeof this.ops[this.index].delete?"delete":"number"==typeof this.ops[this.index].retain?"retain":"insert":"retain"},t.prototype.rest=function(){if(this.hasNext()){if(0===this.offset)return this.ops.slice(this.index);var t=this.offset,e=this.index,n=this.next(),i=this.ops.slice(this.index);return this.offset=t,this.index=e,[n].concat(i)}return[]},t}();e.default=o},430:function(t,e,n){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var r,o=i(n(977));!function(t){t.iterator=function(t){return new o.default(t)},t.length=function(t){return"number"==typeof t.delete?t.delete:"number"==typeof t.retain?t.retain:"string"==typeof t.insert?t.insert.length:1}}(r||(r={})),e.default=r},103:t=>{var e=-1;function n(t,s,c,l){if(t===s)return t?[[0,t]]:[];if(null!=c){var h=function(t,e,n){var i="number"==typeof n?{index:n,length:0}:n.oldRange,r="number"==typeof n?null:n.newRange,o=t.length,a=e.length;if(0===i.length&&(null===r||0===r.length)){var s=i.index,c=t.slice(0,s),l=t.slice(s),h=r?r.index:null,u=s+a-o;if((null===h||h===u)&&!(u<0||u>a)){var p=e.slice(0,u);if((f=e.slice(u))===l){var b=Math.min(s,u);if((_=c.slice(0,b))===(y=p.slice(0,b)))return d(_,c.slice(b),p.slice(b),l)}}if(null===h||h===s){var g=s,f=(p=e.slice(0,g),e.slice(g));if(p===c){var m=Math.min(o-g,a-g);if((v=l.slice(l.length-m))===(x=f.slice(f.length-m)))return d(c,l.slice(0,l.length-m),f.slice(0,f.length-m),v)}}}if(i.length>0&&r&&0===r.length){var _=t.slice(0,i.index),v=t.slice(i.index+i.length);if(!(a<(b=_.length)+(m=v.length))){var y=e.slice(0,b),x=e.slice(a-m);if(_===y&&v===x)return d(_,t.slice(b,o-m),e.slice(b,a-m),v)}}return null}(t,s,c);if(h)return h}var u=r(t,s),p=t.substring(0,u);u=o(t=t.substring(u),s=s.substring(u));var b=t.substring(t.length-u),g=function(t,a){var s;if(!t)return[[1,a]];if(!a)return[[e,t]];var c=t.length>a.length?t:a,l=t.length>a.length?a:t,h=c.indexOf(l);if(-1!==h)return s=[[1,c.substring(0,h)],[0,l],[1,c.substring(h+l.length)]],t.length>a.length&&(s[0][0]=s[2][0]=e),s;if(1===l.length)return[[e,t],[1,a]];var d=function(t,e){var n=t.length>e.length?t:e,i=t.length>e.length?e:t;if(n.length<4||2*i.length<n.length)return null;function a(t,e,n){for(var i,a,s,c,l=t.substring(n,n+Math.floor(t.length/4)),h=-1,d="";-1!==(h=e.indexOf(l,h+1));){var u=r(t.substring(n),e.substring(h)),p=o(t.substring(0,n),e.substring(0,h));d.length<p+u&&(d=e.substring(h-p,h)+e.substring(h,h+u),i=t.substring(0,n-p),a=t.substring(n+u),s=e.substring(0,h-p),c=e.substring(h+u))}return 2*d.length>=t.length?[i,a,s,c,d]:null}var s,c,l,h,d,u=a(n,i,Math.ceil(n.length/4)),p=a(n,i,Math.ceil(n.length/2));return u||p?(s=p?u&&u[4].length>p[4].length?u:p:u,t.length>e.length?(c=s[0],l=s[1],h=s[2],d=s[3]):(h=s[0],d=s[1],c=s[2],l=s[3]),[c,l,h,d,s[4]]):null}(t,a);if(d){var u=d[1],p=d[3],b=d[4],g=n(d[0],d[2]),f=n(u,p);return g.concat([[0,b]],f)}return function(t,n){for(var r=t.length,o=n.length,a=Math.ceil((r+o)/2),s=a,c=2*a,l=new Array(c),h=new Array(c),d=0;d<c;d++)l[d]=-1,h[d]=-1;l[s+1]=0,h[s+1]=0;for(var u=r-o,p=u%2!=0,b=0,g=0,f=0,m=0,_=0;_<a;_++){for(var v=-_+b;v<=_-g;v+=2){for(var y=s+v,x=(O=v===-_||v!==_&&l[y-1]<l[y+1]?l[y+1]:l[y-1]+1)-v;O<r&&x<o&&t.charAt(O)===n.charAt(x);)O++,x++;if(l[y]=O,O>r)g+=2;else if(x>o)b+=2;else if(p&&(k=s+u-v)>=0&&k<c&&-1!==h[k]&&O>=(w=r-h[k]))return i(t,n,O,x)}for(var C=-_+f;C<=_-m;C+=2){for(var w,k=s+C,S=(w=C===-_||C!==_&&h[k-1]<h[k+1]?h[k+1]:h[k-1]+1)-C;w<r&&S<o&&t.charAt(r-w-1)===n.charAt(o-S-1);)w++,S++;if(h[k]=w,w>r)m+=2;else if(S>o)f+=2;else if(!p){var O;if((y=s+u-C)>=0&&y<c&&-1!==l[y]&&(x=s+(O=l[y])-y,O>=(w=r-w)))return i(t,n,O,x)}}}return[[e,t],[1,n]]}(t,a)}(t=t.substring(0,t.length-u),s=s.substring(0,s.length-u));return p&&g.unshift([0,p]),b&&g.push([0,b]),a(g,l),g}function i(t,e,i,r){var o=t.substring(0,i),a=e.substring(0,r),s=t.substring(i),c=e.substring(r),l=n(o,a),h=n(s,c);return l.concat(h)}function r(t,e){if(!t||!e||t.charAt(0)!==e.charAt(0))return 0;for(var n=0,i=Math.min(t.length,e.length),r=i,o=0;n<r;)t.substring(o,r)==e.substring(o,r)?o=n=r:i=r,r=Math.floor((i-n)/2+n);return s(t.charCodeAt(r-1))&&r--,r}function o(t,e){if(!t||!e||t.slice(-1)!==e.slice(-1))return 0;for(var n=0,i=Math.min(t.length,e.length),r=i,o=0;n<r;)t.substring(t.length-r,t.length-o)==e.substring(e.length-r,e.length-o)?o=n=r:i=r,r=Math.floor((i-n)/2+n);return c(t.charCodeAt(t.length-r))&&r--,r}function a(t,n){t.push([0,""]);for(var i,s=0,c=0,d=0,u="",p="";s<t.length;)if(s<t.length-1&&!t[s][1])t.splice(s,1);else switch(t[s][0]){case 1:d++,p+=t[s][1],s++;break;case e:c++,u+=t[s][1],s++;break;case 0:var b=s-d-c-1;if(n){if(b>=0&&h(t[b][1])){var g=t[b][1].slice(-1);if(t[b][1]=t[b][1].slice(0,-1),u=g+u,p=g+p,!t[b][1]){t.splice(b,1),s--;var f=b-1;t[f]&&1===t[f][0]&&(d++,p=t[f][1]+p,f--),t[f]&&t[f][0]===e&&(c++,u=t[f][1]+u,f--),b=f}}l(t[s][1])&&(g=t[s][1].charAt(0),t[s][1]=t[s][1].slice(1),u+=g,p+=g)}if(s<t.length-1&&!t[s][1]){t.splice(s,1);break}if(u.length>0||p.length>0){u.length>0&&p.length>0&&(0!==(i=r(p,u))&&(b>=0?t[b][1]+=p.substring(0,i):(t.splice(0,0,[0,p.substring(0,i)]),s++),p=p.substring(i),u=u.substring(i)),0!==(i=o(p,u))&&(t[s][1]=p.substring(p.length-i)+t[s][1],p=p.substring(0,p.length-i),u=u.substring(0,u.length-i)));var m=d+c;0===u.length&&0===p.length?(t.splice(s-m,m),s-=m):0===u.length?(t.splice(s-m,m,[1,p]),s=s-m+1):0===p.length?(t.splice(s-m,m,[e,u]),s=s-m+1):(t.splice(s-m,m,[e,u],[1,p]),s=s-m+2)}0!==s&&0===t[s-1][0]?(t[s-1][1]+=t[s][1],t.splice(s,1)):s++,d=0,c=0,u="",p=""}""===t[t.length-1][1]&&t.pop();var _=!1;for(s=1;s<t.length-1;)0===t[s-1][0]&&0===t[s+1][0]&&(t[s][1].substring(t[s][1].length-t[s-1][1].length)===t[s-1][1]?(t[s][1]=t[s-1][1]+t[s][1].substring(0,t[s][1].length-t[s-1][1].length),t[s+1][1]=t[s-1][1]+t[s+1][1],t.splice(s-1,1),_=!0):t[s][1].substring(0,t[s+1][1].length)==t[s+1][1]&&(t[s-1][1]+=t[s+1][1],t[s][1]=t[s][1].substring(t[s+1][1].length)+t[s+1][1],t.splice(s+1,1),_=!0)),s++;_&&a(t,n)}function s(t){return t>=55296&&t<=56319}function c(t){return t>=56320&&t<=57343}function l(t){return c(t.charCodeAt(0))}function h(t){return s(t.charCodeAt(t.length-1))}function d(t,n,i,r){return h(t)||l(r)?null:function(t){for(var e=[],n=0;n<t.length;n++)t[n][1].length>0&&e.push(t[n]);return e}([[0,t],[e,n],[1,i],[0,r]])}function u(t,e,i){return n(t,e,i,!0)}u.INSERT=1,u.DELETE=e,u.EQUAL=0,t.exports=u},165:function(t,e,n){var i,r;void 0===(r="function"==typeof(i=function(){var t,e={};function n(t){var e;return t?screen.deviceXDPI===screen.logicalXDPI?t:"length"in t?Array.prototype.map.call(t,n):(e=screen.deviceXDPI/screen.logicalXDPI,{top:t.top/e,bottom:t.bottom/e,left:t.left/e,right:t.right/e,width:t.width/e,height:t.height/e}):t}function i(t,e){var n,i=0,r=1024;if(r>=e.length)return Array.prototype.push.apply(t,e);for(;i<e.length;)n=Array.prototype.push.apply(t,Array.prototype.slice.call(e,i,i+r)),i+=r;return n}return e.isBroken=function(){var e,n,i,r,o,a,s,c;return void 0===t&&(n=document.createElement("p"),i=document.createElement("span"),r=document.createTextNode("aa"),o=document.createTextNode("aa"),(a=document.createElement("img")).setAttribute("src","data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="),s=document.createRange(),t={},n.appendChild(r),n.appendChild(i),i.appendChild(a),i.appendChild(o),document.body.appendChild(n),s.setStart(r,1),s.setEnd(i,0),t.getClientRects=t.getBoundingClientRect=s.getClientRects().length>1,t.getClientRects||(s.setEnd(o,1),t.getClientRects=t.getBoundingClientRect=2===s.getClientRects().length),t.getBoundingClientRect||(s.setEnd(s.startContainer,s.startOffset),e=s.getBoundingClientRect(),t.getBoundingClientRect=0===e.top&&0===e.left),document.body.removeChild(n),c=window.ActiveXObject&&new Function("/*@cc_on return @_jscript_version; @*/")(),t.ieZoom=!!c&&c<=10),t},e.getClientRects=function(t){var e,r,o,a,s,c=this.isBroken();if(c.ieZoom)return n(t.getClientRects());if(!c.getClientRects)return t.getClientRects();function l(t){for(var e=0;t=t.previousSibling;)e++;return e}for(e=[],o=[],r=t.endContainer,a=t.endOffset,s=document.createRange();r!==t.commonAncestorContainer;)s.setStart(r,0),s.setEnd(r,a),i(o,s.getClientRects()),a=l(r),r=r.parentNode;return(s=t.cloneRange()).setEnd(r,a),i(e,s.getClientRects()),i(e,o),e},e.getBoundingClientRect=function(t){var e,i,r,o,a,s,c=this.getClientRects(t);if(0===c.length)return null;if(a=t.getBoundingClientRect(),(s=this.isBroken()).ieZoom)return n(a);if(!s.getBoundingClientRect)return a;if(0===a.width&&0===a.height)return c[0];for(e=0,i=c.length;e<i;e++)o=c[e],r?(r.left=Math.min(r.left,o.left),r.top=Math.min(r.top,o.top),r.right=Math.max(r.right,o.right),r.bottom=Math.max(r.bottom,o.bottom)):r={left:o.left,top:o.top,right:o.right,bottom:o.bottom};return r&&(r.width=r.right-r.left,r.height=r.bottom-r.top),r},e})?i.call(e,n,e,t):i)||(t.exports=r)},33:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>C});var i=function(){if("undefined"!=typeof Map)return Map;function t(t,e){var n=-1;return t.some(function(t,i){return t[0]===e&&(n=i,!0)}),n}return function(){function e(){this.__entries__=[]}return Object.defineProperty(e.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),e.prototype.get=function(e){var n=t(this.__entries__,e),i=this.__entries__[n];return i&&i[1]},e.prototype.set=function(e,n){var i=t(this.__entries__,e);~i?this.__entries__[i][1]=n:this.__entries__.push([e,n])},e.prototype.delete=function(e){var n=this.__entries__,i=t(n,e);~i&&n.splice(i,1)},e.prototype.has=function(e){return!!~t(this.__entries__,e)},e.prototype.clear=function(){this.__entries__.splice(0)},e.prototype.forEach=function(t,e){void 0===e&&(e=null);for(var n=0,i=this.__entries__;n<i.length;n++){var r=i[n];t.call(e,r[1],r[0])}},e}()}(),r="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,o=void 0!==n.g&&n.g.Math===Math?n.g:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),a="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(o):function(t){return setTimeout(function(){return t(Date.now())},1e3/60)},s=["top","right","bottom","left","width","height","size","weight"],c="undefined"!=typeof MutationObserver,l=function(){function t(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(t,e){var n=!1,i=!1,r=0;function o(){n&&(n=!1,t()),i&&c()}function s(){a(o)}function c(){var t=Date.now();if(n){if(t-r<2)return;i=!0}else n=!0,i=!1,setTimeout(s,20);r=t}return c}(this.refresh.bind(this))}return t.prototype.addObserver=function(t){~this.observers_.indexOf(t)||this.observers_.push(t),this.connected_||this.connect_()},t.prototype.removeObserver=function(t){var e=this.observers_,n=e.indexOf(t);~n&&e.splice(n,1),!e.length&&this.connected_&&this.disconnect_()},t.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},t.prototype.updateObservers_=function(){var t=this.observers_.filter(function(t){return t.gatherActive(),t.hasActive()});return t.forEach(function(t){return t.broadcastActive()}),t.length>0},t.prototype.connect_=function(){r&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),c?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},t.prototype.disconnect_=function(){r&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},t.prototype.onTransitionEnd_=function(t){var e=t.propertyName,n=void 0===e?"":e;s.some(function(t){return!!~n.indexOf(t)})&&this.refresh()},t.getInstance=function(){return this.instance_||(this.instance_=new t),this.instance_},t.instance_=null,t}(),h=function(t,e){for(var n=0,i=Object.keys(e);n<i.length;n++){var r=i[n];Object.defineProperty(t,r,{value:e[r],enumerable:!1,writable:!1,configurable:!0})}return t},d=function(t){return t&&t.ownerDocument&&t.ownerDocument.defaultView||o},u=f(0,0,0,0);function p(t){return parseFloat(t)||0}function b(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return e.reduce(function(e,n){return e+p(t["border-"+n+"-width"])},0)}var g="undefined"!=typeof SVGGraphicsElement?function(t){return t instanceof d(t).SVGGraphicsElement}:function(t){return t instanceof d(t).SVGElement&&"function"==typeof t.getBBox};function f(t,e,n,i){return{x:t,y:e,width:n,height:i}}var m=function(){function t(t){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=f(0,0,0,0),this.target=t}return t.prototype.isActive=function(){var t=function(t){return r?g(t)?function(t){var e=t.getBBox();return f(0,0,e.width,e.height)}(t):function(t){var e=t.clientWidth,n=t.clientHeight;if(!e&&!n)return u;var i=d(t).getComputedStyle(t),r=function(t){for(var e={},n=0,i=["top","right","bottom","left"];n<i.length;n++){var r=i[n];e[r]=p(t["padding-"+r])}return e}(i),o=r.left+r.right,a=r.top+r.bottom,s=p(i.width),c=p(i.height);if("border-box"===i.boxSizing&&(Math.round(s+o)!==e&&(s-=b(i,"left","right")+o),Math.round(c+a)!==n&&(c-=b(i,"top","bottom")+a)),!function(t){return t===d(t).document.documentElement}(t)){var l=Math.round(s+o)-e,h=Math.round(c+a)-n;1!==Math.abs(l)&&(s-=l),1!==Math.abs(h)&&(c-=h)}return f(r.left,r.top,s,c)}(t):u}(this.target);return this.contentRect_=t,t.width!==this.broadcastWidth||t.height!==this.broadcastHeight},t.prototype.broadcastRect=function(){var t=this.contentRect_;return this.broadcastWidth=t.width,this.broadcastHeight=t.height,t},t}(),_=function(t,e){var n,i,r,o,a,s,c,l=(i=(n=e).x,r=n.y,o=n.width,a=n.height,s="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,c=Object.create(s.prototype),h(c,{x:i,y:r,width:o,height:a,top:r,right:i+o,bottom:a+r,left:i}),c);h(this,{target:t,contentRect:l})},v=function(){function t(t,e,n){if(this.activeObservations_=[],this.observations_=new i,"function"!=typeof t)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=t,this.controller_=e,this.callbackCtx_=n}return t.prototype.observe=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(t instanceof d(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)||(e.set(t,new m(t)),this.controller_.addObserver(this),this.controller_.refresh())}},t.prototype.unobserve=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(t instanceof d(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)&&(e.delete(t),e.size||this.controller_.removeObserver(this))}},t.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},t.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach(function(e){e.isActive()&&t.activeObservations_.push(e)})},t.prototype.broadcastActive=function(){if(this.hasActive()){var t=this.callbackCtx_,e=this.activeObservations_.map(function(t){return new _(t.target,t.broadcastRect())});this.callback_.call(t,e,t),this.clearActive()}},t.prototype.clearActive=function(){this.activeObservations_.splice(0)},t.prototype.hasActive=function(){return this.activeObservations_.length>0},t}(),y="undefined"!=typeof WeakMap?new WeakMap:new i,x=function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=l.getInstance(),i=new v(e,n,this);y.set(this,i)};["observe","unobserve","disconnect"].forEach(function(t){x.prototype[t]=function(){var e;return(e=y.get(this))[t].apply(e,arguments)}});const C=void 0!==o.ResizeObserver?o.ResizeObserver:x},413:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>a});var i=n(379),r=n.n(i),o=n(582);r()(o.Z,{insert:"head",singleton:!1});const a=o.Z.locals||{}},379:(t,e,n)=>{"use strict";var i,r=function(){var t={};return function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}t[e]=n}return t[e]}}(),o=[];function a(t){for(var e=-1,n=0;n<o.length;n++)if(o[n].identifier===t){e=n;break}return e}function s(t,e){for(var n={},i=[],r=0;r<t.length;r++){var s=t[r],c=e.base?s[0]+e.base:s[0],l=n[c]||0,h="".concat(c," ").concat(l);n[c]=l+1;var d=a(h),u={css:s[1],media:s[2],sourceMap:s[3]};-1!==d?(o[d].references++,o[d].updater(u)):o.push({identifier:h,updater:g(u,e),references:1}),i.push(h)}return i}function c(t){var e=document.createElement("style"),i=t.attributes||{};if(void 0===i.nonce){var o=n.nc;o&&(i.nonce=o)}if(Object.keys(i).forEach(function(t){e.setAttribute(t,i[t])}),"function"==typeof t.insert)t.insert(e);else{var a=r(t.insert||"head");if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a.appendChild(e)}return e}var l,h=(l=[],function(t,e){return l[t]=e,l.filter(Boolean).join("\n")});function d(t,e,n,i){var r=n?"":i.media?"@media ".concat(i.media," {").concat(i.css,"}"):i.css;if(t.styleSheet)t.styleSheet.cssText=h(e,r);else{var o=document.createTextNode(r),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(o,a[e]):t.appendChild(o)}}function u(t,e,n){var i=n.css,r=n.media,o=n.sourceMap;if(r?t.setAttribute("media",r):t.removeAttribute("media"),o&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),t.styleSheet)t.styleSheet.cssText=i;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(i))}}var p=null,b=0;function g(t,e){var n,i,r;if(e.singleton){var o=b++;n=p||(p=c(e)),i=d.bind(null,n,o,!1),r=d.bind(null,n,o,!0)}else n=c(e),i=u.bind(null,n,e),r=function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(n)};return i(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;i(t=e)}else r()}}t.exports=function(t,e){(e=e||{}).singleton||"boolean"==typeof e.singleton||(e.singleton=(void 0===i&&(i=Boolean(window&&document&&document.all&&!window.atob)),i));var n=s(t=t||[],e);return function(t){if(t=t||[],"[object Array]"===Object.prototype.toString.call(t)){for(var i=0;i<n.length;i++){var r=a(n[i]);o[r].references--}for(var c=s(t,e),l=0;l<n.length;l++){var h=a(n[l]);0===o[h].references&&(o[h].updater(),o.splice(h,1))}n=c}}}},621:(t,e,n)=>{var i;!function(r){var o=/^\s+/,a=/\s+$/,s=0,c=r.round,l=r.min,h=r.max,d=r.random;function u(t,e){if(e=e||{},(t=t||"")instanceof u)return t;if(!(this instanceof u))return new u(t,e);var n=function(t){var e,n,i={r:0,g:0,b:0},s=1,c=null,d=null,u=null,p=!1,b=!1;return"string"==typeof t&&(t=function(t){t=t.replace(o,"").replace(a,"").toLowerCase();var e,n=!1;if(P[t])t=P[t],n=!0;else if("transparent"==t)return{r:0,g:0,b:0,a:0,format:"name"};return(e=q.rgb.exec(t))?{r:e[1],g:e[2],b:e[3]}:(e=q.rgba.exec(t))?{r:e[1],g:e[2],b:e[3],a:e[4]}:(e=q.hsl.exec(t))?{h:e[1],s:e[2],l:e[3]}:(e=q.hsla.exec(t))?{h:e[1],s:e[2],l:e[3],a:e[4]}:(e=q.hsv.exec(t))?{h:e[1],s:e[2],v:e[3]}:(e=q.hsva.exec(t))?{h:e[1],s:e[2],v:e[3],a:e[4]}:(e=q.hex8.exec(t))?{r:L(e[1]),g:L(e[2]),b:L(e[3]),a:z(e[4]),format:n?"name":"hex8"}:(e=q.hex6.exec(t))?{r:L(e[1]),g:L(e[2]),b:L(e[3]),format:n?"name":"hex"}:(e=q.hex4.exec(t))?{r:L(e[1]+""+e[1]),g:L(e[2]+""+e[2]),b:L(e[3]+""+e[3]),a:z(e[4]+""+e[4]),format:n?"name":"hex8"}:!!(e=q.hex3.exec(t))&&{r:L(e[1]+""+e[1]),g:L(e[2]+""+e[2]),b:L(e[3]+""+e[3]),format:n?"name":"hex"}}(t)),"object"==typeof t&&(V(t.r)&&V(t.g)&&V(t.b)?(e=t.g,n=t.b,i={r:255*T(t.r,255),g:255*T(e,255),b:255*T(n,255)},p=!0,b="%"===String(t.r).substr(-1)?"prgb":"rgb"):V(t.h)&&V(t.s)&&V(t.v)?(c=F(t.s),d=F(t.v),i=function(t,e,n){t=6*T(t,360),e=T(e,100),n=T(n,100);var i=r.floor(t),o=t-i,a=n*(1-e),s=n*(1-o*e),c=n*(1-(1-o)*e),l=i%6;return{r:255*[n,s,a,a,c,n][l],g:255*[c,n,n,s,a,a][l],b:255*[a,a,c,n,n,s][l]}}(t.h,c,d),p=!0,b="hsv"):V(t.h)&&V(t.s)&&V(t.l)&&(c=F(t.s),u=F(t.l),i=function(t,e,n){var i,r,o;function a(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t}if(t=T(t,360),e=T(e,100),n=T(n,100),0===e)i=r=o=n;else{var s=n<.5?n*(1+e):n+e-n*e,c=2*n-s;i=a(c,s,t+1/3),r=a(c,s,t),o=a(c,s,t-1/3)}return{r:255*i,g:255*r,b:255*o}}(t.h,c,u),p=!0,b="hsl"),t.hasOwnProperty("a")&&(s=t.a)),s=E(s),{ok:p,format:t.format||b,r:l(255,h(i.r,0)),g:l(255,h(i.g,0)),b:l(255,h(i.b,0)),a:s}}(t);this._originalInput=t,this._r=n.r,this._g=n.g,this._b=n.b,this._a=n.a,this._roundA=c(100*this._a)/100,this._format=e.format||n.format,this._gradientType=e.gradientType,this._r<1&&(this._r=c(this._r)),this._g<1&&(this._g=c(this._g)),this._b<1&&(this._b=c(this._b)),this._ok=n.ok,this._tc_id=s++}function p(t,e,n){t=T(t,255),e=T(e,255),n=T(n,255);var i,r,o=h(t,e,n),a=l(t,e,n),s=(o+a)/2;if(o==a)i=r=0;else{var c=o-a;switch(r=s>.5?c/(2-o-a):c/(o+a),o){case t:i=(e-n)/c+(e<n?6:0);break;case e:i=(n-t)/c+2;break;case n:i=(t-e)/c+4}i/=6}return{h:i,s:r,l:s}}function b(t,e,n){t=T(t,255),e=T(e,255),n=T(n,255);var i,r,o=h(t,e,n),a=l(t,e,n),s=o,c=o-a;if(r=0===o?0:c/o,o==a)i=0;else{switch(o){case t:i=(e-n)/c+(e<n?6:0);break;case e:i=(n-t)/c+2;break;case n:i=(t-e)/c+4}i/=6}return{h:i,s:r,v:s}}function g(t,e,n,i){var r=[B(c(t).toString(16)),B(c(e).toString(16)),B(c(n).toString(16))];return i&&r[0].charAt(0)==r[0].charAt(1)&&r[1].charAt(0)==r[1].charAt(1)&&r[2].charAt(0)==r[2].charAt(1)?r[0].charAt(0)+r[1].charAt(0)+r[2].charAt(0):r.join("")}function f(t,e,n,i){return[B(D(i)),B(c(t).toString(16)),B(c(e).toString(16)),B(c(n).toString(16))].join("")}function m(t,e){e=0===e?0:e||10;var n=u(t).toHsl();return n.s-=e/100,n.s=I(n.s),u(n)}function _(t,e){e=0===e?0:e||10;var n=u(t).toHsl();return n.s+=e/100,n.s=I(n.s),u(n)}function v(t){return u(t).desaturate(100)}function y(t,e){e=0===e?0:e||10;var n=u(t).toHsl();return n.l+=e/100,n.l=I(n.l),u(n)}function x(t,e){e=0===e?0:e||10;var n=u(t).toRgb();return n.r=h(0,l(255,n.r-c(-e/100*255))),n.g=h(0,l(255,n.g-c(-e/100*255))),n.b=h(0,l(255,n.b-c(-e/100*255))),u(n)}function C(t,e){e=0===e?0:e||10;var n=u(t).toHsl();return n.l-=e/100,n.l=I(n.l),u(n)}function w(t,e){var n=u(t).toHsl(),i=(n.h+e)%360;return n.h=i<0?360+i:i,u(n)}function k(t){var e=u(t).toHsl();return e.h=(e.h+180)%360,u(e)}function S(t){var e=u(t).toHsl(),n=e.h;return[u(t),u({h:(n+120)%360,s:e.s,l:e.l}),u({h:(n+240)%360,s:e.s,l:e.l})]}function O(t){var e=u(t).toHsl(),n=e.h;return[u(t),u({h:(n+90)%360,s:e.s,l:e.l}),u({h:(n+180)%360,s:e.s,l:e.l}),u({h:(n+270)%360,s:e.s,l:e.l})]}function M(t){var e=u(t).toHsl(),n=e.h;return[u(t),u({h:(n+72)%360,s:e.s,l:e.l}),u({h:(n+216)%360,s:e.s,l:e.l})]}function A(t,e,n){e=e||6,n=n||30;var i=u(t).toHsl(),r=360/n,o=[u(t)];for(i.h=(i.h-(r*e>>1)+720)%360;--e;)i.h=(i.h+r)%360,o.push(u(i));return o}function R(t,e){e=e||6;for(var n=u(t).toHsv(),i=n.h,r=n.s,o=n.v,a=[],s=1/e;e--;)a.push(u({h:i,s:r,v:o})),o=(o+s)%1;return a}u.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var t=this.toRgb();return(299*t.r+587*t.g+114*t.b)/1e3},getLuminance:function(){var t,e,n,i=this.toRgb();return e=i.g/255,n=i.b/255,.2126*((t=i.r/255)<=.03928?t/12.92:r.pow((t+.055)/1.055,2.4))+.7152*(e<=.03928?e/12.92:r.pow((e+.055)/1.055,2.4))+.0722*(n<=.03928?n/12.92:r.pow((n+.055)/1.055,2.4))},setAlpha:function(t){return this._a=E(t),this._roundA=c(100*this._a)/100,this},toHsv:function(){var t=b(this._r,this._g,this._b);return{h:360*t.h,s:t.s,v:t.v,a:this._a}},toHsvString:function(){var t=b(this._r,this._g,this._b),e=c(360*t.h),n=c(100*t.s),i=c(100*t.v);return 1==this._a?"hsv("+e+", "+n+"%, "+i+"%)":"hsva("+e+", "+n+"%, "+i+"%, "+this._roundA+")"},toHsl:function(){var t=p(this._r,this._g,this._b);return{h:360*t.h,s:t.s,l:t.l,a:this._a}},toHslString:function(){var t=p(this._r,this._g,this._b),e=c(360*t.h),n=c(100*t.s),i=c(100*t.l);return 1==this._a?"hsl("+e+", "+n+"%, "+i+"%)":"hsla("+e+", "+n+"%, "+i+"%, "+this._roundA+")"},toHex:function(t){return g(this._r,this._g,this._b,t)},toHexString:function(t){return"#"+this.toHex(t)},toHex8:function(t){return function(t,e,n,i,r){var o=[B(c(t).toString(16)),B(c(e).toString(16)),B(c(n).toString(16)),B(D(i))];return r&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)&&o[3].charAt(0)==o[3].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0)+o[3].charAt(0):o.join("")}(this._r,this._g,this._b,this._a,t)},toHex8String:function(t){return"#"+this.toHex8(t)},toRgb:function(){return{r:c(this._r),g:c(this._g),b:c(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+c(this._r)+", "+c(this._g)+", "+c(this._b)+")":"rgba("+c(this._r)+", "+c(this._g)+", "+c(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:c(100*T(this._r,255))+"%",g:c(100*T(this._g,255))+"%",b:c(100*T(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+c(100*T(this._r,255))+"%, "+c(100*T(this._g,255))+"%, "+c(100*T(this._b,255))+"%)":"rgba("+c(100*T(this._r,255))+"%, "+c(100*T(this._g,255))+"%, "+c(100*T(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(j[g(this._r,this._g,this._b,!0)]||!1)},toFilter:function(t){var e="#"+f(this._r,this._g,this._b,this._a),n=e,i=this._gradientType?"GradientType = 1, ":"";if(t){var r=u(t);n="#"+f(r._r,r._g,r._b,r._a)}return"progid:DXImageTransform.Microsoft.gradient("+i+"startColorstr="+e+",endColorstr="+n+")"},toString:function(t){var e=!!t;t=t||this._format;var n=!1;return e||!(this._a<1&&this._a>=0)||"hex"!==t&&"hex6"!==t&&"hex3"!==t&&"hex4"!==t&&"hex8"!==t&&"name"!==t?("rgb"===t&&(n=this.toRgbString()),"prgb"===t&&(n=this.toPercentageRgbString()),"hex"!==t&&"hex6"!==t||(n=this.toHexString()),"hex3"===t&&(n=this.toHexString(!0)),"hex4"===t&&(n=this.toHex8String(!0)),"hex8"===t&&(n=this.toHex8String()),"name"===t&&(n=this.toName()),"hsl"===t&&(n=this.toHslString()),"hsv"===t&&(n=this.toHsvString()),n||this.toHexString()):"name"===t&&0===this._a?this.toName():this.toRgbString()},clone:function(){return u(this.toString())},_applyModification:function(t,e){var n=t.apply(null,[this].concat([].slice.call(e)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(y,arguments)},brighten:function(){return this._applyModification(x,arguments)},darken:function(){return this._applyModification(C,arguments)},desaturate:function(){return this._applyModification(m,arguments)},saturate:function(){return this._applyModification(_,arguments)},greyscale:function(){return this._applyModification(v,arguments)},spin:function(){return this._applyModification(w,arguments)},_applyCombination:function(t,e){return t.apply(null,[this].concat([].slice.call(e)))},analogous:function(){return this._applyCombination(A,arguments)},complement:function(){return this._applyCombination(k,arguments)},monochromatic:function(){return this._applyCombination(R,arguments)},splitcomplement:function(){return this._applyCombination(M,arguments)},triad:function(){return this._applyCombination(S,arguments)},tetrad:function(){return this._applyCombination(O,arguments)}},u.fromRatio=function(t,e){if("object"==typeof t){var n={};for(var i in t)t.hasOwnProperty(i)&&(n[i]="a"===i?t[i]:F(t[i]));t=n}return u(t,e)},u.equals=function(t,e){return!(!t||!e)&&u(t).toRgbString()==u(e).toRgbString()},u.random=function(){return u.fromRatio({r:d(),g:d(),b:d()})},u.mix=function(t,e,n){n=0===n?0:n||50;var i=u(t).toRgb(),r=u(e).toRgb(),o=n/100;return u({r:(r.r-i.r)*o+i.r,g:(r.g-i.g)*o+i.g,b:(r.b-i.b)*o+i.b,a:(r.a-i.a)*o+i.a})},u.readability=function(t,e){var n=u(t),i=u(e);return(r.max(n.getLuminance(),i.getLuminance())+.05)/(r.min(n.getLuminance(),i.getLuminance())+.05)},u.isReadable=function(t,e,n){var i,r,o,a,s,c=u.readability(t,e);switch(r=!1,(o=n,"AA"!==(a=((o=o||{level:"AA",size:"small"}).level||"AA").toUpperCase())&&"AAA"!==a&&(a="AA"),"small"!==(s=(o.size||"small").toLowerCase())&&"large"!==s&&(s="small"),i={level:a,size:s}).level+i.size){case"AAsmall":case"AAAlarge":r=c>=4.5;break;case"AAlarge":r=c>=3;break;case"AAAsmall":r=c>=7}return r},u.mostReadable=function(t,e,n){var i,r,o,a,s=null,c=0;r=(n=n||{}).includeFallbackColors,o=n.level,a=n.size;for(var l=0;l<e.length;l++)(i=u.readability(t,e[l]))>c&&(c=i,s=u(e[l]));return u.isReadable(t,s,{level:o,size:a})||!r?s:(n.includeFallbackColors=!1,u.mostReadable(t,["#fff","#000"],n))};var P=u.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},j=u.hexNames=function(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}(P);function E(t){return t=parseFloat(t),(isNaN(t)||t<0||t>1)&&(t=1),t}function T(t,e){(function(t){return"string"==typeof t&&-1!=t.indexOf(".")&&1===parseFloat(t)})(t)&&(t="100%");var n=function(t){return"string"==typeof t&&-1!=t.indexOf("%")}(t);return t=l(e,h(0,parseFloat(t))),n&&(t=parseInt(t*e,10)/100),r.abs(t-e)<1e-6?1:t%e/parseFloat(e)}function I(t){return l(1,h(0,t))}function L(t){return parseInt(t,16)}function B(t){return 1==t.length?"0"+t:""+t}function F(t){return t<=1&&(t=100*t+"%"),t}function D(t){return r.round(255*parseFloat(t)).toString(16)}function z(t){return L(t)/255}var N,$,H,q=($="[\\s|\\(]+("+(N="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+N+")[,|\\s]+("+N+")\\s*\\)?",H="[\\s|\\(]+("+N+")[,|\\s]+("+N+")[,|\\s]+("+N+")[,|\\s]+("+N+")\\s*\\)?",{CSS_UNIT:new RegExp(N),rgb:new RegExp("rgb"+$),rgba:new RegExp("rgba"+H),hsl:new RegExp("hsl"+$),hsla:new RegExp("hsla"+H),hsv:new RegExp("hsv"+$),hsva:new RegExp("hsva"+H),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function V(t){return!!q.CSS_UNIT.exec(t)}t.exports?t.exports=u:void 0===(i=(function(){return u}).call(e,n,e,t))||(t.exports=i)}(Math)},607:function(t,e,n){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Cursor=e.default=void 0;var r=i(n(678));e.default=r.default;var o=i(n(353));e.Cursor=o.default,n(413)},353:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(621),r=function(){function t(t,e,n){this.id=t,this.name=e,this.color=n}return t.prototype.build=function(e){var n=document.createElement(t.CONTAINER_ELEMENT_TAG);n.classList.add(t.CURSOR_CLASS),n.id="ql-cursor-"+this.id,n.innerHTML=e.template;var i=n.getElementsByClassName(t.SELECTION_CLASS)[0],r=n.getElementsByClassName(t.CARET_CONTAINER_CLASS)[0],o=r.getElementsByClassName(t.CARET_CLASS)[0],a=n.getElementsByClassName(t.FLAG_CLASS)[0];return a.style.backgroundColor=this.color,o.style.backgroundColor=this.color,n.getElementsByClassName(t.NAME_CLASS)[0].textContent=this.name,this._hideDelay=e.hideDelayMs+"ms",this._hideSpeedMs=e.hideSpeedMs,this._positionFlag=e.positionFlag,a.style.transitionDelay=this._hideDelay,a.style.transitionDuration=this._hideSpeedMs+"ms",this._el=n,this._selectionEl=i,this._caretEl=r,this._flagEl=a,this._el},t.prototype.show=function(){this._el.classList.remove(t.HIDDEN_CLASS)},t.prototype.hide=function(){this._el.classList.add(t.HIDDEN_CLASS)},t.prototype.remove=function(){this._el.parentNode.removeChild(this._el)},t.prototype.toggleFlag=function(e){var n=this;this._flagEl.classList.toggle(t.SHOW_FLAG_CLASS,e)||(this._flagEl.classList.add(t.NO_DELAY_CLASS),setTimeout(function(){return n._flagEl.classList.remove(t.NO_DELAY_CLASS)},this._hideSpeedMs))},t.prototype.updateCaret=function(t,e){this._caretEl.style.top=t.top+"px",this._caretEl.style.left=t.left+"px",this._caretEl.style.height=t.height+"px",this._positionFlag?this._positionFlag(this._flagEl,t,e):this._updateCaretFlag(t,e)},t.prototype.updateSelection=function(t,e){var n=this;this._clearSelection(),t=t||[],t=Array.from(t),t=this._sanitize(t),(t=this._sortByDomPosition(t)).forEach(function(t){return n._addSelection(t,e)})},t.prototype._updateCaretFlag=function(e,n){this._flagEl.style.width="";var i=this._flagEl.getBoundingClientRect();this._flagEl.classList.remove(t.FLAG_FLIPPED_CLASS),e.left>n.width-i.width&&this._flagEl.classList.add(t.FLAG_FLIPPED_CLASS),this._flagEl.style.left=e.left+"px",this._flagEl.style.top=e.top+"px",this._flagEl.style.width=Math.ceil(i.width)+"px"},t.prototype._clearSelection=function(){this._selectionEl.innerHTML=""},t.prototype._addSelection=function(t,e){var n=this._selectionBlock(t,e);this._selectionEl.appendChild(n)},t.prototype._selectionBlock=function(e,n){var r=document.createElement(t.SELECTION_ELEMENT_TAG);return r.classList.add(t.SELECTION_BLOCK_CLASS),r.style.top=e.top-n.top+"px",r.style.left=e.left-n.left+"px",r.style.width=e.width+"px",r.style.height=e.height+"px",r.style.backgroundColor=i(this.color).setAlpha(.3).toString(),r},t.prototype._sortByDomPosition=function(t){return t.sort(function(t,e){return t.top===e.top?t.left-e.left:t.top-e.top})},t.prototype._sanitize=function(t){var e=this,n=new Set;return t.filter(function(t){if(!t.width||!t.height)return!1;var i=e._serialize(t);return!n.has(i)&&(n.add(i),!0)})},t.prototype._serialize=function(t){return["top:"+t.top,"right:"+t.right,"bottom:"+t.bottom,"left:"+t.left].join(";")},t.CONTAINER_ELEMENT_TAG="SPAN",t.SELECTION_ELEMENT_TAG="SPAN",t.CURSOR_CLASS="ql-cursor",t.SELECTION_CLASS="ql-cursor-selections",t.SELECTION_BLOCK_CLASS="ql-cursor-selection-block",t.CARET_CLASS="ql-cursor-caret",t.CARET_CONTAINER_CLASS="ql-cursor-caret-container",t.FLAG_CLASS="ql-cursor-flag",t.SHOW_FLAG_CLASS="show-flag",t.FLAG_FLIPPED_CLASS="flag-flipped",t.NAME_CLASS="ql-cursor-name",t.HIDDEN_CLASS="hidden",t.NO_DELAY_CLASS="no-delay",t}();e.default=r},678:function(t,e,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),r=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&i(e,t,n);return r(e,t),e},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var s=a(n(353)),c=o(n(165)),l=a(n(338)),h=a(n(33)),d=n(895),u=function(){function t(t,e){void 0===e&&(e={}),this._cursors={},this._isObserving=!1,this.quill=t,this.options=this._setDefaults(e),this._container=this.quill.addContainer(this.options.containerClass),this._boundsContainer=this.options.boundsContainer||this.quill.container,this._currentSelection=this.quill.getSelection(),this._registerSelectionChangeListeners(),this._registerTextChangeListener(),this._registerDomListeners()}return t.prototype.createCursor=function(t,e,n){var i=this._cursors[t];if(!i){i=new s.default(t,e,n),this._cursors[t]=i;var r=i.build(this.options);this._container.appendChild(r)}return i},t.prototype.moveCursor=function(t,e){var n=this._cursors[t];n&&(n.range=e,this._updateCursor(n))},t.prototype.removeCursor=function(t){var e=this._cursors[t];e&&(e.remove(),delete this._cursors[t])},t.prototype.update=function(){var t=this;this.cursors().forEach(function(e){return t._updateCursor(e)})},t.prototype.clearCursors=function(){var t=this;this.cursors().forEach(function(e){return t.removeCursor(e.id)})},t.prototype.toggleFlag=function(t,e){var n=this._cursors[t];n&&n.toggleFlag(e)},t.prototype.cursors=function(){var t=this;return Object.keys(this._cursors).map(function(e){return t._cursors[e]})},t.prototype._registerSelectionChangeListeners=function(){var t=this;this.quill.on(this.quill.constructor.events.SELECTION_CHANGE,function(e){t._currentSelection=e})},t.prototype._registerTextChangeListener=function(){var t=this;this.quill.on(this.quill.constructor.events.TEXT_CHANGE,function(e){return t._handleTextChange(e)})},t.prototype._registerDomListeners=function(){var t=this;this.quill.container.getElementsByClassName("ql-editor")[0].addEventListener("scroll",function(){return t.update()})},t.prototype._registerResizeObserver=function(){var t=this;if(!this._isObserving){var e=this.quill.container.getElementsByClassName("ql-editor")[0],n=new h.default(function(e){e[0].target.isConnected||(n.disconnect(),t._isObserving=!1),t.update()});n.observe(e),this._isObserving=!0}},t.prototype._updateCursor=function(t){if(this._registerResizeObserver(),!t.range)return t.hide();var e=this._indexWithinQuillBounds(t.range.index),n=this._indexWithinQuillBounds(t.range.index+t.range.length),i=this.quill.getLeaf(e),r=this.quill.getLeaf(n);if(!this._leafIsValid(i)||!this._leafIsValid(r))return t.hide();t.show();var o=this._boundsContainer.getBoundingClientRect(),a=this.quill.getBounds(n);t.updateCaret(a,o);var s=this._lineRanges(t,i,r).reduce(function(t,e){return t.concat(Array.from(c.getClientRects(e)))},[]);t.updateSelection(s,o)},t.prototype._indexWithinQuillBounds=function(t){var e=this.quill.getLength(),n=e?e-1:0;return t=Math.max(t,0),Math.min(t,n)},t.prototype._leafIsValid=function(t){return t&&t[0]&&t[0].domNode&&t[1]>=0},t.prototype._handleTextChange=function(t){var e=this;window.setTimeout(function(){e.options.transformOnTextChange&&e._transformCursors(t),e.options.selectionChangeSource&&(e._emitSelection(),e.update())})},t.prototype._emitSelection=function(){this.quill.emitter.emit(this.quill.constructor.events.SELECTION_CHANGE,this.quill.getSelection(),this._currentSelection,this.options.selectionChangeSource)},t.prototype._setDefaults=function(e){return(e=Object.assign({},e)).template||(e.template=t.DEFAULTS.template),e.containerClass||(e.containerClass=t.DEFAULTS.containerClass),null!==e.selectionChangeSource&&(e.selectionChangeSource||(e.selectionChangeSource=t.DEFAULTS.selectionChangeSource)),e.hideDelayMs=Number.isInteger(e.hideDelayMs)?e.hideDelayMs:t.DEFAULTS.hideDelayMs,e.hideSpeedMs=Number.isInteger(e.hideSpeedMs)?e.hideSpeedMs:t.DEFAULTS.hideSpeedMs,e.transformOnTextChange=!!e.transformOnTextChange,e},t.prototype._lineRanges=function(t,e,n){var i=this.quill.getLines(t.range);return i.reduce(function(t,r,o){if(!r.children){var a=document.createRange();return a.selectNode(r.domNode),t.concat(a)}var s=0===o?e:r.path(0).pop(),c=s[0],l=s[1],h=o===i.length-1?n:r.path(r.length()-1).pop(),d=h[0],u=h[1],p=document.createRange();return c.domNode.nodeType===Node.TEXT_NODE?p.setStart(c.domNode,l):p.setStartBefore(c.domNode),d.domNode.nodeType===Node.TEXT_NODE?p.setEnd(d.domNode,u):p.setEndAfter(d.domNode),t.concat(p)},[])},t.prototype._transformCursors=function(t){var e=this;t=new d(t),this.cursors().filter(function(t){return t.range}).forEach(function(n){n.range.index=t.transformPosition(n.range.index),e._updateCursor(n)})},t.DEFAULTS={template:l.default,containerClass:"ql-cursors",selectionChangeSource:"api",hideDelayMs:3e3,hideSpeedMs:400},t}();e.default=u},338:function(t,e,n){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var r=i(n(353));e.default='\n  <span class="'+r.default.SELECTION_CLASS+'"></span>\n  <span class="'+r.default.CARET_CONTAINER_CLASS+'">\n    <span class="'+r.default.CARET_CLASS+'"></span>\n  </span>\n  <div class="'+r.default.FLAG_CLASS+'">\n    <small class="'+r.default.NAME_CLASS+'"></small>\n  </div>\n'}},e={};function n(i){var r=e[i];if(void 0!==r)return r.exports;var o=e[i]={id:i,loaded:!1,exports:{}};return t[i].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}return n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),n(607).default})()}}]);